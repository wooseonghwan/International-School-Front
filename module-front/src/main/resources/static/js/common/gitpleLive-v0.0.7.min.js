(function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,t.GitpleLive=e()}})(function(){var e;return function(){function s(l,e,r){function t(d,n){if(!e[d]){if(!l[d]){var i="function"==typeof require&&require;if(!n&&i)return i(d,!0);if(o)return o(d,!0);var c=new Error("Cannot find module '"+d+"'");throw c.code="MODULE_NOT_FOUND",c}var a=e[d]={exports:{}};l[d][0].call(a.exports,function(e){var r=l[d][1][e];return t(r||e)},a,a.exports,s,l,e,r)}return e[d].exports}for(var o="function"==typeof require&&require,n=0;n<r.length;n++)t(r[n]);return t}return s}()({1:[function(e,t,r){(function(t){(function(){"use strict";var o=this&&this.__awaiter||function(e,t,r,o){function n(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function a(e){try{l(o.next(e))}catch(t){i(t)}}function s(e){try{l(o["throw"](e))}catch(t){i(t)}}function l(e){e.done?r(e.value):n(e.value).then(a,s)}l((o=o.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.Client=r.GitpleLiveError=r.ErrorType=void 0;const i=n(e("mqtt")),a=n(e("events")),s=e("./lib/error");Object.defineProperty(r,"ErrorType",{enumerable:!0,get:function(){return s.ErrorType}}),Object.defineProperty(r,"GitpleLiveError",{enumerable:!0,get:function(){return s.GitpleLiveError}});const l=n(e("axios"));class d extends a.default{constructor(e){if(super(),this.version="v0.0.7",this.client_ip="",this.client_id="",this.session_token_expire_at=0,this.firstConnectionDone=!1,this.connected=!1,this.numberRetries=0,this.reconnecting=!1,this.disconnectedTime=0,this._devMode=null,this.url=e.url,this.app_id=e.app_id,this.session_token=e.session_token,e._devMode&&(this._devMode=e._devMode),!e.url||!e.app_id){throw new s.GitpleLiveError(s.ErrorType.INVALID_PARAMETERS)}this.numberRetries=0,this.subscribe_topic=`mqtt/topic/gitple/live/${this.app_id}/#`}getClientIP(){return o(this,void 0,void 0,function*(){const e=this._devMode?`${this.url}:8080/health`:`${this.url}/health`;try{const t=yield l.default.get(e);let r=t.headers["x-forwarded-for"];return this._devMode&&r.includes("::ffff:")&&(r=r.replace("::ffff:","")),r}catch(e){throw new s.GitpleLiveError(s.ErrorType.SERVER_NOT_RESPONDING)}})}getTokenInformation(e){const r=t.from(e,"base64"),o=JSON.parse(r.toString());this.session_token_expire_at=o.exp}connectUser(e){return o(this,void 0,void 0,function*(){const t=this.session_token.split(".");if(3!==t.length)throw new s.GitpleLiveError(s.ErrorType.INVALID_PARAMETERS);this.getTokenInformation(t[1]);try{const e=yield this.getClientIP();e&&(this.client_ip=e)}catch(t){throw new s.GitpleLiveError(s.ErrorType.SERVER_NOT_RESPONDING)}if(this.user_id=e&&e.user_id,!e||!e.user_id)throw new s.GitpleLiveError(s.ErrorType.INVALID_PARAMETERS);this.setupMqtt()})}disconnectUser(){this.releaseMqtt()}checkTokenExpired(){return!(this.session_token_expire_at>Date.now())}initConn(){this.reconnecting=!1,this.numberRetries=0,this.disconnectedTime=0}releaseMqtt(){this.mqtt_client&&(this.reconnecting?this.emit("reconnectFailed"):this.connected&&this.emit("disconnected"),this.mqtt_client.end(),this.mqtt_client=null,this.connected=!1,this.reconnecting=!1,this.firstConnectionDone=!1)}setupMqtt(){if(this.releaseMqtt(),this.client_id=`${this.app_id}::${this.user_id}::${this.version}::${Date.now()}::${this.client_ip}`,this.checkTokenExpired()){throw new s.GitpleLiveError(s.ErrorType.SESSION_EXPIRED_TOKEN)}let e="wss",t=443;this._devMode&&(e="ws",t=this._devMode.port);const r={clientId:this.client_id,path:"/ws",protocol:e,port:t,clean:!0,keepalive:30,reconnectPeriod:10000,connectTimeout:3000,username:this.user_id,password:this.session_token};this.mqtt_client=i.default.connect(this.url,r),this.mqtt_client.on("connect",()=>{this.firstConnectionDone?this.reconnecting&&(this.emit("reconnectSucceed"),this.reconnecting=!1):(this.emit("connected"),this.firstConnectionDone=!0),this.connected=!0,this.initConn(),this.mqtt_client&&this.mqtt_client.subscribe([this.subscribe_topic],(e,t)=>{(e||t&&t[0]&&128===t[0].qos)&&(this.emit("error",new s.GitpleLiveError(s.ErrorType.INVALID_TOPIC)),this.releaseMqtt())})}),this.mqtt_client.on("reconnect",()=>{if(this.checkTokenExpired())return this.emit("error",new s.GitpleLiveError(s.ErrorType.SESSION_EXPIRED_TOKEN)),void this.releaseMqtt();if(this.firstConnectionDone&&0<this.disconnectedTime){const e=Date.now()-this.disconnectedTime;e>3e3&&(!this.reconnecting&&(this.reconnecting=!0,this.emit("reconnectTry")),this.reconnecting&&(this.numberRetries>=12?this.releaseMqtt():this.numberRetries++))}}),this.mqtt_client.on("close",()=>{this.firstConnectionDone&&0===this.disconnectedTime&&(this.disconnectedTime=Date.now())}),this.mqtt_client.on("error",e=>{if(!(this.reconnecting||null===this.mqtt_client)&&null!==this.mqtt_client)if("ENOTFOUND"===e.code)this.emit("error",new s.GitpleLiveError(s.ErrorType.UNABLE_CONNECT_ERROR));else if(4===e.code)this.emit("error",new s.GitpleLiveError(s.ErrorType.AUTHORIZATION_ERROR));else{const t=new s.GitpleLiveError(s.ErrorType.AUTHORIZATION_ERROR);t.meta=e,this.emit("error",t)}}),this.mqtt_client.on("message",(e,t)=>{const r=JSON.parse(t+"");try{let e=r.category;["open:channel_create","group:channel_create","open:channel_update","group:channel_update","open:channel_delete","group:channel_delete","open:channel_freeze","group:channel_freeze","open:channel_unfreeze","group:channel_unfreeze","open:channel_message_read_event","group:channel_message_read_event","open:channel_message_delivered_event","group:channel_message_delivered_event"].includes(e)?this.emit(e,r.channel):["open:channel_join","group:channel_join","open:channel_leave","group:channel_leave","open:channel_manager_create","group:channel_manager_create","open:channel_manager_delete","group:channel_manager_delete"].includes(e)?this.emit(e,r.channel,r.user):["group:message_send","group:message_send","group:message_delete","group:message_delete"].includes(e)?this.emit(e,r.channel,r.message):["user_update","user_delete"].includes(e)?this.emit(e,r.user):this.emit("other",r)}catch(e){const t=new s.GitpleLiveError(s.ErrorType.UNKNOWN_ERROR);t.meta=e,this.emit("error",t)}})}}r.Client=d,d.instance=null}).call(this)}).call(this,e("buffer").Buffer)},{"./lib/error":2,axios:3,buffer:40,events:45,mqtt:70}],2:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.GitpleLiveError=r.ErrorType=void 0,r.ErrorType={AUTHORIZATION_ERROR:{code:4001,name:"authorization_error",message:"Unauthorized."},UNABLE_CONNECT_ERROR:{code:60020,name:"unable_to_connnect",message:"Unable to connect to the server."},INVALID_PARAMETERS:{code:60021,name:"invalid_parameters",message:"Check parameters."},UNINITIALIZED:{code:60022,name:"uninitialized",message:"Initialize gitplelive."},INVALID_TOPIC:{code:60023,name:"invalid_topic",message:"Ccheck the app id."},SESSION_EXPIRED_TOKEN:{code:60024,name:"expired_token",message:"Generate token again."},UNKNOWN_ERROR:{code:60099,name:"unknown_error",message:"Check the message on the console.",meta:{}},SERVER_NOT_RESPONDING:{code:60100,name:"server_not_responding",message:"GitpleLive server is not responding."}};class o extends Error{constructor(e){super(e.name),this.code=0,this.meta={},this.name=e.name,this.code=e.code,this.message=e.message,Object.setPrototypeOf(this,o.prototype)}toString(){return`[GitpleLive Error] `+this.message+` (${this.code+""})`}}r.GitpleLiveError=o},{}],3:[function(e,t){t.exports=e("./lib/axios")},{"./lib/axios":5}],4:[function(e,t){'use strict';var r=e("./../utils"),o=e("./../core/settle"),n=e("./../helpers/cookies"),i=e("./../helpers/buildURL"),a=e("../core/buildFullPath"),s=e("./../helpers/parseHeaders"),l=e("./../helpers/isURLSameOrigin"),d=e("../defaults/transitional"),p=e("../core/AxiosError"),c=e("../cancel/CanceledError"),u=e("../helpers/parseProtocol");t.exports=function(e){return new Promise(function(t,f){function h(){e.cancelToken&&e.cancelToken.unsubscribe(_),e.signal&&e.signal.removeEventListener("abort",_)}function g(){if(k){var r="getAllResponseHeaders"in k?s(k.getAllResponseHeaders()):null,n=y&&"text"!==y&&"json"!==y?k.response:k.responseText,i={data:n,status:k.status,statusText:k.statusText,headers:r,config:e,request:k};o(function(e){t(e),h()},function(e){f(e),h()},i),k=null}}var m=e.data,b=e.headers,y=e.responseType,_;r.isFormData(m)&&r.isStandardBrowserEnv()&&delete b["Content-Type"];var k=new XMLHttpRequest;if(e.auth){var C=e.auth.username||"",S=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";b.Authorization="Basic "+btoa(C+":"+S)}var v=a(e.baseURL,e.url);if(k.open(e.method.toUpperCase(),i(v,e.params,e.paramsSerializer),!0),k.timeout=e.timeout,"onloadend"in k?k.onloadend=g:k.onreadystatechange=function(){k&&4===k.readyState&&(0!==k.status||k.responseURL&&0===k.responseURL.indexOf("file:"))&&setTimeout(g)},k.onabort=function(){k&&(f(new p("Request aborted",p.ECONNABORTED,e,k)),k=null)},k.onerror=function(){f(new p("Network Error",p.ERR_NETWORK,e,k,k)),k=null},k.ontimeout=function(){var t=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded",r=e.transitional||d;e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),f(new p(t,r.clarifyTimeoutError?p.ETIMEDOUT:p.ECONNABORTED,e,k)),k=null},r.isStandardBrowserEnv()){var E=(e.withCredentials||l(v))&&e.xsrfCookieName?n.read(e.xsrfCookieName):void 0;E&&(b[e.xsrfHeaderName]=E)}"setRequestHeader"in k&&r.forEach(b,function(e,t){"undefined"==typeof m&&"content-type"===t.toLowerCase()?delete b[t]:k.setRequestHeader(t,e)}),r.isUndefined(e.withCredentials)||(k.withCredentials=!!e.withCredentials),y&&"json"!==y&&(k.responseType=e.responseType),"function"==typeof e.onDownloadProgress&&k.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&k.upload&&k.upload.addEventListener("progress",e.onUploadProgress),(e.cancelToken||e.signal)&&(_=function(e){k&&(f(!e||e&&e.type?new c:e),k.abort(),k=null)},e.cancelToken&&e.cancelToken.subscribe(_),e.signal&&(e.signal.aborted?_():e.signal.addEventListener("abort",_))),m||(m=null);var w=u(v);return w&&-1===["http","https","file"].indexOf(w)?void f(new p("Unsupported protocol "+w+":",p.ERR_BAD_REQUEST,e)):void k.send(m)})}},{"../cancel/CanceledError":7,"../core/AxiosError":10,"../core/buildFullPath":12,"../defaults/transitional":18,"../helpers/parseProtocol":30,"./../core/settle":15,"./../helpers/buildURL":21,"./../helpers/cookies":23,"./../helpers/isURLSameOrigin":26,"./../helpers/parseHeaders":29,"./../utils":34}],5:[function(e,t){'use strict';function r(e){var t=new i(e),s=n(i.prototype.request,t);return o.extend(s,i.prototype,t),o.extend(s,t),s.create=function(t){return r(a(e,t))},s}var o=e("./utils"),n=e("./helpers/bind"),i=e("./core/Axios"),a=e("./core/mergeConfig"),s=e("./defaults"),l=r(s);l.Axios=i,l.CanceledError=e("./cancel/CanceledError"),l.CancelToken=e("./cancel/CancelToken"),l.isCancel=e("./cancel/isCancel"),l.VERSION=e("./env/data").version,l.toFormData=e("./helpers/toFormData"),l.AxiosError=e("../lib/core/AxiosError"),l.Cancel=l.CanceledError,l.all=function(e){return Promise.all(e)},l.spread=e("./helpers/spread"),l.isAxiosError=e("./helpers/isAxiosError"),t.exports=l,t.exports.default=l},{"../lib/core/AxiosError":10,"./cancel/CancelToken":6,"./cancel/CanceledError":7,"./cancel/isCancel":8,"./core/Axios":9,"./core/mergeConfig":14,"./defaults":17,"./env/data":19,"./helpers/bind":20,"./helpers/isAxiosError":25,"./helpers/spread":31,"./helpers/toFormData":32,"./utils":34}],6:[function(e,t){'use strict';function r(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(e){t=e});var r=this;this.promise.then(function(e){if(r._listeners){var t=r._listeners.length,o;for(o=0;o<t;o++)r._listeners[o](e);r._listeners=null}}),this.promise.then=function(e){var t=new Promise(function(e){r.subscribe(e),o=e}).then(e),o;return t.cancel=function(){r.unsubscribe(o)},t},e(function(e){r.reason||(r.reason=new o(e),t(r.reason))})}var o=e("./CanceledError");r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.prototype.subscribe=function(e){return this.reason?void e(this.reason):void(this._listeners?this._listeners.push(e):this._listeners=[e])},r.prototype.unsubscribe=function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}},r.source=function(){var e=new r(function(e){t=e}),t;return{token:e,cancel:t}},t.exports=r},{"./CanceledError":7}],7:[function(e,t){'use strict';function r(e){o.call(this,null==e?"canceled":e,o.ERR_CANCELED),this.name="CanceledError"}var o=e("../core/AxiosError"),n=e("../utils");n.inherits(r,o,{__CANCEL__:!0}),t.exports=r},{"../core/AxiosError":10,"../utils":34}],8:[function(e,t){'use strict';t.exports=function(e){return!!(e&&e.__CANCEL__)}},{}],9:[function(e,t){'use strict';function r(e){this.defaults=e,this.interceptors={request:new i,response:new i}}var o=e("./../utils"),n=e("../helpers/buildURL"),i=e("./InterceptorManager"),a=e("./dispatchRequest"),s=e("./mergeConfig"),l=e("./buildFullPath"),d=e("../helpers/validator"),p=d.validators;r.prototype.request=function(e,t){"string"==typeof e?(t=t||{},t.url=e):t=e||{},t=s(this.defaults,t),t.method=t.method?t.method.toLowerCase():this.defaults.method?this.defaults.method.toLowerCase():"get";var r=t.transitional;r!==void 0&&d.assertOptions(r,{silentJSONParsing:p.transitional(p.boolean),forcedJSONParsing:p.transitional(p.boolean),clarifyTimeoutError:p.transitional(p.boolean)},!1);var o=[],n=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(n=n&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});var i=[];this.interceptors.response.forEach(function(e){i.push(e.fulfilled,e.rejected)});var l;if(!n){var c=[a,void 0];for(Array.prototype.unshift.apply(c,o),c=c.concat(i),l=Promise.resolve(t);c.length;)l=l.then(c.shift(),c.shift());return l}for(var u=t;o.length;){var f=o.shift(),h=o.shift();try{u=f(u)}catch(e){h(e);break}}try{l=a(u)}catch(e){return Promise.reject(e)}for(;i.length;)l=l.then(i.shift(),i.shift());return l},r.prototype.getUri=function(e){e=s(this.defaults,e);var t=l(e.baseURL,e.url);return n(t,e.params,e.paramsSerializer)},o.forEach(["delete","get","head","options"],function(e){r.prototype[e]=function(t,r){return this.request(s(r||{},{method:e,url:t,data:(r||{}).data}))}}),o.forEach(["post","put","patch"],function(e){function t(t){return function(r,o,n){return this.request(s(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}r.prototype[e]=t(),r.prototype[e+"Form"]=t(!0)}),t.exports=r},{"../helpers/buildURL":21,"../helpers/validator":33,"./../utils":34,"./InterceptorManager":11,"./buildFullPath":12,"./dispatchRequest":13,"./mergeConfig":14}],10:[function(e,t){'use strict';function r(e,t,r,o,n){Error.call(this),this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),o&&(this.request=o),n&&(this.response=n)}var o=e("../utils");o.inherits(r,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var n=r.prototype,i={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(e){i[e]={value:e}}),Object.defineProperties(r,i),Object.defineProperty(n,"isAxiosError",{value:!0}),r.from=function(e,t,i,a,s,l){var d=Object.create(n);return o.toFlatObject(e,d,function(e){return e!==Error.prototype}),r.call(d,e.message,t,i,a,s),d.name=e.name,l&&Object.assign(d,l),d},t.exports=r},{"../utils":34}],11:[function(e,t){'use strict';function r(){this.handlers=[]}var o=e("./../utils");r.prototype.use=function(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},r.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},r.prototype.forEach=function(e){o.forEach(this.handlers,function(t){null!==t&&e(t)})},t.exports=r},{"./../utils":34}],12:[function(e,t){'use strict';var r=e("../helpers/isAbsoluteURL"),o=e("../helpers/combineURLs");t.exports=function(e,t){return e&&!r(t)?o(e,t):t}},{"../helpers/combineURLs":22,"../helpers/isAbsoluteURL":24}],13:[function(e,t){'use strict';function r(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new s}var o=e("./../utils"),n=e("./transformData"),i=e("../cancel/isCancel"),a=e("../defaults"),s=e("../cancel/CanceledError");t.exports=function(e){r(e),e.headers=e.headers||{},e.data=n.call(e,e.data,e.headers,e.transformRequest),e.headers=o.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),o.forEach(["delete","get","head","post","put","patch","common"],function(t){delete e.headers[t]});var t=e.adapter||a.adapter;return t(e).then(function(t){return r(e),t.data=n.call(e,t.data,t.headers,e.transformResponse),t},function(t){return i(t)||(r(e),t&&t.response&&(t.response.data=n.call(e,t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)})}},{"../cancel/CanceledError":7,"../cancel/isCancel":8,"../defaults":17,"./../utils":34,"./transformData":16}],14:[function(e,t){'use strict';var r=e("../utils");t.exports=function(e,t){function o(e,t){return r.isPlainObject(e)&&r.isPlainObject(t)?r.merge(e,t):r.isPlainObject(t)?r.merge({},t):r.isArray(t)?t.slice():t}function n(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(e[n],t[n])}function i(e){if(!r.isUndefined(t[e]))return o(void 0,t[e])}function a(n){return r.isUndefined(t[n])?r.isUndefined(e[n])?void 0:o(void 0,e[n]):o(void 0,t[n])}function s(r){return r in t?o(e[r],t[r]):r in e?o(void 0,e[r]):void 0}t=t||{};var l={},d={url:i,method:i,data:i,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s};return r.forEach(Object.keys(e).concat(Object.keys(t)),function(e){var t=d[e]||n,o=t(e);r.isUndefined(o)&&t!==s||(l[e]=o)}),l}},{"../utils":34}],15:[function(e,t){'use strict';var r=e("./AxiosError");t.exports=function(e,t,o){var n=o.config.validateStatus;o.status&&n&&!n(o.status)?t(new r("Request failed with status code "+o.status,[r.ERR_BAD_REQUEST,r.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o)):e(o)}},{"./AxiosError":10}],16:[function(e,t){'use strict';var r=e("./../utils"),o=e("../defaults");t.exports=function(e,t,n){var i=this||o;return r.forEach(n,function(r){e=r.call(i,e,t)}),e}},{"../defaults":17,"./../utils":34}],17:[function(e,t){(function(r){(function(){'use strict';function o(e,t){!i.isUndefined(e)&&i.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function n(e,t,r){if(i.isString(e))try{return(t||JSON.parse)(e),i.trim(e)}catch(t){if("SyntaxError"!==t.name)throw t}return(r||JSON.stringify)(e)}var i=e("../utils"),a=e("../helpers/normalizeHeaderName"),s=e("../core/AxiosError"),l=e("./transitional"),d=e("../helpers/toFormData"),p={"Content-Type":"application/x-www-form-urlencoded"},c={transitional:l,adapter:function(){var t;return"undefined"==typeof XMLHttpRequest?"undefined"!=typeof r&&"[object process]"===Object.prototype.toString.call(r)&&(t=e("../adapters/http")):t=e("../adapters/xhr"),t}(),transformRequest:[function(e,t){if(a(t,"Accept"),a(t,"Content-Type"),i.isFormData(e)||i.isArrayBuffer(e)||i.isBuffer(e)||i.isStream(e)||i.isFile(e)||i.isBlob(e))return e;if(i.isArrayBufferView(e))return e.buffer;if(i.isURLSearchParams(e))return o(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString();var r=i.isObject(e),s=t&&t["Content-Type"],l;if((l=i.isFileList(e))||r&&"multipart/form-data"===s){var p=this.env&&this.env.FormData;return d(l?{"files[]":e}:e,p&&new p)}return r||"application/json"===s?(o(t,"application/json"),n(e)):e}],transformResponse:[function(e){var t=this.transitional||c.transitional,r=t&&t.silentJSONParsing,o=t&&t.forcedJSONParsing,n=!r&&"json"===this.responseType;if(n||o&&i.isString(e)&&e.length)try{return JSON.parse(e)}catch(t){if(n){if("SyntaxError"===t.name)throw s.from(t,s.ERR_BAD_RESPONSE,this,null,this.response);throw t}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:e("./env/FormData")},validateStatus:function(e){return 200<=e&&300>e},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],function(e){c.headers[e]={}}),i.forEach(["post","put","patch"],function(e){c.headers[e]=i.merge(p)}),t.exports=c}).call(this)}).call(this,e("_process"))},{"../adapters/http":4,"../adapters/xhr":4,"../core/AxiosError":10,"../helpers/normalizeHeaderName":27,"../helpers/toFormData":32,"../utils":34,"./env/FormData":28,"./transitional":18,_process:85}],18:[function(e,t){'use strict';t.exports={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1}},{}],19:[function(e,t){t.exports={version:"0.27.2"}},{}],20:[function(e,t){'use strict';t.exports=function(e,t){return function(){for(var r=Array(arguments.length),o=0;o<r.length;o++)r[o]=arguments[o];return e.apply(t,r)}}},{}],21:[function(e,t){'use strict';function r(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var o=e("./../utils");t.exports=function(e,t,n){if(!t)return e;var i;if(n)i=n(t);else if(o.isURLSearchParams(t))i=t.toString();else{var a=[];o.forEach(t,function(e,t){null===e||"undefined"==typeof e||(o.isArray(e)?t+="[]":e=[e],o.forEach(e,function(e){o.isDate(e)?e=e.toISOString():o.isObject(e)&&(e=JSON.stringify(e)),a.push(r(t)+"="+r(e))}))}),i=a.join("&")}if(i){var s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}},{"./../utils":34}],22:[function(e,t){'use strict';t.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},{}],23:[function(e,t){'use strict';var r=e("./../utils");t.exports=r.isStandardBrowserEnv()?function(){return{write:function(e,t,o,n,i,a){var s=[];s.push(e+"="+encodeURIComponent(t)),r.isNumber(o)&&s.push("expires="+new Date(o).toGMTString()),r.isString(n)&&s.push("path="+n),r.isString(i)&&s.push("domain="+i),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},{"./../utils":34}],24:[function(e,t){'use strict';t.exports=function(e){return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}},{}],25:[function(e,t){'use strict';var r=e("./../utils");t.exports=function(e){return r.isObject(e)&&!0===e.isAxiosError}},{"./../utils":34}],26:[function(e,t){'use strict';var r=e("./../utils");t.exports=r.isStandardBrowserEnv()?function(){function e(e){var r=e;return t&&(o.setAttribute("href",r),r=o.href),o.setAttribute("href",r),{href:o.href,protocol:o.protocol?o.protocol.replace(/:$/,""):"",host:o.host,search:o.search?o.search.replace(/^\?/,""):"",hash:o.hash?o.hash.replace(/^#/,""):"",hostname:o.hostname,port:o.port,pathname:"/"===o.pathname.charAt(0)?o.pathname:"/"+o.pathname}}var t=/(msie|trident)/i.test(navigator.userAgent),o=document.createElement("a"),n;return n=e(window.location.href),function(t){var o=r.isString(t)?e(t):t;return o.protocol===n.protocol&&o.host===n.host}}():function(){return function(){return!0}}()},{"./../utils":34}],27:[function(e,t){'use strict';var r=e("../utils");t.exports=function(e,t){r.forEach(e,function(r,o){o!==t&&o.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[o])})}},{"../utils":34}],28:[function(e,t){t.exports=null},{}],29:[function(e,t){'use strict';var r=e("./../utils"),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(e){var t={},n,a,s;return e?(r.forEach(e.split("\n"),function(e){if(s=e.indexOf(":"),n=r.trim(e.substr(0,s)).toLowerCase(),a=r.trim(e.substr(s+1)),n){if(t[n]&&0<=o.indexOf(n))return;t[n]="set-cookie"===n?(t[n]?t[n]:[]).concat([a]):t[n]?t[n]+", "+a:a}}),t):t}},{"./../utils":34}],30:[function(e,t){'use strict';t.exports=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}},{}],31:[function(e,t){'use strict';t.exports=function(e){return function(t){return e.apply(null,t)}}},{}],32:[function(e,t){(function(r){(function(){'use strict';var o=e("../utils");t.exports=function(e,t){function n(e){return null===e?"":o.isDate(e)?e.toISOString():o.isArrayBuffer(e)||o.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):r.from(e):e}function i(e,r){if(o.isPlainObject(e)||o.isArray(e)){if(-1!==a.indexOf(e))throw Error("Circular reference detected in "+r);a.push(e),o.forEach(e,function(e,a){if(!o.isUndefined(e)){var s=r?r+"."+a:a,l;if(e&&!r&&"object"==typeof e)if(o.endsWith(a,"{}"))e=JSON.stringify(e);else if(o.endsWith(a,"[]")&&(l=o.toArray(e)))return void l.forEach(function(e){o.isUndefined(e)||t.append(s,n(e))});i(e,s)}}),a.pop()}else t.append(r,n(e))}t=t||new FormData;var a=[];return i(e),t}}).call(this)}).call(this,e("buffer").Buffer)},{"../utils":34,buffer:40}],33:[function(e,t){'use strict';var r=e("../env/data").version,o=e("../core/AxiosError"),n={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){n[e]=function(r){return typeof r===e||"a"+(1>t?"n ":" ")+e}});var i={};n.transitional=function(e,t,n){function a(e,t){return"[Axios v"+r+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return function(r,n,s){if(!1===e)throw new o(a(n," has been removed"+(t?" in "+t:"")),o.ERR_DEPRECATED);return t&&!i[n]&&(i[n]=!0,console.warn(a(n," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,n,s)}},t.exports={assertOptions:function(e,t,r){if("object"!=typeof e)throw new o("options must be an object",o.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(e),a=n.length;0<a--;){var s=n[a],l=t[s];if(l){var d=e[s],p=d===void 0||l(d,s,e);if(!0!==p)throw new o("option "+s+" must be "+p,o.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new o("Unknown option "+s,o.ERR_BAD_OPTION)}},validators:n}},{"../core/AxiosError":10,"../env/data":19}],34:[function(e,t){'use strict';function r(e){return e=e.toLowerCase(),function(t){return f(t)===e}}function o(e){return Array.isArray(e)}function n(e){return"undefined"==typeof e}function i(e){return null!==e&&"object"==typeof e}function a(e){if("object"!==f(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function s(e){return"[object Function]"===u.call(e)}function d(e,t){if(null!==e&&"undefined"!=typeof e)if("object"!=typeof e&&(e=[e]),o(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.call(null,e[a],a,e)}function p(){function e(e,r){t[r]=a(t[r])&&a(e)?p(t[r],e):a(e)?p({},e):o(e)?e.slice():e}for(var t={},r=0,n=arguments.length;r<n;r++)d(arguments[r],e);return t}var c=e("./helpers/bind"),u=Object.prototype.toString,f=function(e){return function(t){var r=u.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())}}(Object.create(null)),h=r("ArrayBuffer"),g=r("Date"),m=r("File"),b=r("Blob"),y=r("FileList"),_=r("URLSearchParams"),k=function(e){return function(t){return e&&t instanceof e}}("undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array));t.exports={isArray:o,isArrayBuffer:h,isBuffer:function(e){return null!==e&&!n(e)&&null!==e.constructor&&!n(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return e&&("function"==typeof FormData&&e instanceof FormData||u.call(e)==="[object FormData]"||s(e.toString)&&e.toString()==="[object FormData]")},isArrayBufferView:function(e){var t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&h(e.buffer),t},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:i,isPlainObject:a,isUndefined:n,isDate:g,isFile:m,isBlob:b,isFunction:s,isStream:function(e){return i(e)&&s(e.pipe)},isURLSearchParams:_,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:d,merge:p,extend:function(e,t,r){return d(t,function(t,o){e[o]=r&&"function"==typeof t?c(t,r):t}),e},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,r,o){e.prototype=Object.create(t.prototype,o),e.prototype.constructor=e,r&&Object.assign(e.prototype,r)},toFlatObject:function(e,t,r){var o={},n,a,s;t=t||{};do{for(n=Object.getOwnPropertyNames(e),a=n.length;0<a--;)s=n[a],o[s]||(t[s]=e[s],o[s]=!0);e=Object.getPrototypeOf(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:f,kindOfTest:r,endsWith:function(e,t,r){e=e+"",(r===void 0||r>e.length)&&(r=e.length),r-=t.length;var o=e.indexOf(t,r);return-1!==o&&o===r},toArray:function(e){if(!e)return null;var t=e.length;if(n(t))return null;for(var r=Array(t);0<t--;)r[t]=e[t];return r},isTypedArray:k,isFileList:y}},{"./helpers/bind":20}],35:[function(e,t,r){'use strict';function o(e){var t=e.length;if(0<t%4)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var o=r===t?0:4-r%4;return[r,o]}function n(e,t,r){return 3*(t+r)/4-r}function a(e){var t=o(e),r=t[0],a=t[1],s=new u(n(e,r,a)),l=0,d=0<a?r-4:r,p,f;for(f=0;f<d;f+=4)p=c[e.charCodeAt(f)]<<18|c[e.charCodeAt(f+1)]<<12|c[e.charCodeAt(f+2)]<<6|c[e.charCodeAt(f+3)],s[l++]=255&p>>16,s[l++]=255&p>>8,s[l++]=255&p;return 2===a&&(p=c[e.charCodeAt(f)]<<2|c[e.charCodeAt(f+1)]>>4,s[l++]=255&p),1===a&&(p=c[e.charCodeAt(f)]<<10|c[e.charCodeAt(f+1)]<<4|c[e.charCodeAt(f+2)]>>2,s[l++]=255&p>>8,s[l++]=255&p),s}function s(e){return p[63&e>>18]+p[63&e>>12]+p[63&e>>6]+p[63&e]}function l(e,t,r){for(var o=[],n=t,a;n<r;n+=3)a=(16711680&e[n]<<16)+(65280&e[n+1]<<8)+(255&e[n+2]),o.push(s(a));return o.join("")}function d(e){for(var t=e.length,r=t%3,o=[],n=16383,a=0,s=t-r,d;a<s;a+=n)o.push(l(e,a,a+n>s?s:a+n));return 1===r?(d=e[t-1],o.push(p[d>>2]+p[63&d<<4]+"==")):2===r&&(d=(e[t-2]<<8)+e[t-1],o.push(p[d>>10]+p[63&d>>4]+p[63&d<<2]+"=")),o.join("")}r.byteLength=function(e){var t=o(e),r=t[0],n=t[1];return 3*(r+n)/4-n},r.toByteArray=a,r.fromByteArray=d;for(var p=[],c=[],u="undefined"==typeof Uint8Array?Array:Uint8Array,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,g=f.length;h<g;++h)p[h]=f[h],c[f.charCodeAt(h)]=h;c[45]=62,c[95]=63},{}],36:[function(e,t){'use strict';function r(e){return this instanceof r?void r._init.call(this,e):new r(e)}const{Buffer:o}=e("buffer"),n=Symbol.for("BufferList");r._init=function(e){Object.defineProperty(this,n,{value:!0}),this._bufs=[],this.length=0,e&&this.append(e)},r.prototype._new=function(e){return new r(e)},r.prototype._offset=function(e){if(0===e)return[0,0];let t=0;for(let r=0;r<this._bufs.length;r++){const o=t+this._bufs[r].length;if(e<o||r===this._bufs.length-1)return[r,e-t];t=o}},r.prototype._reverseOffset=function(e){const t=e[0];let r=e[1];for(let o=0;o<t;o++)r+=this._bufs[o].length;return r},r.prototype.get=function(e){if(!(e>this.length||0>e)){const t=this._offset(e);return this._bufs[t[0]][t[1]]}},r.prototype.slice=function(e,t){return"number"==typeof e&&0>e&&(e+=this.length),"number"==typeof t&&0>t&&(t+=this.length),this.copy(null,0,e,t)},r.prototype.copy=function e(t,r,n,i){if(("number"!=typeof n||0>n)&&(n=0),("number"!=typeof i||i>this.length)&&(i=this.length),n>=this.length)return t||o.alloc(0);if(0>=i)return t||o.alloc(0);const e=!!t,a=this._offset(n),s=i-n;let d=s,p=e&&r||0,c=a[1];if(0===n&&i===this.length){if(!e)return 1===this._bufs.length?this._bufs[0]:o.concat(this._bufs,this.length);for(let e=0;e<this._bufs.length;e++)this._bufs[e].copy(t,p),p+=this._bufs[e].length;return t}if(d<=this._bufs[a[0]].length-c)return e?this._bufs[a[0]].copy(t,r,c,c+d):this._bufs[a[0]].slice(c,c+d);e||(t=o.allocUnsafe(s));for(let e=a[0];e<this._bufs.length;e++){const r=this._bufs[e].length-c;if(d>r)this._bufs[e].copy(t,p,c),p+=r;else{this._bufs[e].copy(t,p,c,c+d),p+=r;break}d-=r,c&&(c=0)}return t.length>p?t.slice(0,p):t},r.prototype.shallowSlice=function(e,t){if(e=e||0,t="number"==typeof t?t:this.length,0>e&&(e+=this.length),0>t&&(t+=this.length),e===t)return this._new();const r=this._offset(e),o=this._offset(t),n=this._bufs.slice(r[0],o[0]+1);return 0===o[1]?n.pop():n[n.length-1]=n[n.length-1].slice(0,o[1]),0!==r[1]&&(n[0]=n[0].slice(r[1])),this._new(n)},r.prototype.toString=function(e,t,r){return this.slice(t,r).toString(e)},r.prototype.consume=function(e){if(e=Math.trunc(e),Number.isNaN(e)||0>=e)return this;for(;this._bufs.length;)if(e>=this._bufs[0].length)e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift();else{this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}return this},r.prototype.duplicate=function(){const e=this._new();for(let t=0;t<this._bufs.length;t++)e.append(this._bufs[t]);return e},r.prototype.append=function(e){if(null==e)return this;if(e.buffer)this._appendBuffer(o.from(e.buffer,e.byteOffset,e.byteLength));else if(Array.isArray(e))for(let t=0;t<e.length;t++)this.append(e[t]);else if(this._isBufferList(e))for(let t=0;t<e._bufs.length;t++)this.append(e._bufs[t]);else"number"==typeof e&&(e=e.toString()),this._appendBuffer(o.from(e));return this},r.prototype._appendBuffer=function(e){this._bufs.push(e),this.length+=e.length},r.prototype.indexOf=function(e,t,r){if(r===void 0&&"string"==typeof t&&(r=t,t=void 0),"function"==typeof e||Array.isArray(e))throw new TypeError("The \"value\" argument must be one of type string, Buffer, BufferList, or Uint8Array.");else"number"==typeof e?e=o.from([e]):"string"==typeof e?e=o.from(e,r):this._isBufferList(e)?e=e.slice():Array.isArray(e.buffer)?e=o.from(e.buffer,e.byteOffset,e.byteLength):o.isBuffer(e)||(e=o.from(e));if(t=+(t||0),isNaN(t)&&(t=0),0>t&&(t=this.length+t),0>t&&(t=0),0===e.length)return t>this.length?this.length:t;const n=this._offset(t);let i=n[0],a=n[1];for(;i<this._bufs.length;i++){for(const t=this._bufs[i];a<t.length;){const r=t.length-a;if(r>=e.length){const r=t.indexOf(e,a);if(-1!==r)return this._reverseOffset([i,r]);a=t.length-e.length+1}else{const t=this._reverseOffset([i,a]);if(this._match(t,e))return t;a++}}a=0}return-1},r.prototype._match=function(e,t){if(this.length-e<t.length)return!1;for(let r=0;r<t.length;r++)if(this.get(e+r)!==t[r])return!1;return!0},function(){const e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1,readIntBE:null,readIntLE:null,readUIntBE:null,readUIntLE:null};for(const t in e)(function(t){r.prototype[t]=null===e[t]?function(e,r){return this.slice(e,e+r)[t](0,r)}:function(r=0){return this.slice(r,r+e[t])[t](0)}})(t)}(),r.prototype._isBufferList=function(e){return e instanceof r||r.isBufferList(e)},r.isBufferList=function(e){return null!=e&&e[n]},t.exports=r},{buffer:40}],37:[function(e,t){'use strict';function r(e){if(!(this instanceof r))return new r(e);if("function"==typeof e){this._callback=e;const t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)}),e=null}i._init.call(this,e),o.call(this)}const o=e("readable-stream").Duplex,n=e("inherits"),i=e("./BufferList");n(r,o),Object.assign(r.prototype,i.prototype),r.prototype._new=function(e){return new r(e)},r.prototype._write=function(e,t,r){this._appendBuffer(e),"function"==typeof r&&r()},r.prototype._read=function(e){return this.length?void(e=Math.min(e,this.length),this.push(this.slice(0,e)),this.consume(e)):this.push(null)},r.prototype.end=function(e){o.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},r.prototype._destroy=function(e,t){this._bufs.length=0,this.length=0,t(e)},r.prototype._isBufferList=function(e){return e instanceof r||e instanceof i||r.isBufferList(e)},r.isBufferList=i.isBufferList,t.exports=r,t.exports.BufferListStream=r,t.exports.BufferList=i},{"./BufferList":36,inherits:47,"readable-stream":103}],38:[function(){},{}],39:[function(t,r,o){(function(t){(function(){(function(n){function a(e){throw new RangeError(k[e])}function s(e,t){for(var r=e.length,o=[];r--;)o[r]=t(e[r]);return o}function l(e,t){var r=e.split("@"),o="";1<r.length&&(o=r[0]+"@",e=r[1]),e=e.replace(_,".");var n=e.split("."),i=s(n,t).join(".");return o+i}function d(e){for(var t=[],r=0,o=e.length,n,i;r<o;)n=e.charCodeAt(r++),55296<=n&&56319>=n&&r<o?(i=e.charCodeAt(r++),56320==(64512&i)?t.push(((1023&n)<<10)+(1023&i)+65536):(t.push(n),r--)):t.push(n);return t}function p(e){return s(e,function(e){var t="";return 65535<e&&(e-=65536,t+=S(55296|1023&e>>>10),e=56320|1023&e),t+=S(e),t}).join("")}function c(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:36}function u(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function f(e,t,r){var o=0;for(e=r?C(e/700):e>>1,e+=C(e/t);455<e;o+=36)e=C(e/35);return C(o+36*e/(e+38))}function h(e){var r=[],o=e.length,s=0,l=128,d=72,u,h,g,m,b,y,_,S,v,E;for(h=e.lastIndexOf("-"),0>h&&(h=0),g=0;g<h;++g)128<=e.charCodeAt(g)&&a("not-basic"),r.push(e.charCodeAt(g));for(m=0<h?h+1:0;m<o;){for(b=s,y=1,_=36;;_+=36){if(m>=o&&a("invalid-input"),S=c(e.charCodeAt(m++)),(36<=S||S>C((2147483647-s)/y))&&a("overflow"),s+=S*y,v=_<=d?1:_>=d+26?26:_-d,S<v)break;E=36-v,y>C(2147483647/E)&&a("overflow"),y*=E}u=r.length+1,d=f(s-b,u,0==b),C(s/u)>2147483647-l&&a("overflow"),l+=C(s/u),s%=u,r.splice(s++,0,l)}return p(r)}function g(e){var r=[],o,i,s,l,p,c,h,g,b,y,_,v,E,w,T;for(e=d(e),v=e.length,o=128,i=0,p=72,c=0;c<v;++c)_=e[c],128>_&&r.push(S(_));for(s=l=r.length,l&&r.push("-");s<v;){for(h=2147483647,c=0;c<v;++c)_=e[c],_>=o&&_<h&&(h=_);for(E=s+1,h-o>C((2147483647-i)/E)&&a("overflow"),i+=(h-o)*E,o=h,c=0;c<v;++c)if(_=e[c],_<o&&2147483647<++i&&a("overflow"),_==o){for(g=i,b=36;;b+=36){if(y=b<=p?1:b>=p+26?26:b-p,g<y)break;T=g-y,w=36-y,r.push(S(u(y+T%w,0))),g=C(T/w)}r.push(S(u(g,0))),p=f(i,E,s==l),i=0,++s}++i,++o}return r.join("")}var m="object"==typeof o&&o&&!o.nodeType&&o,b="object"==typeof r&&r&&!r.nodeType&&r,y="object"==typeof t&&t;(y.global===y||y.window===y||y.self===y)&&(n=y);var _=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=Math.floor,S=String.fromCharCode,v,E;if(v={version:"1.4.1",ucs2:{decode:d,encode:p},decode:h,encode:g,toASCII:function(e){return l(e,function(e){return /[^\x20-\x7E]/.test(e)?"xn--"+g(e):e})},toUnicode:function(e){return l(e,function(e){return /^xn--/.test(e)?h(e.slice(4).toLowerCase()):e})}},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return v});else if(!(m&&b))n.punycode=v;else if(r.exports==m)b.exports=v;else for(E in v)v.hasOwnProperty(E)&&(m[E]=v[E])})(this)}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],40:[function(e,t,r){(function(){(function(){'use strict';function t(e){if(2147483647<e)throw new RangeError("The value \""+e+"\" is invalid for option \"size\"");var t=new Uint8Array(e);return t.__proto__=o.prototype,t}function o(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError("The \"string\" argument must be of type string. Received type number");return s(e)}return n(e,t,r)}function n(e,t,r){if("string"==typeof e)return l(e,t);if(ArrayBuffer.isView(e))return d(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(H(e,ArrayBuffer)||e&&H(e.buffer,ArrayBuffer))return p(e,t,r);if("number"==typeof e)throw new TypeError("The \"value\" argument must not be of type number. Received type number");var n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return o.from(n,t,r);var i=c(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return o.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function i(e){if("number"!=typeof e)throw new TypeError("\"size\" argument must be of type number");else if(0>e)throw new RangeError("The value \""+e+"\" is invalid for option \"size\"")}function a(e,r,o){return i(e),0>=e?t(e):void 0===r?t(e):"string"==typeof o?t(e).fill(r,o):t(e).fill(r)}function s(e){return i(e),t(0>e?0:0|u(e))}function l(e,r){if(("string"!=typeof r||""===r)&&(r="utf8"),!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r);var n=0|f(e,r),i=t(n),a=i.write(e,r);return a!==n&&(i=i.slice(0,a)),i}function d(e){for(var r=0>e.length?0:0|u(e.length),o=t(r),n=0;n<r;n+=1)o[n]=255&e[n];return o}function p(e,t,r){if(0>t||e.byteLength<t)throw new RangeError("\"offset\" is outside of buffer bounds");if(e.byteLength<t+(r||0))throw new RangeError("\"length\" is outside of buffer bounds");var n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),n.__proto__=o.prototype,n}function c(e){if(o.isBuffer(e)){var r=0|u(e.length),n=t(r);return 0===n.length?n:(e.copy(n,0,0,r),n)}return void 0===e.length?"Buffer"===e.type&&Array.isArray(e.data)?d(e.data):void 0:"number"!=typeof e.length||V(e.length)?t(0):d(e)}function u(e){if(e>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647 .toString(16)+" bytes");return 0|e}function f(e,t){if(o.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||H(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError("The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. Received type "+typeof e);var r=e.length,n=2<arguments.length&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(e).length;default:if(i)return n?-1:q(e).length;t=(""+t).toLowerCase(),i=!0;}}function h(e,t,r){var o=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),0>=r)return"";if(r>>>=0,t>>>=0,r<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return A(this,t,r);case"utf8":case"utf-8":return w(this,t,r);case"ascii":return x(this,t,r);case"latin1":case"binary":return I(this,t,r);case"base64":return E(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(o)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),o=!0;}}function g(e,t,r){var o=e[t];e[t]=e[r],e[r]=o}function m(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):2147483647<r?r=2147483647:-2147483648>r&&(r=-2147483648),r=+r,V(r)&&(r=i?0:e.length-1),0>r&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(0>r)if(i)r=0;else return-1;if("string"==typeof t&&(t=o.from(t,n)),o.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,o,n){function a(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,l=e.length,d=t.length;if(void 0!==o&&(o=(o+"").toLowerCase(),"ucs2"===o||"ucs-2"===o||"utf16le"===o||"utf-16le"===o)){if(2>e.length||2>t.length)return-1;s=2,l/=2,d/=2,r/=2}var p;if(n){var c=-1;for(p=r;p<l;p++)if(a(e,p)!==a(t,-1===c?0:p-c))-1!==c&&(p-=p-c),c=-1;else if(-1===c&&(c=p),p-c+1===d)return c*s}else for(r+d>l&&(r=l-d),p=r;0<=p;p--){for(var u=!0,f=0;f<d;f++)if(a(e,p+f)!==a(t,f)){u=!1;break}if(u)return p}return-1}function y(e,t,r,o){r=+r||0;var n=e.length-r;o?(o=+o,o>n&&(o=n)):o=n;var a=t.length;o>a/2&&(o=a/2);for(var s=0,l;s<o;++s){if(l=parseInt(t.substr(2*s,2),16),V(l))return s;e[r+s]=l}return s}function _(e,t,r,o){return F(q(t,e.length-r),e,r,o)}function k(e,t,r,o){return F(D(t),e,r,o)}function C(e,t,r,o){return k(e,t,r,o)}function S(e,t,r,o){return F(z(t),e,r,o)}function v(e,t,r,o){return F(j(t,e.length-r),e,r,o)}function E(e,t,r){return 0===t&&r===e.length?W.fromByteArray(e):W.fromByteArray(e.slice(t,r))}function w(e,t,r){r=Math.min(e.length,r);for(var o=[],n=t;n<r;){var a=e[n],s=null,l=239<a?4:223<a?3:191<a?2:1;if(n+l<=r){var d,p,c,u;1===l?128>a&&(s=a):2===l?(d=e[n+1],128==(192&d)&&(u=(31&a)<<6|63&d,127<u&&(s=u))):3===l?(d=e[n+1],p=e[n+2],128==(192&d)&&128==(192&p)&&(u=(15&a)<<12|(63&d)<<6|63&p,2047<u&&(55296>u||57343<u)&&(s=u))):4===l?(d=e[n+1],p=e[n+2],c=e[n+3],128==(192&d)&&128==(192&p)&&128==(192&c)&&(u=(15&a)<<18|(63&d)<<12|(63&p)<<6|63&c,65535<u&&1114112>u&&(s=u))):void 0}null===s?(s=65533,l=1):65535<s&&(s-=65536,o.push(55296|1023&s>>>10),s=56320|1023&s),o.push(s),n+=l}return T(o)}function T(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);for(var r="",o=0;o<t;)r+=String.fromCharCode.apply(String,e.slice(o,o+=4096));return r}function x(e,t,r){var o="";r=Math.min(e.length,r);for(var n=t;n<r;++n)o+=String.fromCharCode(127&e[n]);return o}function I(e,t,r){var o="";r=Math.min(e.length,r);for(var n=t;n<r;++n)o+=String.fromCharCode(e[n]);return o}function A(e,t,r){var o=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>o)&&(r=o);for(var n="",a=t;a<r;++a)n+=U(e[a]);return n}function R(e,t,r){for(var o=e.slice(t,r),n="",a=0;a<o.length;a+=2)n+=String.fromCharCode(o[a]+256*o[a+1]);return n}function L(e,t,r){if(0!=e%1||0>e)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,n,i,a){if(!o.isBuffer(e))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>i||t<a)throw new RangeError("\"value\" argument is out of bounds");if(r+n>e.length)throw new RangeError("Index out of range")}function N(e,t,r,o){if(r+o>e.length)throw new RangeError("Index out of range");if(0>r)throw new RangeError("Index out of range")}function B(e,t,r,o,n){return t=+t,r>>>=0,n||N(e,t,r,4,34028234663852886e22,-34028234663852886e22),K.write(e,t,r,o,23,4),r+4}function O(e,t,r,o,n){return t=+t,r>>>=0,n||N(e,t,r,8,17976931348623157e292,-17976931348623157e292),K.write(e,t,r,o,52,8),r+8}function M(e){if(e=e.split("=")[0],e=e.trim().replace(G,""),2>e.length)return"";for(;0!=e.length%4;)e+="=";return e}function U(e){return 16>e?"0"+e.toString(16):e.toString(16)}function q(e,t){t=t||1/0;for(var r=e.length,o=null,n=[],a=0,s;a<r;++a){if(s=e.charCodeAt(a),55295<s&&57344>s){if(!o){if(56319<s){-1<(t-=3)&&n.push(239,191,189);continue}else if(a+1===r){-1<(t-=3)&&n.push(239,191,189);continue}o=s;continue}if(56320>s){-1<(t-=3)&&n.push(239,191,189),o=s;continue}s=(o-55296<<10|s-56320)+65536}else o&&-1<(t-=3)&&n.push(239,191,189);if(o=null,128>s){if(0>(t-=1))break;n.push(s)}else if(2048>s){if(0>(t-=2))break;n.push(192|s>>6,128|63&s)}else if(65536>s){if(0>(t-=3))break;n.push(224|s>>12,128|63&s>>6,128|63&s)}else if(1114112>s){if(0>(t-=4))break;n.push(240|s>>18,128|63&s>>12,128|63&s>>6,128|63&s)}else throw new Error("Invalid code point")}return n}function D(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function j(e,t){for(var r=[],o=0,n,a,s;o<e.length&&!(0>(t-=2));++o)n=e.charCodeAt(o),a=n>>8,s=n%256,r.push(s),r.push(a);return r}function z(e){return W.toByteArray(M(e))}function F(e,t,r,o){for(var n=0;n<o&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}function H(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function V(e){return e!==e}var W=e("base64-js"),K=e("ieee754");r.Buffer=o,r.SlowBuffer=function(e){return+e!=e&&(e=0),o.alloc(+e)},r.INSPECT_MAX_BYTES=50;r.kMaxLength=2147483647,o.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){return o.isBuffer(this)?this.buffer:void 0}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){return o.isBuffer(this)?this.byteOffset:void 0}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),o.poolSize=8192,o.from=function(e,t,r){return n(e,t,r)},o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,o.alloc=function(e,t,r){return a(e,t,r)},o.allocUnsafe=function(e){return s(e)},o.allocUnsafeSlow=function(e){return s(e)},o.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==o.prototype},o.compare=function(e,t){if(H(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),H(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array");if(e===t)return 0;for(var r=e.length,n=t.length,s=0,l=Math.min(r,n);s<l;++s)if(e[s]!==t[s]){r=e[s],n=t[s];break}return r<n?-1:n<r?1:0},o.isEncoding=function(e){switch((e+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},o.concat=function(e,t){if(!Array.isArray(e))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===e.length)return o.alloc(0);var r;if(t===void 0)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=o.allocUnsafe(t),a=0;for(r=0;r<e.length;++r){var s=e[r];if(H(s,Uint8Array)&&(s=o.from(s)),!o.isBuffer(s))throw new TypeError("\"list\" argument must be an Array of Buffers");s.copy(n,a),a+=s.length}return n},o.byteLength=f,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(0!=e%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(0!=e%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(0!=e%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},o.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?w(this,0,e):h.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",t=r.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},o.prototype.compare=function(e,t,r,n,a){if(H(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(e))throw new TypeError("The \"target\" argument must be one of type Buffer or Uint8Array. Received type "+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===a&&(a=this.length),0>t||r>e.length||0>n||a>this.length)throw new RangeError("out of range index");if(n>=a&&t>=r)return 0;if(n>=a)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,a>>>=0,this===e)return 0;for(var s=a-n,l=r-t,d=Math.min(s,l),p=this.slice(n,a),c=e.slice(t,r),u=0;u<d;++u)if(p[u]!==c[u]){s=p[u],l=c[u];break}return s<l?-1:l<s?1:0},o.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},o.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},o.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)},o.prototype.write=function(e,t,r,o){if(void 0===t)o="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)o=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===o&&(o="utf8")):(o=r,r=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var n=this.length-t;if((void 0===r||r>n)&&(r=n),0<e.length&&(0>r||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");for(var i=!1;;)switch(o){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":return k(this,e,t,r);case"latin1":case"binary":return C(this,e,t,r);case"base64":return S(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,t,r);default:if(i)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),i=!0;}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};o.prototype.slice=function(e,t){var r=this.length;e=~~e,t=t===void 0?r:~~t,0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return n.__proto__=o.prototype,n},o.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var o=this[e],n=1,a=0;++a<t&&(n*=256);)o+=this[e+a]*n;return o},o.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var o=this[e+--t],n=1;0<t&&(n*=256);)o+=this[e+--t]*n;return o},o.prototype.readUInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return e>>>=0,t||L(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var o=this[e],n=1,a=0;++a<t&&(n*=256);)o+=this[e+a]*n;return n*=128,o>=n&&(o-=Math.pow(2,8*t)),o},o.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||L(e,t,this.length);for(var o=t,n=1,a=this[e+--o];0<o&&(n*=256);)a+=this[e+--o]*n;return n*=128,a>=n&&(a-=Math.pow(2,8*t)),a},o.prototype.readInt8=function(e,t){return e>>>=0,t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt16BE=function(e,t){e>>>=0,t||L(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},o.prototype.readInt32LE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return e>>>=0,t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return e>>>=0,t||L(e,4,this.length),K.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return e>>>=0,t||L(e,4,this.length),K.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return e>>>=0,t||L(e,8,this.length),K.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return e>>>=0,t||L(e,8,this.length),K.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,r,o){if(e=+e,t>>>=0,r>>>=0,!o){var n=Math.pow(2,8*r)-1;P(this,e,t,r,n,0)}var a=1,s=0;for(this[t]=255&e;++s<r&&(a*=256);)this[t+s]=255&e/a;return t+r},o.prototype.writeUIntBE=function(e,t,r,o){if(e=+e,t>>>=0,r>>>=0,!o){var n=Math.pow(2,8*r)-1;P(this,e,t,r,n,0)}var a=r-1,s=1;for(this[t+a]=255&e;0<=--a&&(s*=256);)this[t+a]=255&e/s;return t+r},o.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,255,0),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},o.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeIntLE=function(e,t,r,o){if(e=+e,t>>>=0,!o){var n=Math.pow(2,8*r-1);P(this,e,t,r,n-1,-n)}var a=0,s=1,l=0;for(this[t]=255&e;++a<r&&(s*=256);)0>e&&0===l&&0!==this[t+a-1]&&(l=1),this[t+a]=255&(e/s>>0)-l;return t+r},o.prototype.writeIntBE=function(e,t,r,o){if(e=+e,t>>>=0,!o){var n=Math.pow(2,8*r-1);P(this,e,t,r,n-1,-n)}var a=r-1,s=1,l=0;for(this[t+a]=255&e;0<=--a&&(s*=256);)0>e&&0===l&&0!==this[t+a+1]&&(l=1),this[t+a]=255&(e/s>>0)-l;return t+r},o.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,1,127,-128),0>e&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},o.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},o.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},o.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||P(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},o.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},o.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},o.prototype.writeDoubleLE=function(e,t,r){return O(this,e,t,!0,r)},o.prototype.writeDoubleBE=function(e,t,r){return O(this,e,t,!1,r)},o.prototype.copy=function(e,t,r,n){if(!o.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),0<n&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>r||r>=this.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var a=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var s=a-1;0<=s;--s)e[s+t]=this[s+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return a},o.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!o.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){var a=e.charCodeAt(0);("utf8"===n&&128>a||"latin1"===n)&&(e=a)}}else"number"==typeof e&&(e&=255);if(0>t||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;t>>>=0,r=r===void 0?this.length:r>>>0,e||(e=0);var s;if("number"==typeof e)for(s=t;s<r;++s)this[s]=e;else{var l=o.isBuffer(e)?e:o.from(e,n),d=l.length;if(0===d)throw new TypeError("The value \""+e+"\" is invalid for argument \"value\"");for(s=0;s<r-t;++s)this[s+t]=l[s%d]}return this};var G=/[^+/0-9A-Za-z-_]/g}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":35,buffer:40,ieee754:46}],41:[function(e,t,r){(function(o){(function(){function n(){let e;try{e=r.storage.getItem("debug")}catch(e){}return!e&&"undefined"!=typeof o&&"env"in o&&(e=o.env.DEBUG),e}r.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let o=0,n=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"===e||(o++,"%c"===e&&(n=o))}),e.splice(n,0,r)},r.save=function(e){try{e?r.storage.setItem("debug",e):r.storage.removeItem("debug")}catch(e){}},r.load=n,r.useColors=function(){return!!("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},r.storage=function(){try{return localStorage}catch(e){}}(),r.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),r.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],r.log=console.debug||console.log||(()=>{}),t.exports=e("./common")(r);const{formatters:i}=t.exports;i.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}).call(this)}).call(this,e("_process"))},{"./common":42,_process:85}],42:[function(e,t){t.exports=function(t){function r(e){function t(...e){if(!t.enabled)return;const o=t,n=+new Date,a=n-(i||n);o.diff=a,o.prev=i,o.curr=n,i=n,e[0]=r.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let s=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(t,n)=>{if("%%"===t)return"%";s++;const i=r.formatters[n];if("function"==typeof i){const r=e[s];t=i.call(o,r),e.splice(s,1),s--}return t}),r.formatArgs.call(o,e);const l=o.log||r.log;l.apply(o,e)}let n=null,i,a,s;return t.namespace=e,t.useColors=r.useColors(),t.color=r.selectColor(e),t.extend=o,t.destroy=r.destroy,Object.defineProperty(t,"enabled",{enumerable:!0,configurable:!1,get:()=>null===n?(a!==r.namespaces&&(a=r.namespaces,s=r.enabled(e)),s):n,set:e=>{n=e}}),"function"==typeof r.init&&r.init(t),t}function o(e,t){const o=r(this.namespace+("undefined"==typeof t?":":t)+e);return o.log=this.log,o}function n(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return r.debug=r,r.default=r,r.coerce=function(e){return e instanceof Error?e.stack||e.message:e},r.disable=function(){const e=[...r.names.map(n),...r.skips.map(n).map(e=>"-"+e)].join(",");return r.enable(""),e},r.enable=function(e){r.save(e),r.namespaces=e,r.names=[],r.skips=[];let t;const o=("string"==typeof e?e:"").split(/[\s,]+/),n=o.length;for(t=0;t<n;t++)o[t]&&(e=o[t].replace(/\*/g,".*?"),"-"===e[0]?r.skips.push(new RegExp("^"+e.slice(1)+"$")):r.names.push(new RegExp("^"+e+"$")))},r.enabled=function(e){if("*"===e[e.length-1])return!0;let t,o;for(t=0,o=r.skips.length;t<o;t++)if(r.skips[t].test(e))return!1;for(t=0,o=r.names.length;t<o;t++)if(r.names[t].test(e))return!0;return!1},r.humanize=e("ms"),r.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach(e=>{r[e]=t[e]}),r.names=[],r.skips=[],r.formatters={},r.selectColor=function(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return r.colors[Math.abs(t)%r.colors.length]},r.enable(r.load()),r}},{ms:80}],43:[function(e,t){(function(r,o){(function(){var n=e("readable-stream"),i=e("end-of-stream"),a=e("inherits"),s=e("stream-shift"),l=o.from&&o.from!==Uint8Array.from?o.from([0]):new o([0]),d=function(e,t){e._corked?e.once("uncork",t):t()},p=function(e,t){e._autoDestroy&&e.destroy(t)},c=function(e,t){return function(r){r?p(e,"premature close"===r.message?null:r):t&&!e._ended&&e.end()}},u=function(e,t){return e?e._writableState&&e._writableState.finished?t():e._writableState?e.end(t):void(e.end(),t()):t()},f=function(){},h=function(e){return new n.Readable({objectMode:!0,highWaterMark:16}).wrap(e)},g=function(e,t,r){return this instanceof g?void(n.Duplex.call(this,r),this._writable=null,this._readable=null,this._readable2=null,this._autoDestroy=!r||!1!==r.autoDestroy,this._forwardDestroy=!r||!1!==r.destroy,this._forwardEnd=!r||!1!==r.end,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),t&&this.setReadable(t)):new g(e,t,r)};a(g,n.Duplex),g.obj=function(e,t,r){return r||(r={}),r.objectMode=!0,r.highWaterMark=16,new g(e,t,r)},g.prototype.cork=function(){1==++this._corked&&this.emit("cork")},g.prototype.uncork=function(){this._corked&&0==--this._corked&&this.emit("uncork")},g.prototype.setWritable=function(e){if(this._unwrite&&this._unwrite(),this.destroyed)return void(e&&e.destroy&&e.destroy());if(null===e||!1===e)return void this.end();var t=this,o=i(e,{writable:!0,readable:!1},c(this,this._forwardEnd)),n=function(){var e=t._ondrain;t._ondrain=null,e&&e()};this._unwrite&&r.nextTick(n),this._writable=e,this._writable.on("drain",n),this._unwrite=function(){t._writable.removeListener("drain",n),o()},this.uncork()},g.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)return void(e&&e.destroy&&e.destroy());if(null===e||!1===e)return this.push(null),void this.resume();var t=this,r=i(e,{writable:!1,readable:!0},c(this)),o=function(){t._forward()},n=function(){t.push(null)};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:h(e),this._readable2.on("readable",o),this._readable2.on("end",n),this._unread=function(){t._readable2.removeListener("readable",o),t._readable2.removeListener("end",n),r()},this._forward()},g.prototype._read=function(){this._drained=!0,this._forward()},g.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){this._forwarding=!0;for(var e;this._drained&&null!==(e=s(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},g.prototype.destroy=function(e,t){if(t||(t=f),this.destroyed)return t(null);this.destroyed=!0;var o=this;r.nextTick(function(){o._destroy(e),t(null)})},g.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null,t?t(e):this.emit("error",e)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},g.prototype._write=function(e,t,r){return this.destroyed?void 0:this._corked?d(this,this._write.bind(this,e,t,r)):e===l?this._finish(r):this._writable?void(!1===this._writable.write(e)?this._ondrain=r:!this.destroyed&&r()):r()},g.prototype._finish=function(e){var t=this;this.emit("preend"),d(this,function(){u(t._forwardEnd&&t._writable,function(){!1===t._writableState.prefinished&&(t._writableState.prefinished=!0),t.emit("prefinish"),d(t,e)})})},g.prototype.end=function(e,t,r){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this._writableState.destroyed||this.write(l),n.Writable.prototype.end.call(this,r))},t.exports=g}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{_process:85,buffer:40,"end-of-stream":44,inherits:47,"readable-stream":103,"stream-shift":108}],44:[function(e,t){(function(r){(function(){var o=e("once"),n=function(){},i=function(e){return e.setHeader&&"function"==typeof e.abort},a=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},s=function(e,t,l){if("function"==typeof t)return s(e,null,t);t||(t={}),l=o(l||n);var d=e._writableState,p=e._readableState,c=t.readable||!1!==t.readable&&e.readable,u=t.writable||!1!==t.writable&&e.writable,f=!1,h=function(){e.writable||g()},g=function(){u=!1,c||l.call(e)},m=function(){c=!1,u||l.call(e)},b=function(t){l.call(e,t?new Error("exited with error code: "+t):null)},y=function(t){l.call(e,t)},_=function(){r.nextTick(k)},k=function(){return f?void 0:c&&!(p&&p.ended&&!p.destroyed)?l.call(e,new Error("premature close")):u&&!(d&&d.ended&&!d.destroyed)?l.call(e,new Error("premature close")):void 0},C=function(){e.req.on("finish",g)};return i(e)?(e.on("complete",g),e.on("abort",_),e.req?C():e.on("request",C)):u&&!d&&(e.on("end",h),e.on("close",h)),a(e)&&e.on("exit",b),e.on("end",m),e.on("finish",g),!1!==t.error&&e.on("error",y),e.on("close",_),function(){f=!0,e.removeListener("complete",g),e.removeListener("abort",_),e.removeListener("request",C),e.req&&e.req.removeListener("finish",g),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",g),e.removeListener("exit",b),e.removeListener("end",m),e.removeListener("error",y),e.removeListener("close",_)}};t.exports=s}).call(this)}).call(this,e("_process"))},{_process:85,once:83}],45:[function(e,t){'use strict';function r(e){console&&console.warn&&console.warn(e)}function o(){o.init.call(this)}function n(e){if("function"!=typeof e)throw new TypeError("The \"listener\" argument must be of type Function. Received type "+typeof e)}function i(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function a(e,t,o,a){var s,l,d;if(n(o),l=e._events,void 0===l?(l=e._events=Object.create(null),e._eventsCount=0):(void 0!==l.newListener&&(e.emit("newListener",t,o.listener?o.listener:o),l=e._events),d=l[t]),void 0===d)d=l[t]=o,++e._eventsCount;else if("function"==typeof d?d=l[t]=a?[o,d]:[d,o]:a?d.unshift(o):d.push(o),s=i(e),0<s&&d.length>s&&!d.warned){d.warned=!0;var p=new Error("Possible EventEmitter memory leak detected. "+d.length+" "+(t+" listeners added. Use emitter.setMaxListeners() to increase limit"));p.name="MaxListenersExceededWarning",p.emitter=e,p.type=t,p.count=d.length,r(p)}return e}function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,r){var o={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=s.bind(o);return n.listener=r,o.wrapFn=n,n}function d(e,t,r){var o=e._events;if(o===void 0)return[];var n=o[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?f(n):c(n,n.length)}function p(e){var t=this._events;if(t!==void 0){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function c(e,t){for(var r=Array(t),o=0;o<t;++o)r[o]=e[o];return r}function u(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function f(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function h(e,t,r){"function"==typeof e.on&&g(e,"error",t,r)}function g(e,t,r,o){if("function"==typeof e.on)o.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function n(i){o.once&&e.removeEventListener(t,n),r(i)});else throw new TypeError("The \"emitter\" argument must be of type EventEmitter. Received type "+typeof e)}var m="object"==typeof Reflect?Reflect:null,b=m&&"function"==typeof m.apply?m.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)},y;y=m&&"function"==typeof m.ownKeys?m.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var _=Number.isNaN||function(e){return e!==e};t.exports=o,t.exports.once=function(e,t){return new Promise(function(r,o){function n(r){e.removeListener(t,i),o(r)}function i(){"function"==typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}g(e,t,i,{once:!0}),"error"!==t&&h(e,n,{once:!0})})},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var k=10;Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return k},set:function(e){if("number"!=typeof e||0>e||_(e))throw new RangeError("The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received "+e+".");k=e}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||0>e||_(e))throw new RangeError("The value of \"n\" is out of range. It must be a non-negative number. Received "+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return i(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,n=this._events;if(n!==void 0)o=o&&n.error===void 0;else if(!o)return!1;if(o){var a;if(0<t.length&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var l=n[e];if(l===void 0)return!1;if("function"==typeof l)b(l,this,t);else for(var d=l.length,p=c(l,d),r=0;r<d;++r)b(p[r],this,t);return!0},o.prototype.addListener=function(e,t){return a(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return a(this,e,t,!0)},o.prototype.once=function(e,t){return n(t),this.on(e,l(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return n(t),this.prependListener(e,l(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,o,a,s,l;if(n(t),o=this._events,void 0===o)return this;if(r=o[e],void 0===r)return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete o[e],o.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(a=-1,s=r.length-1;0<=s;s--)if(r[s]===t||r[s].listener===t){l=r[s].listener,a=s;break}if(0>a)return this;0===a?r.shift():u(r,a),1===r.length&&(o[e]=r[0]),void 0!==o.removeListener&&this.emit("removeListener",e,l||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,o;if(r=this._events,void 0===r)return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n=Object.keys(r),a;for(o=0;o<n.length;++o)a=n[o],"removeListener"!==a&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(t=r[e],"function"==typeof t)this.removeListener(e,t);else if(void 0!==t)for(o=t.length-1;0<=o;o--)this.removeListener(e,t[o]);return this},o.prototype.listeners=function(e){return d(this,e,!0)},o.prototype.rawListeners=function(e){return d(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return 0<this._eventsCount?y(this._events):[]}},{}],46:[function(e,t,r){r.read=function(t,r,o,n,a){var l=8*a-n-1,p=(1<<l)-1,c=p>>1,u=-7,f=o?a-1:0,h=o?-1:1,d=t[r+f],g,b;for(f+=h,g=d&(1<<-u)-1,d>>=-u,u+=l;0<u;g=256*g+t[r+f],f+=h,u-=8);for(b=g&(1<<-u)-1,g>>=-u,u+=n;0<u;b=256*b+t[r+f],f+=h,u-=8);if(0===g)g=1-c;else{if(g===p)return b?NaN:(d?-1:1)*(1/0);b+=Math.pow(2,n),g-=c}return(d?-1:1)*b*Math.pow(2,g-n)},r.write=function(t,r,o,n,a,l){var p=8*l-a-1,u=(1<<p)-1,f=u>>1,h=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,g=n?0:l-1,b=n?1:-1,d=0>r||0===r&&0>1/r?1:0,s,y,_;for(r=Math.abs(r),isNaN(r)||r===1/0?(y=isNaN(r)?1:0,s=u):(s=Math.floor(Math.log(r)/Math.LN2),1>r*(_=Math.pow(2,-s))&&(s--,_*=2),r+=1<=s+f?h/_:h*Math.pow(2,1-f),2<=r*_&&(s++,_/=2),s+f>=u?(y=0,s=u):1<=s+f?(y=(r*_-1)*Math.pow(2,a),s+=f):(y=r*Math.pow(2,f-1)*Math.pow(2,a),s=0));8<=a;t[o+g]=255&y,g+=b,y/=256,a-=8);for(s=s<<a|y,p+=a;0<p;t[o+g]=255&s,g+=b,s/=256,p-=8);t[o+g-b]|=128*d}},{}],47:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},{}],48:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function e(e,t){this.color=!0,this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0,this.leftChild=void 0,this.rightChild=void 0,this.key=e,this.value=t}return e.prototype.rotateLeft=function(){var e=this.parent,t=this.brother,r=this.leftChild,o=this.rightChild;if(!o)throw new Error("unknown error");var n=o.leftChild,i=o.rightChild;return e&&(e.leftChild===this?e.leftChild=o:e.rightChild===this&&(e.rightChild=o)),o.parent=e,o.brother=t,o.leftChild=this,o.rightChild=i,t&&(t.brother=o),this.parent=o,this.brother=i,this.leftChild=r,this.rightChild=n,i&&(i.parent=o,i.brother=this),r&&(r.parent=this,r.brother=n),n&&(n.parent=this,n.brother=r),o},e.prototype.rotateRight=function(){var e=this.parent,t=this.brother,r=this.leftChild;if(!r)throw new Error("unknown error");var o=this.rightChild,n=r.leftChild,i=r.rightChild;return e&&(e.leftChild===this?e.leftChild=r:e.rightChild===this&&(e.rightChild=r)),r.parent=e,r.brother=t,r.leftChild=n,r.rightChild=this,t&&(t.brother=r),n&&(n.parent=r,n.brother=this),this.parent=r,this.brother=n,this.leftChild=i,this.rightChild=o,i&&(i.parent=this,i.brother=o),o&&(o.parent=this,o.brother=i),r},e.prototype.remove=function(){if(this.leftChild||this.rightChild)throw new Error("can only remove leaf node");this.parent&&(this===this.parent.leftChild?this.parent.leftChild=void 0:this===this.parent.rightChild&&(this.parent.rightChild=void 0)),this.brother&&(this.brother.brother=void 0),this.key=void 0,this.value=void 0,this.parent=void 0,this.brother=void 0},e.TreeNodeColorType={red:!0,black:!1},e}();Object.freeze(o),r.default=o},{}],49:[function(e,t,r){"use strict";function o(e){var t=this;void 0===e&&(e=[]);var r=[],a=0,s=0,l=0,d=0,p=0,c=0;this.size=function(){return c},this.empty=function(){return 0===c},this.clear=function(){a=l=s=d=p=c=0,f.call(this,o.bucketSize),c=0},this.front=function(){return r[a][s]},this.back=function(){return r[l][d]},this.forEach=function(e){if(!this.empty()){var t=0;if(a===l){for(var n=s;n<=d;++n)e(r[a][n],t++);return}for(var n=s;n<o.bucketSize;++n)e(r[a][n],t++);for(var n=a+1;n<l;++n)for(var p=0;p<o.bucketSize;++p)e(r[n][p],t++);for(var n=0;n<=d;++n)e(r[l][n],t++)}};var u=function(e){var t=a*o.bucketSize+s,r=t+e,n=l*o.bucketSize+d;if(r<t||r>n)throw new Error("pos should more than 0 and less than queue's size");var i=Math.floor(r/o.bucketSize),p=r%o.bucketSize;return{curNodeBucketIndex:i,curNodePointerIndex:p}};this.getElementByPos=function(e){var t=u(e),o=t.curNodeBucketIndex,n=t.curNodePointerIndex;return r[o][n]},this.eraseElementByPos=function(e){var t=this;if(0>e||e>c)throw new Error("pos should more than 0 and less than queue's size");if(0===e)this.popFront();else if(e===this.size())this.popBack();else{for(var r=[],o=e+1;o<c;++o)r.push(this.getElementByPos(o));this.cut(e),this.popBack(),r.forEach(function(e){return t.pushBack(e)})}},this.eraseElementByValue=function(e){if(!this.empty()){var t=[];this.forEach(function(r){r!==e&&t.push(r)});for(var r=t.length,o=0;o<r;++o)this.setElementByPos(o,t[o]);this.cut(r-1)}};var f=function(e){for(var t=[],n=e*o.sigma,u=Math.max(Math.ceil(n/o.bucketSize),2),f=0;f<u;++f)t.push(Array(o.bucketSize));var h=Math.ceil(e/o.bucketSize),g=Math.floor(u/2)-Math.floor(h/2),m=g,b=0;if(this.size())for(var f=0;f<h;++f){for(var y=0;y<o.bucketSize;++y)if(t[g+f][y]=this.front(),this.popFront(),this.empty()){m=g+f,b=y;break}if(this.empty())break}r=t,a=g,s=0,l=m,d=b,p=u,c=e};this.pushBack=function(e){this.empty()||(l===p-1&&d===o.bucketSize-1&&f.call(this,this.size()),d<o.bucketSize-1?++d:l<p-1&&(++l,d=0)),++c,r[l][d]=e},this.popBack=function(){this.empty()||(1!==this.size()&&(0<d?--d:a<l&&(--l,d=o.bucketSize-1)),0<c&&--c)},this.setElementByPos=function(e,t){var o=u(e),n=o.curNodeBucketIndex,i=o.curNodePointerIndex;r[n][i]=t},this.insert=function(e,t,r){var o=this;if(void 0===r&&(r=1),0===e)for(;r--;)this.pushFront(t);else if(e===this.size())for(;r--;)this.pushBack(t);else{for(var n=[],a=e;a<c;++a)n.push(this.getElementByPos(a));this.cut(e-1);for(var a=0;a<r;++a)this.pushBack(t);n.forEach(function(e){return o.pushBack(e)})}},this.find=function(e){if(a===l){for(var t=s;t<=d;++t)if(r[a][t]===e)return!0;return!1}for(var t=s;t<o.bucketSize;++t)if(r[a][t]===e)return!0;for(var t=a+1;t<l;++t)for(var n=0;n<o.bucketSize;++n)if(r[t][n]===e)return!0;for(var t=0;t<=d;++t)if(r[l][t]===e)return!0;return!1},this.reverse=function(){for(var e=0,t=c-1;e<t;){var o=this.getElementByPos(e);this.setElementByPos(e,this.getElementByPos(t)),this.setElementByPos(t,o),++e,--t}},this.unique=function(){if(!this.empty()){var e=[],t=this.front();this.forEach(function(r,o){(0===o||r!==t)&&(e.push(r),t=r)});for(var r=0;r<c;++r)this.setElementByPos(r,e[r]);this.cut(e.length-1)}},this.sort=function(e){var t=[];this.forEach(function(e){t.push(e)}),t.sort(e);for(var r=0;r<c;++r)this.setElementByPos(r,t[r])},this.pushFront=function(e){this.empty()||(0===a&&0===s&&f.call(this,this.size()),0<s?--s:0<a&&(--a,s=o.bucketSize-1)),++c,r[a][s]=e},this.popFront=function(){this.empty()||(1!==this.size()&&(s<o.bucketSize-1?++s:a<l&&(++a,s=0)),0<c&&--c)},this.shrinkToFit=function(){var e=this,t=[];this.forEach(function(e){t.push(e)});var n=t.length;r=[];for(var a=Math.ceil(n/o.bucketSize),s=0;s<a;++s)r.push(Array(o.bucketSize));this.clear(),t.forEach(function(t){return e.pushBack(t)})},this.cut=function(e){if(0>e)return void this.clear();var t=u(e),r=t.curNodeBucketIndex,o=t.curNodePointerIndex;l=r,d=o,c=e+1},this[Symbol.iterator]=function(){return function(){var e,e,e,t,e;return n(this,function(n){switch(n.label){case 0:if(0===c)return[2];if(a!==l)return[3,5];e=s,n.label=1;case 1:return e<=d?[4,r[a][e]]:[3,4];case 2:n.sent(),n.label=3;case 3:return++e,[3,1];case 4:return[2];case 5:e=s,n.label=6;case 6:return e<o.bucketSize?[4,r[a][e]]:[3,9];case 7:n.sent(),n.label=8;case 8:return++e,[3,6];case 9:e=a+1,n.label=10;case 10:if(!(e<l))return[3,15];t=0,n.label=11;case 11:return t<o.bucketSize?[4,r[e][t]]:[3,14];case 12:n.sent(),n.label=13;case 13:return++t,[3,11];case 14:return++e,[3,10];case 15:e=0,n.label=16;case 16:return e<=d?[4,r[l][e]]:[3,19];case 17:n.sent(),n.label=18;case 18:return++e,[3,16];case 19:return[2];}})}()},function(){var n=o.bucketSize;e.size?n=e.size():e.length&&(n=e.length);var s=n*o.sigma;p=Math.ceil(s/o.bucketSize),p=Math.max(p,3);for(var d=0;d<p;++d)r.push(Array(o.bucketSize));var c=Math.ceil(n/o.bucketSize);a=Math.floor(p/2)-Math.floor(c/2),l=a,e.forEach(function(e){return t.pushBack(e)})}(),Object.freeze(this)}var n=this&&this.__generator||function(e,r){function o(e){return function(t){return i([e,t])}}function i(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(l=2&t[0]?s["return"]:t[0]?s["throw"]||((l=s["return"])&&l.call(s),0):s.next)&&!(l=l.call(s,t[1])).done)return l;switch((s=0,l)&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,s=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if((l=a.trys,!(l=0<l.length&&l[l.length-1]))&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue;}t=r.call(e,a)}catch(r){t=[6,r],s=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},n,s,l,d;return d={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(r,"__esModule",{value:!0}),o.sigma=3,o.bucketSize=5e3,Object.freeze(o),r.default=o},{}],50:[function(e,t,r){"use strict";function o(e,t,r){var l=this;if(void 0===e&&(e=[]),void 0===t&&(t=o.initSize),r=r||function(e){var t=0,r="",o,n;if("number"==typeof e)t=Math.floor(e),t=(t<<5)-t,t&=t;else{r="string"==typeof e?e:JSON.stringify(e);try{for(var a=i(r),s=a.next();!s.done;s=a.next()){var l=s.value,d=l.charCodeAt(0);t=(t<<5)-t+d,t&=t}}catch(e){o={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}}return t^=t>>>16,t},0!=(t&t-1))throw new Error("initBucketNum must be 2 to the power of n");var d=0,p=[],c=Math.max(o.initSize,Math.min(o.maxSize,t));this.size=function(){return d},this.empty=function(){return 0===d},this.clear=function(){d=0,c=t,p=[]},this.forEach=function(e){var t=0;p.forEach(function(r){r.forEach(function(r){e(r,t++)})})};var u=function(e){if(!(e>=o.maxSize)){c=2*e;var t=[];p.forEach(function(n,i){if(!n.empty()){if(n instanceof a.default&&1===n.size()){var l=n.front(),d=l.key,u=l.value;t[r(d)&c-1]=new a.default([{key:d,value:u}])}else if(n instanceof s.default){var f=new a.default,h=new a.default;n.forEach(function(t){var o=r(t.key);0==(o&e)?f.pushBack(t):h.pushBack(t)}),f.size()>o.untreeifyThreshold?t[i]=new s.default(f):f.size()&&(t[i]=f),h.size()>o.untreeifyThreshold?t[i+e]=new s.default(h):h.size()&&(t[i+e]=h)}else{var g=new a.default,m=new a.default;n.forEach(function(t){var o=r(t.key);0==(o&e)?g.pushBack(t):m.pushBack(t)}),g.size()&&(t[i]=g),m.size()&&(t[i+e]=m)}p[i].clear()}}),p=t}};this.setElement=function(e,t){var n,l;if(null===e||void 0===e)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null===t||void 0===t)return void this.eraseElementByKey(e);var f=r(e)&c-1;if(!p[f])++d,p[f]=new a.default([{key:e,value:t}]);else{var h=p[f].size();if(p[f]instanceof a.default){try{for(var g=i(p[f]),m=g.next(),b;!m.done;m=g.next())if(b=m.value,b.key===e)return void(b.value=t)}catch(e){n={error:e}}finally{try{m&&!m.done&&(l=g.return)&&l.call(g)}finally{if(n)throw n.error}}p[f].pushBack({key:e,value:t}),p[f].size()>=o.treeifyThreshold&&(p[f]=new s.default(p[f]))}else p[f].setElement(e,t);var y=p[f].size();d+=y-h}d>c*o.sigma&&u.call(this,c)},this.getElementByKey=function(e){var t=r(e)&c-1,o,n;if(p[t]){if(p[t]instanceof s.default)return p[t].getElementByKey(e);try{for(var a=i(p[t]),l=a.next(),d;!l.done;l=a.next())if(d=l.value,d.key===e)return d.value}catch(e){o={error:e}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}}},this.eraseElementByKey=function(e){var t=r(e)&c-1,n,l;if(p[t]){var u=p[t].size();if(p[t]instanceof s.default)p[t].eraseElementByKey(e),p[t].size()<=o.untreeifyThreshold&&(p[t]=new a.default(p[t]));else{var f=-1;try{for(var h=i(p[t]),g=h.next(),m;!g.done;g=h.next())if(m=g.value,++f,m.key===e){p[t].eraseElementByPos(f);break}}catch(e){n={error:e}}finally{try{g&&!g.done&&(l=h.return)&&l.call(h)}finally{if(n)throw n.error}}}var b=p[t].size();d+=b-u}},this.find=function(e){var t=r(e)&c-1,o,n;if(!p[t])return!1;if(p[t]instanceof s.default)return p[t].find(e);try{for(var a=i(p[t]),l=a.next(),d;!l.done;l=a.next())if(d=l.value,d.key===e)return!0}catch(e){o={error:e}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return!1},this[Symbol.iterator]=function(){return function(){var e,t,r,o,a,s,l;return n(this,function(n){switch(n.label){case 0:e=0,n.label=1;case 1:if(!(e<c))return[3,10];for(;e<c&&!p[e];)++e;if(e>=c)return[3,10];n.label=2;case 2:n.trys.push([2,7,8,9]),t=(s=void 0,i(p[e])),r=t.next(),n.label=3;case 3:return r.done?[3,6]:(o=r.value,[4,o]);case 4:n.sent(),n.label=5;case 5:return r=t.next(),[3,3];case 6:return[3,9];case 7:return a=n.sent(),s={error:a},[3,9];case 8:try{r&&!r.done&&(l=t.return)&&l.call(t)}finally{if(s)throw s.error}return[7];case 9:return++e,[3,1];case 10:return[2];}})}()},e.forEach(function(e){var t=e.key,r=e.value;return l.setElement(t,r)}),Object.freeze(this)}var n=this&&this.__generator||function(e,r){function o(e){return function(t){return i([e,t])}}function i(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(l=2&t[0]?s["return"]:t[0]?s["throw"]||((l=s["return"])&&l.call(s),0):s.next)&&!(l=l.call(s,t[1])).done)return l;switch((s=0,l)&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,s=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if((l=a.trys,!(l=0<l.length&&l[l.length-1]))&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue;}t=r.call(e,a)}catch(r){t=[6,r],s=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},n,s,l,d;return d={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../LinkList/LinkList"),s=e("../Map/Map");o.initSize=16,o.maxSize=1073741824,o.sigma=.75,o.treeifyThreshold=8,o.untreeifyThreshold=6,o.minTreeifySize=64,Object.freeze(o),r.default=o},{"../LinkList/LinkList":52,"../Map/Map":53}],51:[function(e,t,r){"use strict";function o(e,t,r){var l=this;if(void 0===e&&(e=[]),void 0===t&&(t=o.initSize),r=r||function(e){var t=0,r="";if("number"==typeof e)t=Math.floor(e),t=(t<<5)-t,t&=t;else{r="string"==typeof e?e:JSON.stringify(e);for(var o=0,n;o<r.length;o++)n=r.charCodeAt(o),t=(t<<5)-t+n,t&=t}return t^=t>>>16,t},0!=(t&t-1))throw new Error("initBucketNum must be 2 to the power of n");var d=0,p=[],c=Math.max(o.initSize,Math.min(o.maxSize,t));this.size=function(){return d},this.empty=function(){return 0===d},this.clear=function(){d=0,c=t,p=[]},this.forEach=function(e){var t=0;p.forEach(function(r){r.forEach(function(r){e(r,t++)})})};var u=function(e){if(!(e>=o.maxSize)){c=2*e;var t=[];p.forEach(function(n,i){if(!n.empty()){if(n instanceof s.default&&1===n.size()){var l=n.front();if(void 0===l)throw new Error("unknown error");t[r(l)&c-1]=new s.default([l])}else if(n instanceof a.default){var d=new s.default,u=new s.default;n.forEach(function(t){var o=r(t);0==(o&e)?d.pushBack(t):u.pushBack(t)}),d.size()>o.untreeifyThreshold?t[i]=new a.default(d):d.size()&&(t[i]=d),u.size()>o.untreeifyThreshold?t[i+e]=new a.default(u):u.size()&&(t[i+e]=u)}else{var f=new s.default,h=new s.default;n.forEach(function(t){var o=r(t);0==(o&e)?f.pushBack(t):h.pushBack(t)}),f.size()&&(t[i]=f),h.size()&&(t[i+e]=h)}p[i].clear()}}),p=t}};this.insert=function(e){if(null===e||void 0===e)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");var t=r(e)&c-1;if(!p[t])p[t]=new s.default([e]),++d;else{var n=p[t].size();if(p[t]instanceof s.default){if(p[t].find(e))return;p[t].pushBack(e),p[t].size()>=o.treeifyThreshold&&(p[t]=new a.default(p[t]))}else p[t].insert(e);var i=p[t].size();d+=i-n}d>c*o.sigma&&u.call(this,c)},this.eraseElementByValue=function(e){var t=r(e)&c-1;if(p[t]){var n=p[t].size();p[t].eraseElementByValue(e),p[t]instanceof a.default&&p[t].size()<=o.untreeifyThreshold&&(p[t]=new s.default(p[t]));var i=p[t].size();d+=i-n}},this.find=function(e){var t=r(e)&c-1;return!!p[t]&&p[t].find(e)},this[Symbol.iterator]=function(){return function(){var e,t,r,o,a,s,l;return n(this,function(n){switch(n.label){case 0:e=0,n.label=1;case 1:if(!(e<c))return[3,10];for(;e<c&&!p[e];)++e;if(e>=c)return[3,10];n.label=2;case 2:n.trys.push([2,7,8,9]),t=(s=void 0,i(p[e])),r=t.next(),n.label=3;case 3:return r.done?[3,6]:(o=r.value,[4,o]);case 4:n.sent(),n.label=5;case 5:return r=t.next(),[3,3];case 6:return[3,9];case 7:return a=n.sent(),s={error:a},[3,9];case 8:try{r&&!r.done&&(l=t.return)&&l.call(t)}finally{if(s)throw s.error}return[7];case 9:return++e,[3,1];case 10:return[2];}})}()},e.forEach(function(e){return l.insert(e)}),Object.freeze(this)}var n=this&&this.__generator||function(e,r){function o(e){return function(t){return i([e,t])}}function i(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(l=2&t[0]?s["return"]:t[0]?s["throw"]||((l=s["return"])&&l.call(s),0):s.next)&&!(l=l.call(s,t[1])).done)return l;switch((s=0,l)&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,s=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if((l=a.trys,!(l=0<l.length&&l[l.length-1]))&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue;}t=r.call(e,a)}catch(r){t=[6,r],s=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},n,s,l,d;return d={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../Set/Set"),s=e("../LinkList/LinkList");o.initSize=16,o.maxSize=1073741824,o.sigma=.75,o.treeifyThreshold=8,o.untreeifyThreshold=6,o.minTreeifySize=64,Object.freeze(o),r.default=o},{"../LinkList/LinkList":52,"../Set/Set":56}],52:[function(e,t,r){"use strict";function o(e){var t=this;void 0===e&&(e=[]);var r=0,o=void 0,a=void 0;this.size=function(){return r},this.empty=function(){return 0===r},this.clear=function(){o=a=void 0,r=0},this.front=function(){return null===o||void 0===o?void 0:o.value},this.back=function(){return null===a||void 0===a?void 0:a.value},this.forEach=function(e){for(var t=o,r=0;t;){if(t.value===void 0)throw new Error("unknown error");e(t.value,r++),t=t.next}},this.getElementByPos=function(e){if(0>e||e>=r)throw new Error("pos must more then 0 and less then the list length");for(var t=o;e--&&!!t;)t=t.next;if(!t||t.value===void 0)throw new Error("unknown error");return t.value},this.eraseElementByPos=function(e){if(0>e||e>=r)throw new Error("erase pos must more then 0 and less then the list length");if(0===e)this.popFront();else if(e===r-1)this.popBack();else{for(var t=o;e--;){if(null===t||void 0===t||!t.next)throw new Error("unknown error");t=t.next}if(!t||!t.pre||!t.next)throw new Error("unknown error");var n=t.pre,i=t.next;i.pre=n,n.next=i,0<r&&--r}},this.eraseElementByValue=function(e){for(;o&&o.value===e;)this.popFront();for(;a&&a.value===e;)this.popBack();if(o)for(var t=o;t;){if(t.value===e){var n=t.pre,i=t.next;i&&(i.pre=n),n&&(n.next=i),0<r&&--r}t=t.next}},this.pushBack=function(e){if(null===e||e===void 0)throw new Error("you can't push null or undefined here");++r;var t=new i(e);a?(a.next=t,t.pre=a,a=t):o=a=t},this.popBack=function(){a&&(0<r&&--r,a&&(o===a?o=a=void 0:(a=a.pre,a&&(a.next=void 0))))},this.setElementByPos=function(e,t){if(null===t||t===void 0)throw new Error("you can't set null or undefined here");if(0>e||e>=r)throw new Error("pos must more then 0 and less then the list length");for(var n=o;e--;){if(!n)throw new Error("unknown error");n=n.next}n&&(n.value=t)},this.insert=function(e,t,n){if(void 0===n&&(n=1),null===t||void 0===t)throw new Error("you can't insert null or undefined here");if(0>e||e>r)throw new Error("insert pos must more then 0 and less then or equal to the list length");if(0>n)throw new Error("insert size must more than 0");if(0===e)for(;n--;)this.pushFront(t);else if(e===r)for(;n--;)this.pushBack(t);else{for(var a=o,s=1;s<e;++s){if(null===a||void 0===a||!a.next)throw new Error("unknown error");a=null===a||void 0===a?void 0:a.next}if(!a)throw new Error("unknown error");var l=a.next;for(r+=n;n--;)a.next=new i(t),a.next.pre=a,a=a.next;a.next=l,l&&(l.pre=a)}},this.find=function(e){for(var t=o;t;){if(t.value===e)return!0;t=t.next}return!1},this.reverse=function(){for(var e=o,t=a,n=0;e&&t&&2*n<r;){var i=e.value;e.value=t.value,t.value=i,e=e.next,t=t.pre,++n}},this.unique=function(){for(var e=o;e;){for(var t=e;t&&t.next&&t.value===t.next.value;)t=t.next,0<r&&--r;e.next=t.next,e.next&&(e.next.pre=e),e=e.next}},this.sort=function(e){var t=[];this.forEach(function(e){t.push(e)}),t.sort(e);var r=o;t.forEach(function(e){r&&(r.value=e,r=r.next)})},this.pushFront=function(e){if(null===e||e===void 0)throw new Error("you can't push null or undefined here");++r;var t=new i(e);o?(t.next=o,o.pre=t,o=t):o=a=t},this.popFront=function(){o&&(0<r&&--r,o&&(o===a?o=a=void 0:(o=o.next,o&&(o.pre=void 0))))},this.merge=function(e){var t=this,n=o;e.forEach(function(e){for(;n&&n.value!==void 0&&n.value<=e;)n=n.next;if(n===void 0)t.pushBack(e),n=a;else if(n===o)t.pushFront(e),n=o;else{++r;var s=n.pre;s&&(s.next=new i(e),s.next.pre=s,s.next.next=n,n&&(n.pre=s.next))}})},this[Symbol.iterator]=function(){return function(){var e;return n(this,function(t){switch(t.label){case 0:e=o,t.label=1;case 1:if(void 0===e)return[3,3];if(!e.value)throw new Error("unknown error");return[4,e.value];case 2:return t.sent(),e=e.next,[3,1];case 3:return[2];}})}()},e.forEach(function(e){return t.pushBack(e)}),Object.freeze(this)}var n=this&&this.__generator||function(e,r){function o(e){return function(t){return i([e,t])}}function i(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(l=2&t[0]?s["return"]:t[0]?s["throw"]||((l=s["return"])&&l.call(s),0):s.next)&&!(l=l.call(s,t[1])).done)return l;switch((s=0,l)&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,s=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if((l=a.trys,!(l=0<l.length&&l[l.length-1]))&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue;}t=r.call(e,a)}catch(r){t=[6,r],s=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},n,s,l,d;return d={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d};Object.defineProperty(r,"__esModule",{value:!0});var i=function(){return function(e){this.value=void 0,this.pre=void 0,this.next=void 0,this.value=e}}();Object.freeze(o),r.default=o},{}],53:[function(e,t,r){"use strict";function o(e,t){var r=this;void 0===e&&(e=[]),t=t||function(e,t){return e<t?-1:e>t?1:0};var o=0,s=new a.default;s.color=a.default.TreeNodeColorType.black,this.size=function(){return o},this.empty=function(){return 0===o},this.clear=function(){o=0,s.key=s.value=void 0,s.leftChild=s.rightChild=s.brother=void 0};var l=function(e){if(!e||e.key===void 0)throw new Error("unknown error");return e.leftChild?l(e.leftChild):e},d=function(e){if(!e||e.key===void 0)throw new Error("unknown error");return e.rightChild?d(e.rightChild):e};this.front=function(){if(!this.empty()){var e=l(s);if(void 0===e.key||void 0===e.value)throw new Error("unknown error");return{key:e.key,value:e.value}}},this.back=function(){if(!this.empty()){var e=d(s);if(void 0===e.key||void 0===e.value)throw new Error("unknown error");return{key:e.key,value:e.value}}},this.forEach=function(e){var t=0,r,o;try{for(var n=i(this),a=n.next(),s;!a.done;a=n.next())s=a.value,e(s,t++)}catch(e){r={error:e}}finally{try{a&&!a.done&&(o=n.return)&&o.call(n)}finally{if(r)throw r.error}}},this.getElementByPos=function(e){var t,r;if(0>e||e>=this.size())throw new Error("pos must more than 0 and less than set's size");var o=0;try{for(var n=i(this),a=n.next(),s;!a.done;a=n.next()){if(s=a.value,o===e)return s;++o}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}throw new Error("unknown Error")};var p=function(e,r){if(e&&void 0!==e.key&&void 0!==e.value){var o=t(e.key,r);return 0===o?{key:e.key,value:e.value}:0>o?p(e.rightChild,r):p(e.leftChild,r)||{key:e.key,value:e.value}}};this.lowerBound=function(e){return p(s,e)};var c=function(e,r){if(e&&void 0!==e.key&&void 0!==e.value){var o=t(e.key,r);return 0>=o?c(e.rightChild,r):c(e.leftChild,r)||{key:e.key,value:e.value}}};this.upperBound=function(e){return c(s,e)};var u=function(e,r){if(e&&void 0!==e.key&&void 0!==e.value){var o=t(e.key,r);return 0===o?{key:e.key,value:e.value}:0<o?u(e.leftChild,r):u(e.rightChild,r)||{key:e.key,value:e.value}}};this.reverseLowerBound=function(e){return u(s,e)};var f=function(e,r){if(e&&void 0!==e.key&&void 0!==e.value){var o=t(e.key,r);return 0<=o?f(e.leftChild,r):f(e.rightChild,r)||{key:e.key,value:e.value}}};this.reverseUpperBound=function(e){return f(s,e)};var h=function(e){var t=e.parent;if(!t){if(e===s)return;throw new Error("unknown error")}if(e.color===a.default.TreeNodeColorType.red)return void(e.color=a.default.TreeNodeColorType.black);var r=e.brother;if(!r)throw new Error("unknown error");if(e===t.leftChild){if(r.color===a.default.TreeNodeColorType.red){r.color=a.default.TreeNodeColorType.black,t.color=a.default.TreeNodeColorType.red;var o=t.rotateLeft();s===t&&(s=o),h(e)}else if(r.color===a.default.TreeNodeColorType.black)if(r.rightChild&&r.rightChild.color===a.default.TreeNodeColorType.red){r.color=t.color,t.color=a.default.TreeNodeColorType.black,r.rightChild&&(r.rightChild.color=a.default.TreeNodeColorType.black);var o=t.rotateLeft();s===t&&(s=o),e.color=a.default.TreeNodeColorType.black}else if((!r.rightChild||r.rightChild.color===a.default.TreeNodeColorType.black)&&r.leftChild&&r.leftChild.color===a.default.TreeNodeColorType.red){r.color=a.default.TreeNodeColorType.red,r.leftChild&&(r.leftChild.color=a.default.TreeNodeColorType.black);var o=r.rotateRight();s===r&&(s=o),h(e)}else r.leftChild&&r.leftChild.color!==a.default.TreeNodeColorType.black||r.rightChild&&r.rightChild.color!==a.default.TreeNodeColorType.black||(r.color=a.default.TreeNodeColorType.red,h(t));}else if(e===t.rightChild)if(r.color===a.default.TreeNodeColorType.red){r.color=a.default.TreeNodeColorType.black,t.color=a.default.TreeNodeColorType.red;var o=t.rotateRight();s===t&&(s=o),h(e)}else if(r.color===a.default.TreeNodeColorType.black)if(r.leftChild&&r.leftChild.color===a.default.TreeNodeColorType.red){r.color=t.color,t.color=a.default.TreeNodeColorType.black,r.leftChild&&(r.leftChild.color=a.default.TreeNodeColorType.black);var o=t.rotateRight();s===t&&(s=o),e.color=a.default.TreeNodeColorType.black}else if((!r.leftChild||r.leftChild.color===a.default.TreeNodeColorType.black)&&r.rightChild&&r.rightChild.color===a.default.TreeNodeColorType.red){r.color=a.default.TreeNodeColorType.red,r.rightChild&&(r.rightChild.color=a.default.TreeNodeColorType.black);var o=r.rotateLeft();s===r&&(s=o),h(e)}else r.leftChild&&r.leftChild.color!==a.default.TreeNodeColorType.black||r.rightChild&&r.rightChild.color!==a.default.TreeNodeColorType.black||(r.color=a.default.TreeNodeColorType.red,h(t))},g=function(e){for(var t=e;t.leftChild||t.rightChild;){if(t.rightChild){t=l(t.rightChild);var r=e.key;e.key=t.key,t.key=r;var n=e.value;e.value=t.value,t.value=n,e=t}if(t.leftChild){t=d(t.leftChild);var r=e.key;e.key=t.key,t.key=r;var n=e.value;e.value=t.value,t.value=n,e=t}}h(t),t&&t.remove(),--o,s.color=a.default.TreeNodeColorType.black},m=function(e,t){if(!e||e.key===void 0)return!1;var r=m(e.leftChild,t);return!!r||!!t(e)||m(e.rightChild,t)};this.eraseElementByPos=function(e){if(0>e||e>=o)throw new Error("pos must more than 0 and less than set's size");var t=0;m(s,function(r){return e===t?(g(r),!0):(++t,!1)})},this.eraseElementByKey=function(e){if(!this.empty()){var r=_(s,e);void 0===r||void 0===r.key||0!==t(r.key,e)||g(r)}};var b=function(e,r){if(!e||e.key===void 0)throw new Error("unknown error");var o=t(r,e.key);if(0>o)return e.leftChild?b(e.leftChild,r):(e.leftChild=new a.default,e.leftChild.parent=e,e.leftChild.brother=e.rightChild,e.rightChild&&(e.rightChild.brother=e.leftChild),e.leftChild);return 0<o?e.rightChild?b(e.rightChild,r):(e.rightChild=new a.default,e.rightChild.parent=e,e.rightChild.brother=e.leftChild,e.leftChild&&(e.leftChild.brother=e.rightChild),e.rightChild):e},y=function(e){var t=e.parent;if(!t){if(e===s)return;throw new Error("unknown error")}if(t.color!==a.default.TreeNodeColorType.black&&t.color===a.default.TreeNodeColorType.red){var r=t.brother,o=t.parent;if(!o)throw new Error("unknown error");if(r&&r.color===a.default.TreeNodeColorType.red)r.color=t.color=a.default.TreeNodeColorType.black,o.color=a.default.TreeNodeColorType.red,y(o);else if(!r||r.color===a.default.TreeNodeColorType.black)if(t===o.leftChild){if(e===t.leftChild){t.color=a.default.TreeNodeColorType.black,o.color=a.default.TreeNodeColorType.red;var n=o.rotateRight();o===s&&(s=n)}else if(e===t.rightChild){var n=t.rotateLeft();o===s&&(s=n),y(t)}}else if(t===o.rightChild)if(e===t.leftChild){var n=t.rotateRight();o===s&&(s=n),y(t)}else if(e===t.rightChild){t.color=a.default.TreeNodeColorType.black,o.color=a.default.TreeNodeColorType.red;var n=o.rotateLeft();o===s&&(s=n)}}};this.setElement=function(e,r){if(null===e||e===void 0)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(null===r||void 0===r)return void this.eraseElementByKey(e);if(this.empty())return++o,s.key=e,s.value=r,void(s.color=a.default.TreeNodeColorType.black);var n=b(s,e);return void 0!==n.key&&0===t(n.key,e)?void(n.value=r):void(++o,n.key=e,n.value=r,y(n),s.color=a.default.TreeNodeColorType.black)};var _=function(e,r){if(e&&void 0!==e.key){var o=t(r,e.key);return 0>o?_(e.leftChild,r):0<o?_(e.rightChild,r):e}};this.find=function(e){return!!_(s,e)},this.getElementByKey=function(e){var t=_(s,e);if((null===t||void 0===t?void 0:t.key)===void 0||(null===t||void 0===t?void 0:t.value)===void 0)throw new Error("unknown error");return t.value},this.union=function(e){var t=this;e.forEach(function(e){var r=e.key,o=e.value;return t.setElement(r,o)})},this.getHeight=function(){if(this.empty())return 0;var e=function(t){return t?Math.max(e(t.leftChild),e(t.rightChild))+1:1};return e(s)};var k=function(e){return n(this,function(t){switch(t.label){case 0:return e&&void 0!==e.key&&void 0!==e.value?[5,i(k(e.leftChild))]:[2];case 1:return t.sent(),[4,{key:e.key,value:e.value}];case 2:return t.sent(),[5,i(k(e.rightChild))];case 3:return t.sent(),[2];}})};this[Symbol.iterator]=function(){return k(s)},e.forEach(function(e){var t=e.key,o=e.value;return r.setElement(t,o)}),Object.freeze(this)}var n=this&&this.__generator||function(e,r){function o(e){return function(t){return i([e,t])}}function i(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(l=2&t[0]?s["return"]:t[0]?s["throw"]||((l=s["return"])&&l.call(s),0):s.next)&&!(l=l.call(s,t[1])).done)return l;switch((s=0,l)&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,s=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if((l=a.trys,!(l=0<l.length&&l[l.length-1]))&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue;}t=r.call(e,a)}catch(r){t=[6,r],s=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},n,s,l,d;return d={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../Base/TreeNode");Object.freeze(o),r.default=o},{"../Base/TreeNode":48}],54:[function(e,t,r){"use strict";function o(e,t){void 0===e&&(e=[]),t=t||function(e,t){return e>t?-1:e<t?1:0};var r=[];e.forEach(function(e){return r.push(e)});var o=r.length,n=function(e,t){if(0>e||e>=o)throw new Error("unknown error");if(0>t||t>=o)throw new Error("unknown error");var n=r[e];r[e]=r[t],r[t]=n},i=function(e){if(0>e||e>=o)throw new Error("unknown error");var i=2*e+1,a=2*e+2;i<o&&0<t(r[e],r[i])&&n(e,i),a<o&&0<t(r[e],r[a])&&n(e,a)};(function(){for(var e=Math.floor((o-1)/2);0<=e;--e)for(var i=e,a=2*i+1;a<o;){var s=a,l=s+1,d=s;if(l<o&&0<t(r[s],r[l])&&(d=l),0>=t(r[i],r[d]))break;n(i,d),i=d,a=2*i+1}})(),this.size=function(){return o},this.empty=function(){return 0===o},this.clear=function(){o=0,r.length=0},this.push=function(e){if(r.push(e),++o,1!==o)for(var n=o-1,a;0<n&&(a=Math.floor((n-1)/2),!(0>=t(r[a],e)));)i(a),n=a},this.pop=function(){if(!this.empty()){if(1===this.size())return void--o;var e=r[o-1];--o;for(var n=0;n<this.size();){var i=2*n+1,a=2*n+2;if(i>=this.size())break;var s=i;if(a<this.size()&&0<t(r[i],r[a])&&(s=a),0<=t(r[s],e))break;r[n]=r[s],n=s}r[n]=e}},this.top=function(){return r[0]},Object.freeze(this)}Object.defineProperty(r,"__esModule",{value:!0}),Object.freeze(o),r.default=o},{}],55:[function(e,t,r){"use strict";function o(e){void 0===e&&(e=[]);var t=new n.default(e);this.size=function(){return t.size()},this.empty=function(){return t.empty()},this.clear=function(){t.clear()},this.push=function(e){t.pushBack(e)},this.pop=function(){t.popFront()},this.front=function(){return t.front()},Object.freeze(this)}Object.defineProperty(r,"__esModule",{value:!0});var n=e("../LinkList/LinkList");Object.freeze(o),r.default=o},{"../LinkList/LinkList":52}],56:[function(e,t,r){"use strict";function o(e,t){var r=this;void 0===e&&(e=[]),t=t||function(e,t){return e<t?-1:e>t?1:0};var o=0,s=new a.default;s.color=a.default.TreeNodeColorType.black,this.size=function(){return o},this.empty=function(){return 0===o},this.clear=function(){o=0,s.key=void 0,s.leftChild=s.rightChild=s.brother=s.parent=void 0,s.color=a.default.TreeNodeColorType.black};var l=function(e){if(!e||e.key===void 0)throw new Error("unknown error");return e.leftChild?l(e.leftChild):e},d=function(e){if(!e||e.key===void 0)throw new Error("unknown error");return e.rightChild?d(e.rightChild):e};this.front=function(){if(!this.empty()){var e=l(s);return e.key}},this.back=function(){if(!this.empty()){var e=d(s);return e.key}},this.forEach=function(e){var t=0,r,o;try{for(var n=i(this),a=n.next(),s;!a.done;a=n.next())s=a.value,e(s,t++)}catch(e){r={error:e}}finally{try{a&&!a.done&&(o=n.return)&&o.call(n)}finally{if(r)throw r.error}}},this.getElementByPos=function(e){var t,r;if(0>e||e>=this.size())throw new Error("pos must more than 0 and less than set's size");var o=0;try{for(var n=i(this),a=n.next(),s;!a.done;a=n.next()){if(s=a.value,o===e)return s;++o}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}throw new Error("unknown error")};var p=function(e){var t=e.parent;if(!t){if(e===s)return;throw new Error("unknown error")}if(e.color===a.default.TreeNodeColorType.red)return void(e.color=a.default.TreeNodeColorType.black);var r=e.brother;if(!r)throw new Error("unknown error");if(e===t.leftChild){if(r.color===a.default.TreeNodeColorType.red){r.color=a.default.TreeNodeColorType.black,t.color=a.default.TreeNodeColorType.red;var o=t.rotateLeft();s===t&&(s=o),p(e)}else if(r.color===a.default.TreeNodeColorType.black)if(r.rightChild&&r.rightChild.color===a.default.TreeNodeColorType.red){r.color=t.color,t.color=a.default.TreeNodeColorType.black,r.rightChild&&(r.rightChild.color=a.default.TreeNodeColorType.black);var o=t.rotateLeft();s===t&&(s=o),e.color=a.default.TreeNodeColorType.black}else if((!r.rightChild||r.rightChild.color===a.default.TreeNodeColorType.black)&&r.leftChild&&r.leftChild.color===a.default.TreeNodeColorType.red){r.color=a.default.TreeNodeColorType.red,r.leftChild&&(r.leftChild.color=a.default.TreeNodeColorType.black);var o=r.rotateRight();s===r&&(s=o),p(e)}else r.leftChild&&r.leftChild.color!==a.default.TreeNodeColorType.black||r.rightChild&&r.rightChild.color!==a.default.TreeNodeColorType.black||(r.color=a.default.TreeNodeColorType.red,p(t));}else if(e===t.rightChild)if(r.color===a.default.TreeNodeColorType.red){r.color=a.default.TreeNodeColorType.black,t.color=a.default.TreeNodeColorType.red;var o=t.rotateRight();s===t&&(s=o),p(e)}else if(r.color===a.default.TreeNodeColorType.black)if(r.leftChild&&r.leftChild.color===a.default.TreeNodeColorType.red){r.color=t.color,t.color=a.default.TreeNodeColorType.black,r.leftChild&&(r.leftChild.color=a.default.TreeNodeColorType.black);var o=t.rotateRight();s===t&&(s=o),e.color=a.default.TreeNodeColorType.black}else if((!r.leftChild||r.leftChild.color===a.default.TreeNodeColorType.black)&&r.rightChild&&r.rightChild.color===a.default.TreeNodeColorType.red){r.color=a.default.TreeNodeColorType.red,r.rightChild&&(r.rightChild.color=a.default.TreeNodeColorType.black);var o=r.rotateLeft();s===r&&(s=o),p(e)}else r.leftChild&&r.leftChild.color!==a.default.TreeNodeColorType.black||r.rightChild&&r.rightChild.color!==a.default.TreeNodeColorType.black||(r.color=a.default.TreeNodeColorType.red,p(t))},c=function(e){for(var t=e;t.leftChild||t.rightChild;){if(t.rightChild){t=l(t.rightChild);var r=e.key;e.key=t.key,t.key=r,e=t}if(t.leftChild){t=d(t.leftChild);var r=e.key;e.key=t.key,t.key=r,e=t}}p(t),t&&t.remove(),--o,s.color=a.default.TreeNodeColorType.black},u=function(e,t){if(!e||e.key===void 0)return!1;var r=u(e.leftChild,t);return!!r||!!t(e)||u(e.rightChild,t)};this.eraseElementByPos=function(e){if(0>e||e>=o)throw new Error("pos must more than 0 and less than set's size");var t=0;u(s,function(r){return e===t?(c(r),!0):(++t,!1)})},this.eraseElementByValue=function(e){if(!this.empty()){var r=g(s,e);void 0===r||void 0===r.key||0!==t(r.key,e)||c(r)}};var f=function(e,r){if(!e||e.key===void 0)throw new Error("unknown error");var o=t(r,e.key);if(0>o)return e.leftChild?f(e.leftChild,r):(e.leftChild=new a.default,e.leftChild.parent=e,e.leftChild.brother=e.rightChild,e.rightChild&&(e.rightChild.brother=e.leftChild),e.leftChild);return 0<o?e.rightChild?f(e.rightChild,r):(e.rightChild=new a.default,e.rightChild.parent=e,e.rightChild.brother=e.leftChild,e.leftChild&&(e.leftChild.brother=e.rightChild),e.rightChild):e},h=function(e){var t=e.parent;if(!t){if(e===s)return;throw new Error("unknown error")}if(t.color!==a.default.TreeNodeColorType.black&&t.color===a.default.TreeNodeColorType.red){var r=t.brother,o=t.parent;if(!o)throw new Error("unknown error");if(r&&r.color===a.default.TreeNodeColorType.red)r.color=t.color=a.default.TreeNodeColorType.black,o.color=a.default.TreeNodeColorType.red,h(o);else if(!r||r.color===a.default.TreeNodeColorType.black)if(t===o.leftChild){if(e===t.leftChild){t.color=a.default.TreeNodeColorType.black,o.color=a.default.TreeNodeColorType.red;var n=o.rotateRight();o===s&&(s=n)}else if(e===t.rightChild){var n=t.rotateLeft();o===s&&(s=n),h(t)}}else if(t===o.rightChild)if(e===t.leftChild){var n=t.rotateRight();o===s&&(s=n),h(t)}else if(e===t.rightChild){t.color=a.default.TreeNodeColorType.black,o.color=a.default.TreeNodeColorType.red;var n=o.rotateLeft();o===s&&(s=n)}}};this.insert=function(e){if(null===e||e===void 0)throw new Error("to avoid some unnecessary errors, we don't suggest you insert null or undefined here");if(this.empty())return++o,s.key=e,void(s.color=a.default.TreeNodeColorType.black);var r=f(s,e);void 0!==r.key&&0===t(r.key,e)||(++o,r.key=e,h(r),s.color=a.default.TreeNodeColorType.black)};var g=function(e,r){if(e&&void 0!==e.key){var o=t(r,e.key);return 0>o?g(e.leftChild,r):0<o?g(e.rightChild,r):e}};this.find=function(e){var r=g(s,e);return r!==void 0&&r.key!==void 0&&0===t(r.key,e)};var m=function(e,r){if(e&&void 0!==e.key){var o=t(e.key,r);if(0===o)return e.key;if(0>o)return m(e.rightChild,r);var n=m(e.leftChild,r);return void 0===n?e.key:n}};this.lowerBound=function(e){return m(s,e)};var b=function(e,r){if(e&&void 0!==e.key){var o=t(e.key,r);if(0>=o)return b(e.rightChild,r);var n=b(e.leftChild,r);return void 0===n?e.key:n}};this.upperBound=function(e){return b(s,e)};var y=function(e,r){if(e&&void 0!==e.key){var o=t(e.key,r);if(0===o)return e.key;if(0<o)return y(e.leftChild,r);var n=y(e.rightChild,r);return void 0===n?e.key:n}};this.reverseLowerBound=function(e){return y(s,e)};var _=function(e,r){if(e&&void 0!==e.key){var o=t(e.key,r);if(0<=o)return _(e.leftChild,r);var n=_(e.rightChild,r);return void 0===n?e.key:n}};this.reverseUpperBound=function(e){return _(s,e)},this.union=function(e){var t=this;e.forEach(function(e){return t.insert(e)})},this.getHeight=function(){if(this.empty())return 0;var e=function(t){return t?Math.max(e(t.leftChild),e(t.rightChild))+1:1};return e(s)};var k=function(e){return n(this,function(t){switch(t.label){case 0:return e&&void 0!==e.key?[5,i(k(e.leftChild))]:[2];case 1:return t.sent(),[4,e.key];case 2:return t.sent(),[5,i(k(e.rightChild))];case 3:return t.sent(),[2];}})};this[Symbol.iterator]=function(){return k(s)},e.forEach(function(e){return r.insert(e)}),Object.freeze(this)}var n=this&&this.__generator||function(e,r){function o(e){return function(t){return i([e,t])}}function i(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(l=2&t[0]?s["return"]:t[0]?s["throw"]||((l=s["return"])&&l.call(s),0):s.next)&&!(l=l.call(s,t[1])).done)return l;switch((s=0,l)&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,s=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if((l=a.trys,!(l=0<l.length&&l[l.length-1]))&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue;}t=r.call(e,a)}catch(r){t=[6,r],s=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},n,s,l,d;return d={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d},i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0});var a=e("../Base/TreeNode");Object.freeze(o),r.default=o},{"../Base/TreeNode":48}],57:[function(e,t,r){"use strict";function o(e){var t=this;void 0===e&&(e=[]);var r=0,o=[];this.size=function(){return r},this.empty=function(){return 0===r},this.clear=function(){r=0,o.length=0},this.push=function(e){o.push(e),++r},this.pop=function(){o.pop(),0<r&&--r},this.top=function(){return o[r-1]},e.forEach(function(e){return t.push(e)}),Object.freeze(this)}Object.defineProperty(r,"__esModule",{value:!0}),Object.freeze(o),r.default=o},{}],58:[function(e,t,r){"use strict";function o(e){var t=this;void 0===e&&(e=[]);var r=0,o=[];this.size=function(){return r},this.empty=function(){return 0===r},this.clear=function(){r=0,o.length=0},this.front=function(){return this.empty()?void 0:o[0]},this.back=function(){return this.empty()?void 0:o[r-1]},this.forEach=function(e){o.forEach(e)},this.getElementByPos=function(e){if(0>e||e>=r)throw new Error("pos must more than 0 and less than vector's size");return o[e]},this.eraseElementByPos=function(e){if(0>e||e>=r)throw new Error("pos must more than 0 and less than vector's size");for(var t=e;t<r-1;++t)o[t]=o[t+1];this.popBack()},this.eraseElementByValue=function(e){var t=[];this.forEach(function(r){r!==e&&t.push(r)}),t.forEach(function(e,t){o[t]=e});for(var n=t.length;r>n;)this.popBack()},this.pushBack=function(e){o.push(e),++r},this.popBack=function(){o.pop(),0<r&&--r},this.setElementByPos=function(e,t){if(0>e||e>=r)throw new Error("pos must more than 0 and less than vector's size");o[e]=t},this.insert=function(e,t,n){if(void 0===n&&(n=1),0>e||e>r)throw new Error("pos must more than 0 and less than or equal to vector's size");o.splice.apply(o,a([e,0],i(Array(n).fill(t)),!1)),r+=n},this.find=function(e){return o.includes(e)},this.reverse=function(){o.reverse()},this.unique=function(){var e=[],t;this.forEach(function(r,o){(0===o||r!==t)&&(e.push(r),t=r)}),e.forEach(function(e,t){o[t]=e});for(var n=e.length;r>n;)this.popBack()},this.sort=function(e){o.sort(e)},this[Symbol.iterator]=function(){return function(){return n(this,function(e){switch(e.label){case 0:return[5,s(o)];case 1:return[2,e.sent()];}})}()},e.forEach(function(e){return t.pushBack(e)}),Object.freeze(this)}var n=this&&this.__generator||function(e,r){function o(e){return function(t){return i([e,t])}}function i(t){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,s&&(l=2&t[0]?s["return"]:t[0]?s["throw"]||((l=s["return"])&&l.call(s),0):s.next)&&!(l=l.call(s,t[1])).done)return l;switch((s=0,l)&&(t=[2&t[0],l.value]),t[0]){case 0:case 1:l=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,s=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if((l=a.trys,!(l=0<l.length&&l[l.length-1]))&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!l||t[1]>l[0]&&t[1]<l[3])){a.label=t[1];break}if(6===t[0]&&a.label<l[1]){a.label=l[1],l=t;break}if(l&&a.label<l[2]){a.label=l[2],a.ops.push(t);break}l[2]&&a.ops.pop(),a.trys.pop();continue;}t=r.call(e,a)}catch(r){t=[6,r],s=0}finally{n=l=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var a={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]},n,s,l,d;return d={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(d[Symbol.iterator]=function(){return this}),d},i=this&&this.__read||function(t,o){var a="function"==typeof Symbol&&t[Symbol.iterator];if(!a)return t;var s=a.call(t),i=[],l,d;try{for(;(void 0===o||0<o--)&&!(l=s.next()).done;)i.push(l.value)}catch(e){d={error:e}}finally{try{l&&!l.done&&(a=s["return"])&&a.call(s)}finally{if(d)throw d.error}}return i},a=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var o=0,n=t.length,a;o<n;o++)(a||!(o in t))&&(a||(a=Array.prototype.slice.call(t,0,o)),a[o]=t[o]);return e.concat(a||Array.prototype.slice.call(t))},s=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(r,"__esModule",{value:!0}),Object.freeze(o),r.default=o},{}],59:[function(e,t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HashMap=r.HashSet=r.Map=r.Set=r.PriorityQueue=r.Deque=r.LinkList=r.Queue=r.Stack=r.Vector=void 0;var o=e("./Vector/Vector");r.Vector=o.default;var n=e("./Stack/Stack");r.Stack=n.default;var i=e("./Queue/Queue");r.Queue=i.default;var a=e("./LinkList/LinkList");r.LinkList=a.default;var s=e("./Deque/Deque");r.Deque=s.default;var l=e("./PriorityQueue/PriorityQueue");r.PriorityQueue=l.default;var d=e("./Set/Set");r.Set=d.default;var p=e("./Map/Map");r.Map=p.default;var c=e("./HashSet/HashSet");r.HashSet=c.default;var u=e("./HashMap/HashMap");r.HashMap=u.default},{"./Deque/Deque":49,"./HashMap/HashMap":50,"./HashSet/HashSet":51,"./LinkList/LinkList":52,"./Map/Map":53,"./PriorityQueue/PriorityQueue":54,"./Queue/Queue":55,"./Set/Set":56,"./Stack/Stack":57,"./Vector/Vector":58}],60:[function(e,t){'use strict';const r=e("yallist"),o=Symbol("max"),n=Symbol("length"),i=Symbol("lengthCalculator"),a=Symbol("allowStale"),s=Symbol("maxAge"),l=Symbol("dispose"),d=Symbol("noDisposeOnSet"),p=Symbol("lruList"),c=Symbol("cache"),u=Symbol("updateAgeOnGet"),f=()=>1;class h{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||0>e.max))throw new TypeError("max must be a non-negative number");const t=this[o]=e.max||1/0,r=e.length||f;if(this[i]="function"==typeof r?r:f,this[a]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[s]=e.maxAge||0,this[l]=e.dispose,this[d]=e.noDisposeOnSet||!1,this[u]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||0>e)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,b(this)}get max(){return this[o]}set allowStale(e){this[a]=!!e}get allowStale(){return this[a]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[s]=e,b(this)}get maxAge(){return this[s]}set lengthCalculator(e){"function"!=typeof e&&(e=f),e!==this[i]&&(this[i]=e,this[n]=0,this[p].forEach(e=>{e.length=this[i](e.value,e.key),this[n]+=e.length})),b(this)}get lengthCalculator(){return this[i]}get length(){return this[n]}get itemCount(){return this[p].length}rforEach(e,t){t=t||this;for(let r=this[p].tail;null!==r;){const o=r.prev;k(this,e,r,t),r=o}}forEach(e,t){t=t||this;for(let r=this[p].head;null!==r;){const o=r.next;k(this,e,r,t),r=o}}keys(){return this[p].toArray().map(e=>e.key)}values(){return this[p].toArray().map(e=>e.value)}reset(){this[l]&&this[p]&&this[p].length&&this[p].forEach(e=>this[l](e.key,e.value)),this[c]=new Map,this[p]=new r,this[n]=0}dump(){return this[p].map(e=>!m(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[p]}set(e,t,r){if(r=r||this[s],r&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const a=r?Date.now():0,u=this[i](t,e);if(this[c].has(e)){if(u>this[o])return y(this,this[c].get(e)),!1;const i=this[c].get(e),s=i.value;return this[l]&&!this[d]&&this[l](e,s.value),s.now=a,s.maxAge=r,s.value=t,this[n]+=u-s.length,s.length=u,this.get(e),b(this),!0}const f=new _(e,t,u,a,r);return f.length>this[o]?(this[l]&&this[l](e,t),!1):(this[n]+=f.length,this[p].unshift(f),this[c].set(e,this[p].head),b(this),!0)}has(e){if(!this[c].has(e))return!1;const t=this[c].get(e).value;return!m(this,t)}get(e){return g(this,e,!0)}peek(e){return g(this,e,!1)}pop(){const e=this[p].tail;return e?(y(this,e),e.value):null}del(e){y(this,this[c].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;0<=r;r--){const o=e[r],n=o.e||0;if(0===n)this.set(o.k,o.v);else{const e=n-t;0<e&&this.set(o.k,o.v,e)}}}prune(){this[c].forEach((e,t)=>g(this,t,!1))}}const g=(e,t,r)=>{const o=e[c].get(t);if(o){const t=o.value;if(!m(e,t))r&&(e[u]&&(o.value.now=Date.now()),e[p].unshiftNode(o));else if(y(e,o),!e[a])return;return t.value}},m=(e,t)=>{if(!t||!t.maxAge&&!e[s])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[s]&&r>e[s]},b=e=>{if(e[n]>e[o])for(let t=e[p].tail;e[n]>e[o]&&null!==t;){const r=t.prev;y(e,t),t=r}},y=(e,t)=>{if(t){const r=t.value;e[l]&&e[l](r.key,r.value),e[n]-=r.length,e[c].delete(r.key),e[p].removeNode(t)}};class _{constructor(e,t,r,o,n){this.key=e,this.value=t,this.length=r,this.now=o,this.maxAge=n||0}}const k=(e,t,r,o)=>{let n=r.value;m(e,n)&&(y(e,r),!e[a]&&(n=void 0)),n&&t.call(o,n.value,n.key,e)};t.exports=h},{yallist:117}],61:[function(e,t){(function(e){(function(){function r(t){return[0,1,2].map(r=>[0,1].map(n=>[0,1].map(i=>{const a=e.alloc(1);return a.writeUInt8(o.codes[t]<<o.CMD_SHIFT|(n?o.DUP_MASK:0)|r<<o.QOS_SHIFT|i,0,!0),a})))}const o=t.exports;for(const e in o.types={0:"reserved",1:"connect",2:"connack",3:"publish",4:"puback",5:"pubrec",6:"pubrel",7:"pubcomp",8:"subscribe",9:"suback",10:"unsubscribe",11:"unsuback",12:"pingreq",13:"pingresp",14:"disconnect",15:"auth"},o.codes={},o.types){const t=o.types[e];o.codes[t]=e}for(const t in o.CMD_SHIFT=4,o.CMD_MASK=240,o.DUP_MASK=8,o.QOS_MASK=3,o.QOS_SHIFT=1,o.RETAIN_MASK=1,o.VARBYTEINT_MASK=127,o.VARBYTEINT_FIN_MASK=128,o.VARBYTEINT_MAX=268435455,o.SESSIONPRESENT_MASK=1,o.SESSIONPRESENT_HEADER=e.from([o.SESSIONPRESENT_MASK]),o.CONNACK_HEADER=e.from([o.codes.connack<<o.CMD_SHIFT]),o.USERNAME_MASK=128,o.PASSWORD_MASK=64,o.WILL_RETAIN_MASK=32,o.WILL_QOS_MASK=24,o.WILL_QOS_SHIFT=3,o.WILL_FLAG_MASK=4,o.CLEAN_SESSION_MASK=2,o.CONNECT_HEADER=e.from([o.codes.connect<<o.CMD_SHIFT]),o.properties={sessionExpiryInterval:17,willDelayInterval:24,receiveMaximum:33,maximumPacketSize:39,topicAliasMaximum:34,requestResponseInformation:25,requestProblemInformation:23,userProperties:38,authenticationMethod:21,authenticationData:22,payloadFormatIndicator:1,messageExpiryInterval:2,contentType:3,responseTopic:8,correlationData:9,maximumQoS:36,retainAvailable:37,assignedClientIdentifier:18,reasonString:31,wildcardSubscriptionAvailable:40,subscriptionIdentifiersAvailable:41,sharedSubscriptionAvailable:42,serverKeepAlive:19,responseInformation:26,serverReference:28,topicAlias:35,subscriptionIdentifier:11},o.propertiesCodes={},o.properties){const e=o.properties[t];o.propertiesCodes[e]=t}o.propertiesTypes={sessionExpiryInterval:"int32",willDelayInterval:"int32",receiveMaximum:"int16",maximumPacketSize:"int32",topicAliasMaximum:"int16",requestResponseInformation:"byte",requestProblemInformation:"byte",userProperties:"pair",authenticationMethod:"string",authenticationData:"binary",payloadFormatIndicator:"byte",messageExpiryInterval:"int32",contentType:"string",responseTopic:"string",correlationData:"binary",maximumQoS:"int8",retainAvailable:"byte",assignedClientIdentifier:"string",reasonString:"string",wildcardSubscriptionAvailable:"byte",subscriptionIdentifiersAvailable:"byte",sharedSubscriptionAvailable:"byte",serverKeepAlive:"int16",responseInformation:"string",serverReference:"string",topicAlias:"int16",subscriptionIdentifier:"var"},o.PUBLISH_HEADER=r("publish"),o.SUBSCRIBE_HEADER=r("subscribe"),o.SUBSCRIBE_OPTIONS_QOS_MASK=3,o.SUBSCRIBE_OPTIONS_NL_MASK=1,o.SUBSCRIBE_OPTIONS_NL_SHIFT=2,o.SUBSCRIBE_OPTIONS_RAP_MASK=1,o.SUBSCRIBE_OPTIONS_RAP_SHIFT=3,o.SUBSCRIBE_OPTIONS_RH_MASK=3,o.SUBSCRIBE_OPTIONS_RH_SHIFT=4,o.SUBSCRIBE_OPTIONS_RH=[0,16,32],o.SUBSCRIBE_OPTIONS_NL=4,o.SUBSCRIBE_OPTIONS_RAP=8,o.SUBSCRIBE_OPTIONS_QOS=[0,1,2],o.UNSUBSCRIBE_HEADER=r("unsubscribe"),o.ACKS={unsuback:r("unsuback"),puback:r("puback"),pubcomp:r("pubcomp"),pubrel:r("pubrel"),pubrec:r("pubrec")},o.SUBACK_HEADER=e.from([o.codes.suback<<o.CMD_SHIFT]),o.VERSION3=e.from([3]),o.VERSION4=e.from([4]),o.VERSION5=e.from([5]),o.VERSION131=e.from([131]),o.VERSION132=e.from([132]),o.QOS=[0,1,2].map(t=>e.from([t])),o.EMPTY={pingreq:e.from([o.codes.pingreq<<4,0]),pingresp:e.from([o.codes.pingresp<<4,0]),disconnect:e.from([o.codes.disconnect<<4,0])}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:40}],62:[function(e,t){(function(r){(function(){const o=e("./writeToStream"),n=e("events");class i extends n{constructor(){super(),this._array=Array(20),this._i=0}write(e){return this._array[this._i++]=e,!0}concat(){let e=0;const t=Array(this._array.length),o=this._array;let n=0,a;for(a=0;a<o.length&&o[a]!==void 0;a++)t[a]="string"==typeof o[a]?r.byteLength(o[a]):o[a].length,e+=t[a];const s=r.allocUnsafe(e);for(a=0;a<o.length&&o[a]!==void 0;a++)"string"==typeof o[a]?(s.write(o[a],n),n+=t[a]):(o[a].copy(s,n),n+=t[a]);return s}}t.exports=function(e,t){const r=new i;return o(e,r,t),r.concat()}}).call(this)}).call(this,e("buffer").Buffer)},{"./writeToStream":67,buffer:40,events:45}],63:[function(e,t,r){r.parser=e("./parser").parser,r.generate=e("./generate"),r.writeToStream=e("./writeToStream")},{"./generate":62,"./parser":66,"./writeToStream":67}],64:[function(e,t){(function(e){(function(){function r(t){const r=e.allocUnsafe(2);return r.writeUInt8(t>>8,0),r.writeUInt8(255&t,1),r}const o={},n=e.isBuffer(e.from([1,2]).subarray(0,1));t.exports={cache:o,generateCache:function(){for(let e=0;e<65536;e++)o[e]=r(e)},generateNumber:r,genBufVariableByteInt:function(t){let r=0,o=0;const i=e.allocUnsafe(4);do r=0|t%128,t=0|t/128,0<t&&(r|=128),i.writeUInt8(r,o++);while(0<t&&o<4);return 0<t&&(o=0),n?i.subarray(0,o):i.slice(0,o)},generate4ByteBuffer:function(t){const r=e.allocUnsafe(4);return r.writeUInt32BE(t,0),r}}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:40}],65:[function(e,t){t.exports=class e{constructor(){this.cmd=null,this.retain=!1,this.qos=0,this.dup=!1,this.length=-1,this.topic=null,this.payload=null}}},{}],66:[function(e,t){const r=e("bl"),o=e("events"),n=e("./packet"),i=e("./constants"),a=e("debug")("mqtt-packet:parser");class s extends o{constructor(){super(),this.parser=this.constructor.parser}static parser(e){return this instanceof s?(this.settings=e||{},this._states=["_parseHeader","_parseLength","_parsePayload","_newPacket"],this._resetState(),this):new s().parser(e)}_resetState(){a("_resetState: resetting packet, error, _list, and _stateCounter"),this.packet=new n,this.error=null,this._list=r(),this._stateCounter=0}parse(e){for(this.error&&this._resetState(),this._list.append(e),a("parse: current state: %s",this._states[this._stateCounter]);(-1!==this.packet.length||0<this._list.length)&&this[this._states[this._stateCounter]]()&&!this.error;)this._stateCounter++,a("parse: state complete. _stateCounter is now: %d",this._stateCounter),a("parse: packet.length: %d, buffer list length: %d",this.packet.length,this._list.length),this._stateCounter>=this._states.length&&(this._stateCounter=0);return a("parse: exited while loop. packet: %d, buffer list length: %d",this.packet.length,this._list.length),this._list.length}_parseHeader(){const e=this._list.readUInt8(0);return this.packet.cmd=i.types[e>>i.CMD_SHIFT],this.packet.retain=0!=(e&i.RETAIN_MASK),this.packet.qos=e>>i.QOS_SHIFT&i.QOS_MASK,this.packet.dup=0!=(e&i.DUP_MASK),a("_parseHeader: packet: %o",this.packet),this._list.consume(1),!0}_parseLength(){const e=this._parseVarByteNum(!0);return e&&(this.packet.length=e.value,this._list.consume(e.bytes)),a("_parseLength %d",e.value),!!e}_parsePayload(){a("_parsePayload: payload %O",this._list);let e=!1;if(0===this.packet.length||this._list.length>=this.packet.length){switch(this._pos=0,this.packet.cmd){case"connect":this._parseConnect();break;case"connack":this._parseConnack();break;case"publish":this._parsePublish();break;case"puback":case"pubrec":case"pubrel":case"pubcomp":this._parseConfirmation();break;case"subscribe":this._parseSubscribe();break;case"suback":this._parseSuback();break;case"unsubscribe":this._parseUnsubscribe();break;case"unsuback":this._parseUnsuback();break;case"pingreq":case"pingresp":break;case"disconnect":this._parseDisconnect();break;case"auth":this._parseAuth();break;default:this._emitError(new Error("Not supported"));}e=!0}return a("_parsePayload complete result: %s",e),e}_parseConnect(){a("_parseConnect");let e,t,r,o;const n={},s=this.packet,l=this._parseString();if(null===l)return this._emitError(new Error("Cannot parse protocolId"));if("MQTT"!==l&&"MQIsdp"!==l)return this._emitError(new Error("Invalid protocolId"));if(s.protocolId=l,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(s.protocolVersion=this._list.readUInt8(this._pos),128<=s.protocolVersion&&(s.bridgeMode=!0,s.protocolVersion-=128),3!==s.protocolVersion&&4!==s.protocolVersion&&5!==s.protocolVersion)return this._emitError(new Error("Invalid protocol version"));if(this._pos++,this._pos>=this._list.length)return this._emitError(new Error("Packet too short"));if(n.username=this._list.readUInt8(this._pos)&i.USERNAME_MASK,n.password=this._list.readUInt8(this._pos)&i.PASSWORD_MASK,n.will=this._list.readUInt8(this._pos)&i.WILL_FLAG_MASK,n.will&&(s.will={},s.will.retain=0!=(this._list.readUInt8(this._pos)&i.WILL_RETAIN_MASK),s.will.qos=(this._list.readUInt8(this._pos)&i.WILL_QOS_MASK)>>i.WILL_QOS_SHIFT),s.clean=0!=(this._list.readUInt8(this._pos)&i.CLEAN_SESSION_MASK),this._pos++,s.keepalive=this._parseNum(),-1===s.keepalive)return this._emitError(new Error("Packet too short"));if(5===s.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(s.properties=e)}const d=this._parseString();if(null===d)return this._emitError(new Error("Packet too short"));if(s.clientId=d,a("_parseConnect: packet.clientId: %s",s.clientId),n.will){if(5===s.protocolVersion){const e=this._parseProperties();Object.getOwnPropertyNames(e).length&&(s.will.properties=e)}if(e=this._parseString(),null===e)return this._emitError(new Error("Cannot parse will topic"));if(s.will.topic=e,a("_parseConnect: packet.will.topic: %s",s.will.topic),t=this._parseBuffer(),null===t)return this._emitError(new Error("Cannot parse will payload"));s.will.payload=t,a("_parseConnect: packet.will.paylaod: %s",s.will.payload)}if(n.username){if(o=this._parseString(),null===o)return this._emitError(new Error("Cannot parse username"));s.username=o,a("_parseConnect: packet.username: %s",s.username)}if(n.password){if(r=this._parseBuffer(),null===r)return this._emitError(new Error("Cannot parse password"));s.password=r}return this.settings=s,a("_parseConnect: complete"),s}_parseConnack(){a("_parseConnack");const e=this.packet;if(1>this._list.length)return null;if(e.sessionPresent=!!(this._list.readUInt8(this._pos++)&i.SESSIONPRESENT_MASK),5===this.settings.protocolVersion)e.reasonCode=2<=this._list.length?this._list.readUInt8(this._pos++):0;else{if(2>this._list.length)return null;e.returnCode=this._list.readUInt8(this._pos++)}if(-1===e.returnCode||-1===e.reasonCode)return this._emitError(new Error("Cannot parse return code"));if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}a("_parseConnack: complete")}_parsePublish(){a("_parsePublish");const e=this.packet;if(e.topic=this._parseString(),null===e.topic)return this._emitError(new Error("Cannot parse topic"));if(!(0<e.qos)||this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}e.payload=this._list.slice(this._pos,e.length),a("_parsePublish: payload from buffer list: %o",e.payload)}}_parseSubscribe(){a("_parseSubscribe");const e=this.packet;let t,r,o,n,s,l,d;if(1!==e.qos)return this._emitError(new Error("Wrong subscribe header"));if(e.subscriptions=[],!!this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}for(;this._pos<e.length;){if(t=this._parseString(),null===t)return this._emitError(new Error("Cannot parse topic"));if(this._pos>=e.length)return this._emitError(new Error("Malformed Subscribe Payload"));r=this._parseByte(),o=r&i.SUBSCRIBE_OPTIONS_QOS_MASK,l=0!=(r>>i.SUBSCRIBE_OPTIONS_NL_SHIFT&i.SUBSCRIBE_OPTIONS_NL_MASK),s=0!=(r>>i.SUBSCRIBE_OPTIONS_RAP_SHIFT&i.SUBSCRIBE_OPTIONS_RAP_MASK),n=r>>i.SUBSCRIBE_OPTIONS_RH_SHIFT&i.SUBSCRIBE_OPTIONS_RH_MASK,d={topic:t,qos:o},5===this.settings.protocolVersion?(d.nl=l,d.rap=s,d.rh=n):this.settings.bridgeMode&&(d.rh=0,d.rap=!0,d.nl=!0),a("_parseSubscribe: push subscription `%s` to subscription",d),e.subscriptions.push(d)}}}_parseSuback(){a("_parseSuback");const e=this.packet;if(this.packet.granted=[],!!this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}for(;this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseUnsubscribe(){a("_parseUnsubscribe");const e=this.packet;if(e.unsubscriptions=[],!!this._parseMessageId()){if(5===this.settings.protocolVersion){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}for(;this._pos<e.length;){const t=this._parseString();if(null===t)return this._emitError(new Error("Cannot parse topic"));a("_parseUnsubscribe: push topic `%s` to unsubscriptions",t),e.unsubscriptions.push(t)}}}_parseUnsuback(){a("_parseUnsuback");const e=this.packet;if(!this._parseMessageId())return this._emitError(new Error("Cannot parse messageId"));if(5===this.settings.protocolVersion){const t=this._parseProperties();for(Object.getOwnPropertyNames(t).length&&(e.properties=t),e.granted=[];this._pos<this.packet.length;)this.packet.granted.push(this._list.readUInt8(this._pos++))}}_parseConfirmation(){a("_parseConfirmation: packet.cmd: `%s`",this.packet.cmd);const e=this.packet;if(this._parseMessageId(),5===this.settings.protocolVersion&&(2<e.length?(e.reasonCode=this._parseByte(),a("_parseConfirmation: packet.reasonCode `%d`",e.reasonCode)):e.reasonCode=0,3<e.length)){const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}return!0}_parseDisconnect(){const e=this.packet;if(a("_parseDisconnect"),5===this.settings.protocolVersion){e.reasonCode=0<this._list.length?this._parseByte():0;const t=this._parseProperties();Object.getOwnPropertyNames(t).length&&(e.properties=t)}return a("_parseDisconnect result: true"),!0}_parseAuth(){a("_parseAuth");const e=this.packet;if(5!==this.settings.protocolVersion)return this._emitError(new Error("Not supported auth packet for this version MQTT"));e.reasonCode=this._parseByte();const t=this._parseProperties();return Object.getOwnPropertyNames(t).length&&(e.properties=t),a("_parseAuth: result: true"),!0}_parseMessageId(){const e=this.packet;return(e.messageId=this._parseNum(),null===e.messageId)?(this._emitError(new Error("Cannot parse messageId")),!1):(a("_parseMessageId: packet.messageId %d",e.messageId),!0)}_parseString(){const e=this._parseNum(),t=e+this._pos;if(-1===e||t>this._list.length||t>this.packet.length)return null;const r=this._list.toString("utf8",this._pos,t);return this._pos+=e,a("_parseString: result: %s",r),r}_parseStringPair(){return a("_parseStringPair"),{name:this._parseString(),value:this._parseString()}}_parseBuffer(){const e=this._parseNum(),t=e+this._pos;if(-1===e||t>this._list.length||t>this.packet.length)return null;const r=this._list.slice(this._pos,t);return this._pos+=e,a("_parseBuffer: result: %o",r),r}_parseNum(){if(2>this._list.length-this._pos)return-1;const e=this._list.readUInt16BE(this._pos);return this._pos+=2,a("_parseNum: result: %s",e),e}_parse4ByteNum(){if(4>this._list.length-this._pos)return-1;const e=this._list.readUInt32BE(this._pos);return this._pos+=4,a("_parse4ByteNum: result: %s",e),e}_parseVarByteNum(e){a("_parseVarByteNum");let t=0,r=1,o=0,n=!1,s;const l=this._pos?this._pos:0;for(;t<4&&l+t<this._list.length;){if(s=this._list.readUInt8(l+t++),o+=r*(s&i.VARBYTEINT_MASK),r*=128,0==(s&i.VARBYTEINT_FIN_MASK)){n=!0;break}if(this._list.length<=t)break}return!n&&4===t&&this._list.length>=t&&this._emitError(new Error("Invalid variable byte integer")),l&&(this._pos+=t),n=!!n&&(e?{bytes:t,value:o}:o),a("_parseVarByteNum: result: %o",n),n}_parseByte(){let e;return this._pos<this._list.length&&(e=this._list.readUInt8(this._pos),this._pos++),a("_parseByte: result: %o",e),e}_parseByType(e){return a("_parseByType: type: %s",e),"byte"===e?0!==this._parseByte():"int8"===e?this._parseByte():"int16"===e?this._parseNum():"int32"===e?this._parse4ByteNum():"var"===e?this._parseVarByteNum():"string"===e?this._parseString():"pair"===e?this._parseStringPair():"binary"===e?this._parseBuffer():void 0}_parseProperties(){a("_parseProperties");const e=this._parseVarByteNum(),t=this._pos,r={};for(;this._pos<t+e;){const e=this._parseByte();if(!e)return this._emitError(new Error("Cannot parse property code type")),!1;const t=i.propertiesCodes[e];if(!t)return this._emitError(new Error("Unknown property")),!1;if("userProperties"===t){r[t]||(r[t]=Object.create(null));const e=this._parseByType(i.propertiesTypes[t]);if(!r[t][e.name])r[t][e.name]=e.value;else if(Array.isArray(r[t][e.name]))r[t][e.name].push(e.value);else{const o=r[t][e.name];r[t][e.name]=[o],r[t][e.name].push(e.value)}continue}r[t]?Array.isArray(r[t])?r[t].push(this._parseByType(i.propertiesTypes[t])):(r[t]=[r[t]],r[t].push(this._parseByType(i.propertiesTypes[t]))):r[t]=this._parseByType(i.propertiesTypes[t])}return r}_newPacket(){return a("_newPacket"),this.packet&&(this._list.consume(this.packet.length),a("_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d",this.packet.cmd,this.packet.payload,this.packet.length),this.emit("packet",this.packet)),a("_newPacket: new packet"),this.packet=new n,this._pos=0,!0}_emitError(e){a("_emitError"),this.error=e,this.emit("error",e)}}t.exports=s},{"./constants":61,"./packet":65,bl:37,debug:41,events:45}],67:[function(e,t){(function(r){(function(){function o(e,t,r){switch(B("generate called"),t.cork&&(t.cork(),N(n,t)),z&&(z=!1,U()),B("generate: packet.cmd: %s",e.cmd),e.cmd){case"connect":return i(e,t,r);case"connack":return a(e,t,r);case"publish":return s(e,t,r);case"puback":case"pubrec":case"pubrel":case"pubcomp":return l(e,t,r);case"subscribe":return d(e,t,r);case"suback":return p(e,t,r);case"unsubscribe":return c(e,t,r);case"unsuback":return u(e,t,r);case"pingreq":case"pingresp":return f(e,t,r);case"disconnect":return h(e,t,r);case"auth":return g(e,t,r);default:return t.emit("error",new Error("Unknown command")),!1;}}function n(e){e.uncork()}function i(e,t){const o=e||{},n=o.protocolId||"MQTT";let i=o.protocolVersion||4;const a=o.will;let s=o.clean;const l=o.keepalive||0,d=o.clientId||"",p=o.username,c=o.password,u=o.properties;void 0===s&&(s=!0);let f=0;if(!n||"string"!=typeof n&&!r.isBuffer(n))return t.emit("error",new Error("Invalid protocolId")),!1;if(f+=n.length+2,3!==i&&4!==i&&5!==i)return t.emit("error",new Error("Invalid protocol version")),!1;if(f+=1,("string"==typeof d||r.isBuffer(d))&&(d||4<=i)&&(d||s))f+=r.byteLength(d)+2;else{if(4>i)return t.emit("error",new Error("clientId must be supplied before 3.1.1")),!1;if(0==1*s)return t.emit("error",new Error("clientId must be given if cleanSession set to 0")),!1}if("number"!=typeof l||0>l||65535<l||0!=l%1)return t.emit("error",new Error("Invalid keepalive")),!1;if(f+=2,f+=1,5===i){var h=v(t,u);if(!h)return!1;f+=h.length}if(a){if("object"!=typeof a)return t.emit("error",new Error("Invalid will")),!1;if(!a.topic||"string"!=typeof a.topic)return t.emit("error",new Error("Invalid will topic")),!1;if(f+=r.byteLength(a.topic)+2,f+=2,a.payload)if(0<=a.payload.length)f+="string"==typeof a.payload?r.byteLength(a.payload):a.payload.length;else return t.emit("error",new Error("Invalid will payload")),!1;var g={};if(5===i){if(g=v(t,a.properties),!g)return!1;f+=g.length}}let y=!1;if(null!=p)if(I(p))y=!0,f+=r.byteLength(p)+2;else return t.emit("error",new Error("Invalid username")),!1;if(null!=c){if(!y)return t.emit("error",new Error("Username is required to use password")),!1;if(I(c))f+=x(c)+2;else return t.emit("error",new Error("Invalid password")),!1}t.write(A.CONNECT_HEADER),m(t,f),S(t,n),o.bridgeMode&&(i+=128),t.write(131===i?A.VERSION131:132===i?A.VERSION132:4===i?A.VERSION4:5===i?A.VERSION5:A.VERSION3);let _=0;return _|=null==p?0:A.USERNAME_MASK,_|=null==c?0:A.PASSWORD_MASK,_|=a&&a.retain?A.WILL_RETAIN_MASK:0,_|=a&&a.qos?a.qos<<A.WILL_QOS_SHIFT:0,_|=a?A.WILL_FLAG_MASK:0,_|=s?A.CLEAN_SESSION_MASK:0,t.write(r.from([_])),j(t,l),5===i&&h.write(),S(t,d),a&&(5===i&&g.write(),b(t,a.topic),S(t,a.payload)),null!=p&&S(t,p),null!=c&&S(t,c),!0}function a(e,t,o){const n=o?o.protocolVersion:4,i=e||{},a=5===n?i.reasonCode:i.returnCode,s=i.properties;let l=2;if("number"!=typeof a)return t.emit("error",new Error("Invalid return code")),!1;let d=null;if(5===n){if(d=v(t,s),!d)return!1;l+=d.length}return t.write(A.CONNACK_HEADER),m(t,l),t.write(i.sessionPresent?A.SESSIONPRESENT_HEADER:L),t.write(r.from([a])),null!=d&&d.write(),!0}function s(e,t,o){B("publish: packet: %o",e);const n=o?o.protocolVersion:4,i=e||{},a=i.qos||0,s=i.retain?A.RETAIN_MASK:0,l=i.topic,d=i.payload||R,p=i.messageId,c=i.properties;let u=0;if("string"==typeof l)u+=r.byteLength(l)+2;else if(r.isBuffer(l))u+=l.length+2;else return t.emit("error",new Error("Invalid topic")),!1;if(u+=r.isBuffer(d)?d.length:r.byteLength(d),a&&"number"!=typeof p)return t.emit("error",new Error("Invalid messageId")),!1;a&&(u+=2);let f=null;if(5===n){if(f=v(t,c),!f)return!1;u+=f.length}return t.write(A.PUBLISH_HEADER[a][i.dup?1:0][s?1:0]),m(t,u),j(t,x(l)),t.write(l),0<a&&j(t,p),null!=f&&f.write(),B("publish: payload: %o",d),t.write(d)}function l(e,t,o){const n=o?o.protocolVersion:4,i=e||{},a=i.cmd||"puback",s=i.messageId,l=i.dup&&"pubrel"===a?A.DUP_MASK:0;let d=0;const p=i.reasonCode,c=i.properties;let u=5===n?3:2;if("pubrel"===a&&(d=1),"number"!=typeof s)return t.emit("error",new Error("Invalid messageId")),!1;let f=null;if(5===n&&"object"==typeof c){if(f=E(t,c,o,u),!f)return!1;u+=f.length}return t.write(A.ACKS[a][d][l][0]),m(t,u),j(t,s),5===n&&t.write(r.from([p])),null!==f&&f.write(),!0}function d(e,t,o){B("subscribe: packet: ");const n=o?o.protocolVersion:4,i=e||{},a=i.dup?A.DUP_MASK:0,s=i.messageId,l=i.subscriptions,d=i.properties;let p=0;if("number"!=typeof s)return t.emit("error",new Error("Invalid messageId")),!1;p+=2;let c=null;if(5===n){if(c=v(t,d),!c)return!1;p+=c.length}if("object"==typeof l&&l.length)for(let e=0;e<l.length;e+=1){const o=l[e].topic,i=l[e].qos;if("string"!=typeof o)return t.emit("error",new Error("Invalid subscriptions - invalid topic")),!1;if("number"!=typeof i)return t.emit("error",new Error("Invalid subscriptions - invalid qos")),!1;if(5===n){const r=l[e].nl||!1;if("boolean"!=typeof r)return t.emit("error",new Error("Invalid subscriptions - invalid No Local")),!1;const o=l[e].rap||!1;if("boolean"!=typeof o)return t.emit("error",new Error("Invalid subscriptions - invalid Retain as Published")),!1;const n=l[e].rh||0;if("number"!=typeof n||2<n)return t.emit("error",new Error("Invalid subscriptions - invalid Retain Handling")),!1}p+=r.byteLength(o)+2+1}else return t.emit("error",new Error("Invalid subscriptions")),!1;B("subscribe: writing to stream: %o",A.SUBSCRIBE_HEADER),t.write(A.SUBSCRIBE_HEADER[1][a?1:0][0]),m(t,p),j(t,s),null!==c&&c.write();let u=!0;for(const i of l){const e=i.topic,o=i.qos,a=+i.nl,s=+i.rap,l=i.rh;let d;b(t,e),d=A.SUBSCRIBE_OPTIONS_QOS[o],5===n&&(d|=a?A.SUBSCRIBE_OPTIONS_NL:0,d|=s?A.SUBSCRIBE_OPTIONS_RAP:0,d|=l?A.SUBSCRIBE_OPTIONS_RH[l]:0),u=t.write(r.from([d]))}return u}function p(e,t,o){const n=o?o.protocolVersion:4,i=e||{},a=i.messageId,s=i.granted,l=i.properties;let d=0;if("number"!=typeof a)return t.emit("error",new Error("Invalid messageId")),!1;if(d+=2,"object"==typeof s&&s.length)for(let e=0;e<s.length;e+=1){if("number"!=typeof s[e])return t.emit("error",new Error("Invalid qos vector")),!1;d+=1}else return t.emit("error",new Error("Invalid qos vector")),!1;let p=null;if(5===n){if(p=E(t,l,o,d),!p)return!1;d+=p.length}return t.write(A.SUBACK_HEADER),m(t,d),j(t,a),null!==p&&p.write(),t.write(r.from(s))}function c(e,t,o){const n=o?o.protocolVersion:4,i=e||{},a=i.messageId,s=i.dup?A.DUP_MASK:0,l=i.unsubscriptions,d=i.properties;let p=0;if("number"!=typeof a)return t.emit("error",new Error("Invalid messageId")),!1;if(p+=2,"object"==typeof l&&l.length)for(let e=0;e<l.length;e+=1){if("string"!=typeof l[e])return t.emit("error",new Error("Invalid unsubscriptions")),!1;p+=r.byteLength(l[e])+2}else return t.emit("error",new Error("Invalid unsubscriptions")),!1;let c=null;if(5===n){if(c=v(t,d),!c)return!1;p+=c.length}t.write(A.UNSUBSCRIBE_HEADER[1][s?1:0][0]),m(t,p),j(t,a),null!==c&&c.write();let u=!0;for(let r=0;r<l.length;r++)u=b(t,l[r]);return u}function u(e,t,o){const n=o?o.protocolVersion:4,i=e||{},a=i.messageId,s=i.dup?A.DUP_MASK:0,l=i.granted,d=i.properties,p=i.cmd;let c=2;if("number"!=typeof a)return t.emit("error",new Error("Invalid messageId")),!1;if(5===n)if("object"==typeof l&&l.length)for(let e=0;e<l.length;e+=1){if("number"!=typeof l[e])return t.emit("error",new Error("Invalid qos vector")),!1;c+=1}else return t.emit("error",new Error("Invalid qos vector")),!1;let u=null;if(5===n){if(u=E(t,d,o,c),!u)return!1;c+=u.length}return t.write(A.ACKS[p][0][s][0]),m(t,c),j(t,a),null!==u&&u.write(),5===n&&t.write(r.from(l)),!0}function f(e,t){return t.write(A.EMPTY[e.cmd])}function h(e,t,o){const n=o?o.protocolVersion:4,i=e||{},a=i.reasonCode,s=i.properties;let l=5===n?1:0,d=null;if(5===n){if(d=E(t,s,o,l),!d)return!1;l+=d.length}return t.write(r.from([A.codes.disconnect<<4])),m(t,l),5===n&&t.write(r.from([a])),null!==d&&d.write(),!0}function g(e,t,o){const n=o?o.protocolVersion:4,i=e||{},a=i.reasonCode,s=i.properties;let l=5===n?1:0;5!==n&&t.emit("error",new Error("Invalid mqtt version for auth packet"));const d=E(t,s,o,l);return!!d&&(l+=d.length,t.write(r.from([A.codes.auth<<4])),m(t,l),t.write(r.from([a])),null!==d&&d.write(),!0)}function m(e,t){if(t>A.VARBYTEINT_MAX)return e.emit("error",new Error(`Invalid variable byte integer: ${t}`)),!1;let r=F[t];return r||(r=q(t),16384>t&&(F[t]=r)),B("writeVarByteInt: writing to stream: %o",r),e.write(r)}function b(e,t){const o=r.byteLength(t);return j(e,o),B("writeString: %s",t),e.write(t,"utf8")}function y(e,t,r){b(e,t),b(e,r)}function _(e,t){return B("writeNumberCached: number: %d",t),B("writeNumberCached: %o",O[t]),e.write(O[t])}function k(e,t){const r=M(t);return B("writeNumberGenerated: %o",r),e.write(r)}function C(e,t){const r=D(t);return B("write4ByteNumber: %o",r),e.write(r)}function S(e,t){"string"==typeof t?b(e,t):t?(j(e,t.length),e.write(t)):j(e,0)}function v(e,t){function o(t,o){const n=A.propertiesTypes[t];let i=0;switch(n){case"byte":{if("boolean"!=typeof o)return e.emit("error",new Error(`Invalid ${t}: ${o}`)),!1;i+=2;break}case"int8":{if("number"!=typeof o||0>o||255<o)return e.emit("error",new Error(`Invalid ${t}: ${o}`)),!1;i+=2;break}case"binary":{if(o&&null===o)return e.emit("error",new Error(`Invalid ${t}: ${o}`)),!1;i+=1+r.byteLength(o)+2;break}case"int16":{if("number"!=typeof o||0>o||65535<o)return e.emit("error",new Error(`Invalid ${t}: ${o}`)),!1;i+=3;break}case"int32":{if("number"!=typeof o||0>o||4294967295<o)return e.emit("error",new Error(`Invalid ${t}: ${o}`)),!1;i+=5;break}case"var":{if("number"!=typeof o||0>o||268435455<o)return e.emit("error",new Error(`Invalid ${t}: ${o}`)),!1;i+=1+r.byteLength(q(o));break}case"string":{if("string"!=typeof o)return e.emit("error",new Error(`Invalid ${t}: ${o}`)),!1;i+=3+r.byteLength(o.toString());break}case"pair":{if("object"!=typeof o)return e.emit("error",new Error(`Invalid ${t}: ${o}`)),!1;i+=Object.getOwnPropertyNames(o).reduce((e,t)=>{const n=o[t];return e+=Array.isArray(n)?n.reduce((e,o)=>(e+=3+r.byteLength(t.toString())+2+r.byteLength(o.toString()),e),0):3+r.byteLength(t.toString())+2+r.byteLength(o[t].toString()),e},0);break}default:return e.emit("error",new Error(`Invalid property ${t}: ${o}`)),!1;}return i}if("object"!=typeof t||null!=t.length)return{length:1,write(){T(e,{},0)}};let n=0;if(t)for(const e in t){let r=0,i=0;const a=t[e];if(Array.isArray(a))for(let t=0;t<a.length;t++){if(i=o(e,a[t]),!i)return!1;r+=i}else{if(i=o(e,a),!i)return!1;r=i}if(!r)return!1;n+=r}const i=r.byteLength(q(n));return{length:i+n,write(){T(e,t,n)}}}function E(e,t,r,o){const n=["reasonString","userProperties"],i=r&&r.properties&&r.properties.maximumPacketSize?r.properties.maximumPacketSize:0;let a=v(e,t);if(i)for(;o+a.length>i;){const r=n.shift();if(r&&t[r])delete t[r],a=v(e,t);else return!1}return a}function w(e,t,o){const n=A.propertiesTypes[t];switch(n){case"byte":{e.write(r.from([A.properties[t]])),e.write(r.from([+o]));break}case"int8":{e.write(r.from([A.properties[t]])),e.write(r.from([o]));break}case"binary":{e.write(r.from([A.properties[t]])),S(e,o);break}case"int16":{e.write(r.from([A.properties[t]])),j(e,o);break}case"int32":{e.write(r.from([A.properties[t]])),C(e,o);break}case"var":{e.write(r.from([A.properties[t]])),m(e,o);break}case"string":{e.write(r.from([A.properties[t]])),b(e,o);break}case"pair":{Object.getOwnPropertyNames(o).forEach(n=>{const i=o[n];Array.isArray(i)?i.forEach(o=>{e.write(r.from([A.properties[t]])),y(e,n.toString(),o.toString())}):(e.write(r.from([A.properties[t]])),y(e,n.toString(),i.toString()))});break}default:return e.emit("error",new Error(`Invalid property ${t} value: ${o}`)),!1;}}function T(e,t,r){for(const o in m(e,r),t)if(Object.prototype.hasOwnProperty.call(t,o)&&null!==t[o]){const r=t[o];if(Array.isArray(r))for(let t=0;t<r.length;t++)w(e,o,r[t]);else w(e,o,r)}}function x(e){return e?e instanceof r?e.length:r.byteLength(e):0}function I(e){return"string"==typeof e||e instanceof r}const A=e("./constants"),R=r.allocUnsafe(0),L=r.from([0]),P=e("./numbers"),N=e("process-nextick-args").nextTick,B=e("debug")("mqtt-packet:writeToStream"),O=P.cache,M=P.generateNumber,U=P.generateCache,q=P.genBufVariableByteInt,D=P.generate4ByteBuffer;let j=_,z=!0;Object.defineProperty(o,"cacheNumbers",{get(){return j===_},set(e){e?((!O||0===Object.keys(O).length)&&(z=!0),j=_):(z=!1,j=k)}});const F={};t.exports=o}).call(this)}).call(this,e("buffer").Buffer)},{"./constants":61,"./numbers":64,buffer:40,debug:41,"process-nextick-args":84}],68:[function(e,t){(function(r,o){(function(){'use strict';function n(){return"mqttjs_"+Math.random().toString(16).substr(2,8)}function i(e,t){if(5===e.options.protocolVersion&&"publish"===t.cmd){let r;t.properties&&(r=t.properties.topicAlias);const o=t.topic.toString();if(e.topicAliasSend){if(!r)0!==o.length&&(e.options.autoAssignTopicAlias?(r=e.topicAliasSend.getAliasByTopic(o),r?(t.topic="",t.properties={...t.properties,topicAlias:r},w("applyTopicAlias :: auto assign(use) topic: %s - alias: %d",o,r)):(r=e.topicAliasSend.getLruAlias(),e.topicAliasSend.put(o,r),t.properties={...t.properties,topicAlias:r},w("applyTopicAlias :: auto assign topic: %s - alias: %d",o,r))):e.options.autoUseTopicAlias&&(r=e.topicAliasSend.getAliasByTopic(o),r&&(t.topic="",t.properties={...t.properties,topicAlias:r},w("applyTopicAlias :: auto use topic: %s - alias: %d",o,r))));else if(0!==o.length&&(w("applyTopicAlias :: register topic: %s - alias: %d",o,r),!e.topicAliasSend.put(o,r)))return w("applyTopicAlias :: error out of range. topic: %s - alias: %d",o,r),new Error("Sending Topic Alias out of range");}else if(r)return w("applyTopicAlias :: error out of range. topic: %s - alias: %d",o,r),new Error("Sending Topic Alias out of range")}}function a(e,t){let r;t.properties&&(r=t.properties.topicAlias);let o=t.topic.toString();if(0===o.length){if("undefined"==typeof r)return new Error("Unregistered Topic Alias");if(o=e.topicAliasSend.getTopicByAlias(r),"undefined"==typeof o)return new Error("Unregistered Topic Alias");t.topic=o}r&&delete t.properties.topicAlias}function s(e,t,r){w("sendPacket :: packet: %O",t),w("sendPacket :: emitting `packetsend`"),e.emit("packetsend",t),w("sendPacket :: writing to stream");const o=b.writeToStream(t,e.stream,e.options);w("sendPacket :: writeToStream result %s",o),!o&&r&&r!==c?(w("sendPacket :: handle events on `drain` once through callback."),e.stream.once("drain",r)):r&&(w("sendPacket :: invoking cb"),r())}function l(e){e&&(w("flush: queue exists? %b",!!e),Object.keys(e).forEach(function(t){"function"==typeof e[t].cb&&(e[t].cb(new Error("Connection closed")),delete e[t])}))}function d(e){e&&(w("flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function"),Object.keys(e).forEach(function(t){e[t].volatile&&"function"==typeof e[t].cb&&(e[t].cb(new Error("Connection closed")),delete e[t])}))}function p(e,t,r,o){w("storeAndSend :: store packet with cmd %s to outgoingStore",t.cmd);let n=t,i;return"publish"===n.cmd&&(n=S(t),i=a(e,n),i)?r&&r(i):void e.outgoingStore.put(n,function(n){return n?r&&r(n):void(o(),s(e,t,r))})}function c(e){w("nop ::",e)}function u(e,t){const r=this;if(!(this instanceof u))return new u(e,t);for(var o in this.options=t||{},I)this.options[o]="undefined"==typeof this.options[o]?I[o]:t[o];w("MqttClient :: options.protocol",t.protocol),w("MqttClient :: options.protocolVersion",t.protocolVersion),w("MqttClient :: options.username",t.username),w("MqttClient :: options.keepalive",t.keepalive),w("MqttClient :: options.reconnectPeriod",t.reconnectPeriod),w("MqttClient :: options.rejectUnauthorized",t.rejectUnauthorized),w("MqttClient :: options.topicAliasMaximum",t.topicAliasMaximum),this.options.clientId="string"==typeof t.clientId?t.clientId:n(),w("MqttClient :: clientId",this.options.clientId),this.options.customHandleAcks=5===t.protocolVersion&&t.customHandleAcks?t.customHandleAcks:function(){arguments[3](0)},this.streamBuilder=e,this.messageIdProvider="undefined"==typeof this.options.messageIdProvider?new y:this.options.messageIdProvider,this.outgoingStore=t.outgoingStore||new h,this.incomingStore=t.incomingStore||new h,this.queueQoSZero=void 0===t.queueQoSZero||t.queueQoSZero,this._resubscribeTopics={},this.messageIdToTopic={},this.pingTimer=null,this.connected=!1,this.disconnecting=!1,this.queue=[],this.connackTimer=null,this.reconnectTimer=null,this._storeProcessing=!1,this._packetIdsDuringStoreProcessing={},this._storeProcessingQueue=[],this.outgoing={},this._firstConnection=!0,0<t.topicAliasMaximum&&(65535<t.topicAliasMaximum?w("MqttClient :: options.topicAliasMaximum is out of range"):this.topicAliasRecv=new g(t.topicAliasMaximum)),this.on("connect",function(){function e(){const o=t.shift();w("deliver :: entry %o",o);let n=null;if(!o)return void r._resubscribe();n=o.packet,w("deliver :: call _sendPacket for %o",n);let i=!0;n.messageId&&0!==n.messageId&&!r.messageIdProvider.register(n.messageId)&&(i=!1),i?r._sendPacket(n,function(t){o.cb&&o.cb(t),e()}):(w("messageId: %d has already used. The message is skipped and removed.",n.messageId),e())}const t=this.queue;w("connect :: sending queued packets"),e()}),this.on("close",function(){w("close :: connected set to `false`"),this.connected=!1,w("close :: clearing connackTimer"),clearTimeout(this.connackTimer),w("close :: clearing ping timer"),null!==r.pingTimer&&(r.pingTimer.clear(),r.pingTimer=null),this.topicAliasRecv&&this.topicAliasRecv.clear(),w("close :: calling _setupReconnect"),this._setupReconnect()}),f.call(this),w("MqttClient :: setting up stream"),this._setupStream()}const f=e("events").EventEmitter,h=e("./store"),g=e("./topic-alias-recv"),m=e("./topic-alias-send"),b=e("mqtt-packet"),y=e("./default-message-id-provider"),_=e("readable-stream").Writable,k=e("inherits"),C=e("reinterval"),S=e("rfdc/default"),v=e("./validations"),E=e("xtend"),w=e("debug")("mqttjs:client"),T=r?r.nextTick:function(e){setTimeout(e,0)},x=o.setImmediate||function(e){T(e)},I={keepalive:60,reschedulePings:!0,protocolId:"MQTT",protocolVersion:4,reconnectPeriod:1e3,connectTimeout:30000,clean:!0,resubscribe:!0},A=["ECONNREFUSED","EADDRINUSE","ECONNRESET","ENOTFOUND"],R={0:"",1:"Unacceptable protocol version",2:"Identifier rejected",3:"Server unavailable",4:"Bad username or password",5:"Not authorized",16:"No matching subscribers",17:"No subscription existed",128:"Unspecified error",129:"Malformed Packet",130:"Protocol Error",131:"Implementation specific error",132:"Unsupported Protocol Version",133:"Client Identifier not valid",134:"Bad User Name or Password",135:"Not authorized",136:"Server unavailable",137:"Server busy",138:"Banned",139:"Server shutting down",140:"Bad authentication method",141:"Keep Alive timeout",142:"Session taken over",143:"Topic Filter invalid",144:"Topic Name invalid",145:"Packet identifier in use",146:"Packet Identifier not found",147:"Receive Maximum exceeded",148:"Topic Alias invalid",149:"Packet too large",150:"Message rate too high",151:"Quota exceeded",152:"Administrative action",153:"Payload format invalid",154:"Retain not supported",155:"QoS not supported",156:"Use another server",157:"Server moved",158:"Shared Subscriptions not supported",159:"Connection rate exceeded",160:"Maximum connect time",161:"Subscription Identifiers not supported",162:"Wildcard Subscriptions not supported"};k(u,f),u.prototype._setupStream=function(){function e(){if(a.length)T(t);else{const e=i;i=null,e()}}function t(){w("work :: getting next packet in queue");const t=a.shift();if(t)w("work :: packet pulled from queue"),r._handlePacket(t,e);else{w("work :: no packets in queue");const e=i;i=null,w("work :: done flag is %s",!!e),e&&e()}}const r=this,o=new _,n=b.parser(this.options);let i=null;const a=[];w("_setupStream :: calling method to clear reconnect"),this._clearReconnect(),w("_setupStream :: using streamBuilder provided to client to create stream"),this.stream=this.streamBuilder(this),n.on("packet",function(e){w("parser :: on packet push to packets array."),a.push(e)}),o._write=function(e,r,o){i=o,w("writable stream :: parsing buffer"),n.parse(e),t()},w("_setupStream :: pipe stream to writable stream"),this.stream.pipe(o),this.stream.on("error",function(e){w("streamErrorHandler :: error",e.message),A.includes(e.code)?(w("streamErrorHandler :: emitting error"),r.emit("error",e)):c(e)}),this.stream.on("close",function(){w("(%s)stream :: on close",r.options.clientId),d(r.outgoing),w("stream: emit close to MqttClient"),r.emit("close")}),w("_setupStream: sending packet `connect`");const l=Object.create(this.options);if(l.cmd="connect",this.topicAliasRecv&&(!l.properties&&(l.properties={}),this.topicAliasRecv&&(l.properties.topicAliasMaximum=this.topicAliasRecv.max)),s(this,l),n.on("error",this.emit.bind(this,"error")),this.options.properties){if(!this.options.properties.authenticationMethod&&this.options.properties.authenticationData)return r.end(()=>this.emit("error",new Error("Packet has no Authentication Method"))),this;if(this.options.properties.authenticationMethod&&this.options.authPacket&&"object"==typeof this.options.authPacket){const e=E({cmd:"auth",reasonCode:0},this.options.authPacket);s(this,e)}}this.stream.setMaxListeners(1e3),clearTimeout(this.connackTimer),this.connackTimer=setTimeout(function(){w("!!connectTimeout hit!! Calling _cleanUp with force `true`"),r._cleanUp(!0)},this.options.connectTimeout)},u.prototype._handlePacket=function(e,t){const r=this.options;if(5===r.protocolVersion&&r.properties&&r.properties.maximumPacketSize&&r.properties.maximumPacketSize<e.length)return this.emit("error",new Error("exceeding packets size "+e.cmd)),this.end({reasonCode:149,properties:{reasonString:"Maximum packet size was exceeded"}}),this;switch(w("_handlePacket :: emitting packetreceive"),this.emit("packetreceive",e),e.cmd){case"publish":this._handlePublish(e,t);break;case"puback":case"pubrec":case"pubcomp":case"suback":case"unsuback":this._handleAck(e),t();break;case"pubrel":this._handlePubrel(e,t);break;case"connack":this._handleConnack(e),t();break;case"auth":this._handleAuth(e),t();break;case"pingresp":this._handlePingresp(e),t();break;case"disconnect":this._handleDisconnect(e),t();break;default:}},u.prototype._checkDisconnecting=function(e){return this.disconnecting&&(e&&e!==c?e(new Error("client disconnecting")):this.emit("error",new Error("client disconnecting"))),this.disconnecting},u.prototype.publish=function(e,t,r,o){w("publish :: message `%s` to topic `%s`",t,e);const n=this.options;"function"==typeof r&&(o=r,r=null);if(r=E({qos:0,retain:!1,dup:!1},r),this._checkDisconnecting(o))return this;const i=this,a=function(){let a=0;if((1===r.qos||2===r.qos)&&(a=i._nextId(),null===a))return w("No messageId left"),!1;const s={cmd:"publish",topic:e,payload:t,qos:r.qos,retain:r.retain,messageId:a,dup:r.dup};switch(5===n.protocolVersion&&(s.properties=r.properties),w("publish :: qos",r.qos),r.qos){case 1:case 2:i.outgoing[s.messageId]={volatile:!1,cb:o||c},w("MqttClient:publish: packet cmd: %s",s.cmd),i._sendPacket(s,void 0,r.cbStorePut);break;default:w("MqttClient:publish: packet cmd: %s",s.cmd),i._sendPacket(s,o,r.cbStorePut);}return!0};return(this._storeProcessing||0<this._storeProcessingQueue.length||!a())&&this._storeProcessingQueue.push({invoke:a,cbStorePut:r.cbStorePut,callback:o}),this},u.prototype.subscribe=function(){const e=this,t=Array(arguments.length);for(let e=0;e<arguments.length;e++)t[e]=arguments[e];const r=[];let o=t.shift();const n=o.resubscribe;let i=t.pop()||c,a=t.pop();const s=this.options.protocolVersion;delete o.resubscribe,"string"==typeof o&&(o=[o]),"function"!=typeof i&&(a=i,i=c);const l=v.validateTopics(o);if(null!==l)return x(i,new Error("Invalid topic "+l)),this;if(this._checkDisconnecting(i))return w("subscribe: discconecting true"),this;const d={qos:0};if(5===s&&(d.nl=!1,d.rap=!1,d.rh=0),a=E(d,a),Array.isArray(o)?o.forEach(function(t){if(w("subscribe: array topic %s",t),!Object.prototype.hasOwnProperty.call(e._resubscribeTopics,t)||e._resubscribeTopics[t].qos<a.qos||n){const e={topic:t,qos:a.qos};5===s&&(e.nl=a.nl,e.rap=a.rap,e.rh=a.rh,e.properties=a.properties),w("subscribe: pushing topic `%s` and qos `%s` to subs list",e.topic,e.qos),r.push(e)}}):Object.keys(o).forEach(function(t){if(w("subscribe: object topic %s",t),!Object.prototype.hasOwnProperty.call(e._resubscribeTopics,t)||e._resubscribeTopics[t].qos<o[t].qos||n){const e={topic:t,qos:o[t].qos};5===s&&(e.nl=o[t].nl,e.rap=o[t].rap,e.rh=o[t].rh,e.properties=a.properties),w("subscribe: pushing `%s` to subs list",e),r.push(e)}}),!r.length)return i(null,[]),this;const p=function(){const t=e._nextId();if(null===t)return w("No messageId left"),!1;const o={cmd:"subscribe",subscriptions:r,qos:1,retain:!1,dup:!1,messageId:t};if(a.properties&&(o.properties=a.properties),e.options.resubscribe){w("subscribe :: resubscribe true");const t=[];r.forEach(function(r){if(0<e.options.reconnectPeriod){const o={qos:r.qos};5===s&&(o.nl=r.nl||!1,o.rap=r.rap||!1,o.rh=r.rh||0,o.properties=r.properties),e._resubscribeTopics[r.topic]=o,t.push(r.topic)}}),e.messageIdToTopic[o.messageId]=t}return e.outgoing[o.messageId]={volatile:!0,cb:function(e,t){if(!e){const e=t.granted;for(let t=0;t<e.length;t+=1)r[t].qos=e[t]}i(e,r)}},w("subscribe :: call _sendPacket"),e._sendPacket(o),!0};return(this._storeProcessing||0<this._storeProcessingQueue.length||!p())&&this._storeProcessingQueue.push({invoke:p,callback:i}),this},u.prototype.unsubscribe=function(){const e=this,t=Array(arguments.length);for(let e=0;e<arguments.length;e++)t[e]=arguments[e];let r=t.shift(),o=t.pop()||c,n=t.pop();"string"==typeof r&&(r=[r]),"function"!=typeof o&&(n=o,o=c);const i=v.validateTopics(r);if(null!==i)return x(o,new Error("Invalid topic "+i)),this;if(e._checkDisconnecting(o))return this;const a=function(){const t=e._nextId();if(null===t)return w("No messageId left"),!1;const i={cmd:"unsubscribe",qos:1,messageId:t};return"string"==typeof r?i.unsubscriptions=[r]:Array.isArray(r)&&(i.unsubscriptions=r),e.options.resubscribe&&i.unsubscriptions.forEach(function(t){delete e._resubscribeTopics[t]}),"object"==typeof n&&n.properties&&(i.properties=n.properties),e.outgoing[i.messageId]={volatile:!0,cb:o},w("unsubscribe: call _sendPacket"),e._sendPacket(i),!0};return(this._storeProcessing||0<this._storeProcessingQueue.length||!a())&&this._storeProcessingQueue.push({invoke:a,callback:o}),this},u.prototype.end=function(e,t,r){function o(){w("end :: closeStores: closing incoming and outgoing stores"),i.disconnected=!0,i.incomingStore.close(function(e){i.outgoingStore.close(function(t){if(w("end :: closeStores: emitting end"),i.emit("end"),r){w("end :: closeStores: invoking callback with args"),r(e||t)}})}),i._deferredReconnect&&i._deferredReconnect()}function n(){w("end :: (%s) :: finish :: calling _cleanUp with force %s",i.options.clientId,e),i._cleanUp(e,()=>{w("end :: finish :: calling process.nextTick on closeStores"),T(o.bind(i))},t)}const i=this;return(w("end :: (%s)",this.options.clientId),(null==e||"boolean"!=typeof e)&&(r=t||c,t=e,e=!1,"object"!=typeof t&&(r=t,t=null,"function"!=typeof r&&(r=c))),"object"!=typeof t&&(r=t,t=null),w("end :: cb? %s",!!r),r=r||c,this.disconnecting)?(r(),this):(this._clearReconnect(),this.disconnecting=!0,!e&&0<Object.keys(this.outgoing).length?(w("end :: (%s) :: calling finish in 10ms once outgoing is empty",i.options.clientId),this.once("outgoingEmpty",setTimeout.bind(null,n,10))):(w("end :: (%s) :: immediately calling finish",i.options.clientId),n()),this)},u.prototype.removeOutgoingMessage=function(e){const t=this.outgoing[e]?this.outgoing[e].cb:null;return delete this.outgoing[e],this.outgoingStore.del({messageId:e},function(){t(new Error("Message removed"))}),this},u.prototype.reconnect=function(e){w("client reconnect");const t=this,r=function(){e?(t.options.incomingStore=e.incomingStore,t.options.outgoingStore=e.outgoingStore):(t.options.incomingStore=null,t.options.outgoingStore=null),t.incomingStore=t.options.incomingStore||new h,t.outgoingStore=t.options.outgoingStore||new h,t.disconnecting=!1,t.disconnected=!1,t._deferredReconnect=null,t._reconnect()};return this.disconnecting&&!this.disconnected?this._deferredReconnect=r:r(),this},u.prototype._reconnect=function(){w("_reconnect: emitting reconnect to client"),this.emit("reconnect"),this.connected?(this.end(()=>{this._setupStream()}),w("client already connected. disconnecting first.")):(w("_reconnect: calling _setupStream"),this._setupStream())},u.prototype._setupReconnect=function(){const e=this;e.disconnecting||e.reconnectTimer||!(0<e.options.reconnectPeriod)?w("_setupReconnect :: doing nothing..."):(!this.reconnecting&&(w("_setupReconnect :: emit `offline` state"),this.emit("offline"),w("_setupReconnect :: set `reconnecting` to `true`"),this.reconnecting=!0),w("_setupReconnect :: setting reconnectTimer for %d ms",e.options.reconnectPeriod),e.reconnectTimer=setInterval(function(){w("reconnectTimer :: reconnect triggered!"),e._reconnect()},e.options.reconnectPeriod))},u.prototype._clearReconnect=function(){w("_clearReconnect : clearing reconnect timer"),this.reconnectTimer&&(clearInterval(this.reconnectTimer),this.reconnectTimer=null)},u.prototype._cleanUp=function(e,t){const r=arguments[2];if(t&&(w("_cleanUp :: done callback provided for on stream close"),this.stream.on("close",t)),w("_cleanUp :: forced? %s",e),e)0===this.options.reconnectPeriod&&this.options.clean&&l(this.outgoing),w("_cleanUp :: (%s) :: destroying stream",this.options.clientId),this.stream.destroy();else{const e=E({cmd:"disconnect"},r);w("_cleanUp :: (%s) :: call _sendPacket with disconnect packet",this.options.clientId),this._sendPacket(e,x.bind(null,this.stream.end.bind(this.stream)))}this.disconnecting||(w("_cleanUp :: client not disconnecting. Clearing and resetting reconnect."),this._clearReconnect(),this._setupReconnect()),null!==this.pingTimer&&(w("_cleanUp :: clearing pingTimer"),this.pingTimer.clear(),this.pingTimer=null),t&&!this.connected&&(w("_cleanUp :: (%s) :: removing stream `done` callback `close` listener",this.options.clientId),this.stream.removeListener("close",t),t())},u.prototype._sendPacket=function(e,t,r){w("_sendPacket :: (%s) ::  start",this.options.clientId),r=r||c,t=t||c;const o=i(this,e);if(o)return void t(o);if(!this.connected)return"auth"===e.cmd?(this._shiftPingInterval(),void s(this,e,t)):(w("_sendPacket :: client not connected. Storing packet offline."),void this._storePacket(e,t,r));switch(this._shiftPingInterval(),e.cmd){case"publish":break;case"pubrel":return void p(this,e,t,r);default:return void s(this,e,t);}switch(e.qos){case 2:case 1:p(this,e,t,r);break;case 0:default:s(this,e,t);}w("_sendPacket :: (%s) ::  end",this.options.clientId)},u.prototype._storePacket=function(e,t,r){w("_storePacket :: packet: %o",e),w("_storePacket :: cb? %s",!!t),r=r||c;let o=e;if("publish"===o.cmd){o=S(e);const r=a(this,o);if(r)return t&&t(r)}0===(o.qos||0)&&this.queueQoSZero||"publish"!==o.cmd?this.queue.push({packet:o,cb:t}):0<o.qos?(t=this.outgoing[o.messageId]?this.outgoing[o.messageId].cb:null,this.outgoingStore.put(o,function(e){return e?t&&t(e):void r()})):t&&t(new Error("No connection to broker"))},u.prototype._setupPingTimer=function(){w("_setupPingTimer :: keepalive %d (seconds)",this.options.keepalive);const e=this;!this.pingTimer&&this.options.keepalive&&(this.pingResp=!0,this.pingTimer=C(function(){e._checkPing()},1e3*this.options.keepalive))},u.prototype._shiftPingInterval=function(){this.pingTimer&&this.options.keepalive&&this.options.reschedulePings&&this.pingTimer.reschedule(1e3*this.options.keepalive)},u.prototype._checkPing=function(){w("_checkPing :: checking ping..."),this.pingResp?(w("_checkPing :: ping response received. Clearing flag and sending `pingreq`"),this.pingResp=!1,this._sendPacket({cmd:"pingreq"})):(w("_checkPing :: calling _cleanUp with force true"),this._cleanUp(!0))},u.prototype._handlePingresp=function(){this.pingResp=!0},u.prototype._handleConnack=function(e){w("_handleConnack");const t=this.options,r=t.protocolVersion,o=5===r?e.reasonCode:e.returnCode;if(clearTimeout(this.connackTimer),delete this.topicAliasSend,e.properties){if(e.properties.topicAliasMaximum){if(65535<e.properties.topicAliasMaximum)return void this.emit("error",new Error("topicAliasMaximum from broker is out of range"));0<e.properties.topicAliasMaximum&&(this.topicAliasSend=new m(e.properties.topicAliasMaximum))}e.properties.serverKeepAlive&&t.keepalive&&(t.keepalive=e.properties.serverKeepAlive,this._shiftPingInterval()),e.properties.maximumPacketSize&&(!t.properties&&(t.properties={}),t.properties.maximumPacketSize=e.properties.maximumPacketSize)}if(0===o)this.reconnecting=!1,this._onConnect(e);else if(0<o){const e=new Error("Connection refused: "+R[o]);e.code=o,this.emit("error",e)}},u.prototype._handleAuth=function(e){const t=this.options,r=t.protocolVersion,o=5===r?e.reasonCode:e.returnCode;if(5!==r){const e=new Error("Protocol error: Auth packets are only supported in MQTT 5. Your version:"+r);return e.code=o,void this.emit("error",e)}const n=this;this.handleAuth(e,function(e,t){if(e)return void n.emit("error",e);if(24===o)n.reconnecting=!1,n._sendPacket(t);else{const t=new Error("Connection refused: "+R[o]);e.code=o,n.emit("error",t)}})},u.prototype.handleAuth=function(e,t){t()},u.prototype._handlePublish=function(e,t){w("_handlePublish: packet %o",e),t="undefined"==typeof t?c:t;let r=e.topic.toString();const o=e.payload,n=e.qos,i=e.messageId,a=this,s=this.options,l=[0,16,128,131,135,144,145,151,153];if(5===this.options.protocolVersion){let t;if(e.properties&&(t=e.properties.topicAlias),"undefined"!=typeof t)if(0===r.length){if(0<t&&65535>=t){const e=this.topicAliasRecv.getTopicByAlias(t);if(e)r=e,w("_handlePublish :: topic complemented by alias. topic: %s - alias: %d",r,t);else return w("_handlePublish :: unregistered topic alias. alias: %d",t),void this.emit("error",new Error("Received unregistered Topic Alias"))}else return w("_handlePublish :: topic alias out of range. alias: %d",t),void this.emit("error",new Error("Received Topic Alias is out of range"));}else if(this.topicAliasRecv.put(r,t))w("_handlePublish :: registered topic: %s - alias: %d",r,t);else return w("_handlePublish :: topic alias out of range. alias: %d",t),void this.emit("error",new Error("Received Topic Alias is out of range"))}switch(w("_handlePublish: qos %d",n),n){case 2:{s.customHandleAcks(r,o,e,function(r,o){return r instanceof Error||(o=r,r=null),r?a.emit("error",r):-1===l.indexOf(o)?a.emit("error",new Error("Wrong reason code for pubrec")):void(o?a._sendPacket({cmd:"pubrec",messageId:i,reasonCode:o},t):a.incomingStore.put(e,function(){a._sendPacket({cmd:"pubrec",messageId:i},t)}))});break}case 1:{s.customHandleAcks(r,o,e,function(n,s){return n instanceof Error||(s=n,n=null),n?a.emit("error",n):-1===l.indexOf(s)?a.emit("error",new Error("Wrong reason code for puback")):void(!s&&a.emit("message",r,o,e),a.handleMessage(e,function(e){return e?t&&t(e):void a._sendPacket({cmd:"puback",messageId:i,reasonCode:s},t)}))});break}case 0:this.emit("message",r,o,e),this.handleMessage(e,t);break;default:w("_handlePublish: unknown QoS. Doing nothing.");}},u.prototype.handleMessage=function(e,t){t()},u.prototype._handleAck=function(e){const t=e.messageId,r=e.cmd;let o=null;const n=this.outgoing[t]?this.outgoing[t].cb:null,i=this;let a;if(!n)return void w("_handleAck :: Server sent an ack in error. Ignoring.");switch(w("_handleAck :: packet type",r),r){case"pubcomp":case"puback":{const r=e.reasonCode;r&&0<r&&16!==r&&(a=new Error("Publish error: "+R[r]),a.code=r,n(a,e)),delete this.outgoing[t],this.outgoingStore.del(e,n),this.messageIdProvider.deallocate(t),this._invokeStoreProcessingQueue();break}case"pubrec":{o={cmd:"pubrel",qos:2,messageId:t};const r=e.reasonCode;r&&0<r&&16!==r?(a=new Error("Publish error: "+R[r]),a.code=r,n(a,e)):this._sendPacket(o);break}case"suback":{delete this.outgoing[t],this.messageIdProvider.deallocate(t);for(let r=0;r<e.granted.length;r++)if(0!=(128&e.granted[r])){const e=this.messageIdToTopic[t];e&&e.forEach(function(e){delete i._resubscribeTopics[e]})}this._invokeStoreProcessingQueue(),n(null,e);break}case"unsuback":{delete this.outgoing[t],this.messageIdProvider.deallocate(t),this._invokeStoreProcessingQueue(),n(null);break}default:i.emit("error",new Error("unrecognized packet type"));}this.disconnecting&&0===Object.keys(this.outgoing).length&&this.emit("outgoingEmpty")},u.prototype._handlePubrel=function(e,t){w("handling pubrel packet"),t="undefined"==typeof t?c:t;const r=e.messageId,o=this,n={cmd:"pubcomp",messageId:r};o.incomingStore.get(e,function(e,r){e?o._sendPacket(n,t):(o.emit("message",r.topic,r.payload,r),o.handleMessage(r,function(e){return e?t(e):void(o.incomingStore.del(r,c),o._sendPacket(n,t))}))})},u.prototype._handleDisconnect=function(e){this.emit("disconnect",e)},u.prototype._nextId=function(){return this.messageIdProvider.allocate()},u.prototype.getLastMessageId=function(){return this.messageIdProvider.getLastAllocated()},u.prototype._resubscribe=function(){w("_resubscribe");const e=Object.keys(this._resubscribeTopics);if(!this._firstConnection&&(this.options.clean||5===this.options.protocolVersion&&!this.connackPacket.sessionPresent)&&0<e.length)if(!this.options.resubscribe)this._resubscribeTopics={};else if(5===this.options.protocolVersion){w("_resubscribe: protocolVersion 5");for(let t=0;t<e.length;t++){const r={};r[e[t]]=this._resubscribeTopics[e[t]],r.resubscribe=!0,this.subscribe(r,{properties:r[e[t]].properties})}}else this._resubscribeTopics.resubscribe=!0,this.subscribe(this._resubscribeTopics);this._firstConnection=!1},u.prototype._onConnect=function(e){function t(){function o(){r._storeProcessing=!1,r._packetIdsDuringStoreProcessing={}}function n(){a.destroy(),a=null,r._flushStoreProcessingQueue(),o()}function i(){if(!a)return;r._storeProcessing=!0;const e=a.read(1);let t;return e?r._packetIdsDuringStoreProcessing[e.messageId]?void i():void(r.disconnecting||r.reconnectTimer?a.destroy&&a.destroy():(t=r.outgoing[e.messageId]?r.outgoing[e.messageId].cb:null,r.outgoing[e.messageId]={volatile:!1,cb:function(e,r){t&&t(e,r),i()}},r._packetIdsDuringStoreProcessing[e.messageId]=!0,r.messageIdProvider.register(e.messageId)?r._sendPacket(e):w("messageId: %d has already used.",e.messageId))):void a.once("readable",i)}let a=r.outgoingStore.createStream();r.once("close",n),a.on("error",function(e){o(),r._flushStoreProcessingQueue(),r.removeListener("close",n),r.emit("error",e)}),a.on("end",function(){let i=!0;for(const e in r._packetIdsDuringStoreProcessing)if(!r._packetIdsDuringStoreProcessing[e]){i=!1;break}i?(o(),r.removeListener("close",n),r._invokeAllStoreProcessingQueue(),r.emit("connect",e)):t()}),i()}if(this.disconnected)return void this.emit("connect",e);const r=this;this.connackPacket=e,this.messageIdProvider.clear(),this._setupPingTimer(),this.connected=!0,t()},u.prototype._invokeStoreProcessingQueue=function(){if(0<this._storeProcessingQueue.length){const e=this._storeProcessingQueue[0];if(e&&e.invoke())return this._storeProcessingQueue.shift(),!0}return!1},u.prototype._invokeAllStoreProcessingQueue=function(){for(;this._invokeStoreProcessingQueue(););},u.prototype._flushStoreProcessingQueue=function(){for(const e of this._storeProcessingQueue)e.cbStorePut&&e.cbStorePut(new Error("Connection closed")),e.callback&&e.callback(new Error("Connection closed"));this._storeProcessingQueue.splice(0)},t.exports=u}).call(this)}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./default-message-id-provider":75,"./store":76,"./topic-alias-recv":77,"./topic-alias-send":78,"./validations":79,_process:85,debug:41,events:45,inherits:47,"mqtt-packet":63,"readable-stream":103,reinterval:104,"rfdc/default":105,xtend:115}],69:[function(e,t){'use strict';function r(){const e=new l;return e._write=function(e,t,r){c.sendSocketMessage({data:e.buffer,success:function(){r()},fail:function(){r(new Error)}})},e._flush=function(e){c.closeSocket({success:function(){e()}})},e}function o(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}function n(e,t){const r="alis"===e.protocol?"wss":"ws";let o=r+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(o=r+"://"+e.hostname+":"+e.port+e.path),"function"==typeof e.transformWsUrl&&(o=e.transformWsUrl(o,e,t)),o}function i(){p||(p=!0,c.onSocketOpen(function(){f.setReadable(u),f.setWritable(u),f.emit("connect")}),c.onSocketMessage(function(e){if("string"==typeof e.data){const t=s.from(e.data,"base64");u.push(t)}else{const t=new FileReader;t.addEventListener("load",function(){let e=t.result;e=e instanceof ArrayBuffer?s.from(e):s.from(e,"utf8"),u.push(e)}),t.readAsArrayBuffer(e.data)}}),c.onSocketClose(function(){f.end(),f.destroy()}),c.onSocketError(function(e){f.destroy(e)}))}function a(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");const a="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";o(t);const s=n(t,e);return c=t.my,c.connectSocket({url:s,protocols:a}),u=r(),f=d.obj(),i(),f}const{Buffer:s}=e("buffer"),l=e("readable-stream").Transform,d=e("duplexify");let p=!1,c,u,f;t.exports=a},{buffer:40,duplexify:43,"readable-stream":103}],70:[function(e,t){(function(r){(function(){'use strict';function o(e){let t;e.auth&&(t=e.auth.match(/^(.+):(.+)$/),t?(e.username=t[1],e.password=t[2]):e.username=e.auth)}function n(e,t){function r(e){return t.servers&&((!e._reconnectCount||e._reconnectCount===t.servers.length)&&(e._reconnectCount=0),t.host=t.servers[e._reconnectCount].host,t.port=t.servers[e._reconnectCount].port,t.protocol=t.servers[e._reconnectCount].protocol?t.servers[e._reconnectCount].protocol:t.defaultProtocol,t.hostname=t.host,e._reconnectCount++),d("calling streambuilder for",t.protocol),p[t.protocol](e,t)}if(d("connecting to an MQTT broker..."),"object"!=typeof e||t||(t=e,e=null),t=t||{},e){const r=s.parse(e,!0);if(null!=r.port&&(r.port=+r.port),t=l(r,t),null===t.protocol)throw new Error("Missing protocol");t.protocol=t.protocol.replace(/:$/,"")}if(o(t),t.query&&"string"==typeof t.query.clientId&&(t.clientId=t.query.clientId),t.cert&&t.key)if(!t.protocol)throw new Error("Missing secure protocol key");else if(-1===["mqtts","wss","wxs","alis"].indexOf(t.protocol))switch(t.protocol){case"mqtt":t.protocol="mqtts";break;case"ws":t.protocol="wss";break;case"wx":t.protocol="wxs";break;case"ali":t.protocol="alis";break;default:throw new Error("Unknown protocol for secure connection: \""+t.protocol+"\"!");}if(!p[t.protocol]){const e=-1!==["mqtts","wss"].indexOf(t.protocol);t.protocol=["mqtt","mqtts","ws","wss","wx","wxs","ali","alis"].filter(function(t,r){return!(e&&0==r%2)&&"function"==typeof p[t]})[0]}if(!1===t.clean&&!t.clientId)throw new Error("Missing clientId for unclean clients");t.protocol&&(t.defaultProtocol=t.protocol);const n=new i(r,t);return n.on("error",function(){}),n}const i=e("../client"),a=e("../store"),s=e("url"),l=e("xtend"),d=e("debug")("mqttjs"),p={};"undefined"!=typeof r&&"browser"!==r.title||"function"!=typeof __webpack_require__?(p.mqtt=e("./tcp"),p.tcp=e("./tcp"),p.ssl=e("./tls"),p.tls=e("./tls"),p.mqtts=e("./tls")):(p.wx=e("./wx"),p.wxs=e("./wx"),p.ali=e("./ali"),p.alis=e("./ali")),p.ws=e("./ws"),p.wss=e("./ws"),t.exports=n,t.exports.connect=n,t.exports.MqttClient=i,t.exports.Store=a}).call(this)}).call(this,e("_process"))},{"../client":68,"../store":76,"./ali":69,"./tcp":71,"./tls":72,"./ws":73,"./wx":74,_process:85,debug:41,url:110,xtend:115}],71:[function(e,t){'use strict';const r=e("net"),o=e("debug")("mqttjs:tcp");t.exports=function(e,t){t.port=t.port||1883,t.hostname=t.hostname||t.host||"localhost";const n=t.port,i=t.hostname;return o("port %d and host %s",n,i),r.createConnection(n,i)}},{debug:41,net:38}],72:[function(e,t){'use strict';const r=e("tls"),o=e("net"),n=e("debug")("mqttjs:tls");t.exports=function(e,t){function i(r){t.rejectUnauthorized&&e.emit("error",r),a.end()}t.port=t.port||8883,t.host=t.hostname||t.host||"localhost",0===o.isIP(t.host)&&(t.servername=t.host),t.rejectUnauthorized=!1!==t.rejectUnauthorized,delete t.path,n("port %d host %s rejectUnauthorized %b",t.port,t.host,t.rejectUnauthorized);const a=r.connect(t);return a.on("secureConnect",function(){t.rejectUnauthorized&&!a.authorized?a.emit("error",new Error("TLS not authorized")):a.removeListener("error",i)}),a.on("error",i),a}},{debug:41,net:38,tls:38}],73:[function(e,t){(function(r){(function(){'use strict';function o(e,t){let r=e.protocol+"://"+e.hostname+":"+e.port+e.path;return"function"==typeof e.transformWsUrl&&(r=e.transformWsUrl(r,e,t)),r}function n(e){const t=e;return e.hostname||(t.hostname="localhost"),e.port||("wss"===e.protocol?t.port=443:t.port=80),e.path||(t.path="/"),e.wsOptions||(t.wsOptions={}),h||"wss"!==e.protocol||f.forEach(function(r){Object.prototype.hasOwnProperty.call(e,r)&&!Object.prototype.hasOwnProperty.call(e.wsOptions,r)&&(t.wsOptions[r]=e[r])}),t}function i(e){const t=n(e);if(t.hostname||(t.hostname=t.host),!t.hostname){if("undefined"==typeof document)throw new Error("Could not determine host. Specify host manually.");const e=new URL(document.URL);t.hostname=e.hostname,t.port||(t.port=e.port)}return void 0===t.objectMode&&(t.objectMode=!0!==t.binary&&void 0!==t.binary),t}function a(e,t,r){p("createWebSocket"),p("protocol: "+r.protocolId+" "+r.protocolVersion);const o="MQIsdp"===r.protocolId&&3===r.protocolVersion?"mqttv3.1":"mqtt";p("creating new Websocket for url: "+t+" and protocol: "+o);const n=new d(t,[o],r.wsOptions);return n}function s(e,t){const r="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt",n=o(t,e),i=new WebSocket(n,[r]);return i.binaryType="arraybuffer",i}const{Buffer:l}=e("buffer"),d=e("ws"),p=e("debug")("mqttjs:ws"),c=e("duplexify"),u=e("readable-stream").Transform,f=["rejectUnauthorized","ca","cert","key","pfx","passphrase"],h="undefined"!=typeof r&&"browser"===r.title||"function"==typeof __webpack_require__;t.exports=h?function(e,t){function r(){h.setReadable(k),h.setWritable(k),h.emit("connect")}function o(){h.end(),h.destroy()}function n(e){h.destroy(e)}function a(e){let t=e.data;t=t instanceof ArrayBuffer?l.from(t):l.from(t,"utf8"),k.push(t)}function d(e,t){const r=Array(e.length);for(let o=0;o<e.length;o++)r[o]="string"==typeof e[o].chunk?l.from(e[o],"utf8"):e[o].chunk;this._write(l.concat(r),"binary",t)}function f(e,t,r){_.bufferedAmount>m&&setTimeout(f,b,e,t,r),y&&"string"==typeof e&&(e=l.from(e,"utf8"));try{_.send(e)}catch(e){return r(e)}r()}p("browserStreamBuilder");let h;const g=i(t),m=g.browserBufferSize||524288,b=t.browserBufferTimeout||1e3,y=!t.objectMode,_=s(e,t),k=function(e,t,r){const o=new u({objectModeMode:e.objectMode});return o._write=t,o._flush=r,o}(t,f,function(e){_.close(),e()});t.objectMode||(k._writev=d),k.on("close",()=>{_.close()});const C="undefined"!=typeof _.addEventListener;return _.readyState===_.OPEN?h=k:(h=h=c(void 0,void 0,t),!t.objectMode&&(h._writev=d),C?_.addEventListener("open",r):_.onopen=r),h.socket=_,C?(_.addEventListener("close",o),_.addEventListener("error",n),_.addEventListener("message",a)):(_.onclose=o,_.onerror=n,_.onmessage=a),h}:function(e,t){p("streamBuilder");const r=n(t),i=o(r,e),s=a(e,i,r),l=d.createWebSocketStream(s,r.wsOptions);return l.url=i,s.on("close",()=>{l.destroy()}),l}}).call(this)}).call(this,e("_process"))},{_process:85,buffer:40,debug:41,duplexify:43,"readable-stream":103,ws:114}],74:[function(e,t){'use strict';function r(){const e=new l;return e._write=function(e,t,r){p.send({data:e.buffer,success:function(){r()},fail:function(e){r(new Error(e))}})},e._flush=function(e){p.close({success:function(){e()}})},e}function o(e){e.hostname||(e.hostname="localhost"),e.path||(e.path="/"),e.wsOptions||(e.wsOptions={})}function n(e,t){const r="wxs"===e.protocol?"wss":"ws";let o=r+"://"+e.hostname+e.path;return e.port&&80!==e.port&&443!==e.port&&(o=r+"://"+e.hostname+":"+e.port+e.path),"function"==typeof e.transformWsUrl&&(o=e.transformWsUrl(o,e,t)),o}function i(){p.onOpen(function(){u.setReadable(c),u.setWritable(c),u.emit("connect")}),p.onMessage(function(e){let t=e.data;t=t instanceof ArrayBuffer?s.from(t):s.from(t,"utf8"),c.push(t)}),p.onClose(function(){u.end(),u.destroy()}),p.onError(function(e){u.destroy(new Error(e.errMsg))})}function a(e,t){if(t.hostname=t.hostname||t.host,!t.hostname)throw new Error("Could not determine host. Specify host manually.");const a="MQIsdp"===t.protocolId&&3===t.protocolVersion?"mqttv3.1":"mqtt";o(t);const s=n(t,e);p=wx.connectSocket({url:s,protocols:[a]}),c=r(),u=d.obj(),u._destroy=function(e,t){p.close({success:function(){t&&t(e)}})};const l=u.destroy;return u.destroy=function(){u.destroy=l;const e=this;setTimeout(function(){p.close({fail:function(){e._destroy(new Error)}})},0)}.bind(u),i(),u}const{Buffer:s}=e("buffer"),l=e("readable-stream").Transform,d=e("duplexify");let p,c,u;t.exports=a},{buffer:40,duplexify:43,"readable-stream":103}],75:[function(e,t){'use strict';function r(){return this instanceof r?void(this.nextId=Math.max(1,Math.floor(65535*Math.random()))):new r}r.prototype.allocate=function(){const e=this.nextId++;return 65536===this.nextId&&(this.nextId=1),e},r.prototype.getLastAllocated=function(){return 1===this.nextId?65535:this.nextId-1},r.prototype.register=function(){return!0},r.prototype.deallocate=function(){},r.prototype.clear=function(){},t.exports=r},{}],76:[function(e,t){'use strict';function r(e){return this instanceof r?void(this.options=e||{},this.options=o(s,e),this._inflights=new Map):new r(e)}const o=e("xtend"),n=e("readable-stream").Readable,a={objectMode:!0},s={clean:!0};r.prototype.put=function(e,t){return this._inflights.set(e.messageId,e),t&&t(),this},r.prototype.createStream=function(){const e=new n(a),t=[];let r=!1,o=0;return this._inflights.forEach(function(e){t.push(e)}),e._read=function(){!r&&o<t.length?this.push(t[o++]):this.push(null)},e.destroy=function(){if(r)return;const e=this;r=!0,setTimeout(function(){e.emit("close")},0)},e},r.prototype.del=function(e,t){return e=this._inflights.get(e.messageId),e?(this._inflights.delete(e.messageId),t(null,e)):t&&t(new Error("missing packet")),this},r.prototype.get=function(e,t){return e=this._inflights.get(e.messageId),e?t(null,e):t&&t(new Error("missing packet")),this},r.prototype.close=function(e){this.options.clean&&(this._inflights=null),e&&e()},t.exports=r},{"readable-stream":103,xtend:115}],77:[function(e,t){'use strict';function r(e){return this instanceof r?void(this.aliasToTopic={},this.max=e):new r(e)}r.prototype.put=function(e,t){return!(0===t||t>this.max)&&(this.aliasToTopic[t]=e,this.length=Object.keys(this.aliasToTopic).length,!0)},r.prototype.getTopicByAlias=function(e){return this.aliasToTopic[e]},r.prototype.clear=function(){this.aliasToTopic={}},t.exports=r},{}],78:[function(e,t){'use strict';function r(e){return this instanceof r?void(0<e&&(this.aliasToTopic=new o({max:e}),this.topicToAlias={},this.numberAllocator=new n(1,e),this.max=e,this.length=0)):new r(e)}const o=e("lru-cache"),n=e("number-allocator").NumberAllocator;r.prototype.put=function(e,t){if(0===t||t>this.max)return!1;const r=this.aliasToTopic.get(t);return r&&delete this.topicToAlias[r],this.aliasToTopic.set(t,e),this.topicToAlias[e]=t,this.numberAllocator.use(t),this.length=this.aliasToTopic.length,!0},r.prototype.getTopicByAlias=function(e){return this.aliasToTopic.get(e)},r.prototype.getAliasByTopic=function(e){const t=this.topicToAlias[e];return"undefined"!=typeof t&&this.aliasToTopic.get(t),t},r.prototype.clear=function(){this.aliasToTopic.reset(),this.topicToAlias={},this.numberAllocator.clear(),this.length=0},r.prototype.getLruAlias=function(){const e=this.numberAllocator.firstVacant();return e?e:this.aliasToTopic.keys()[this.aliasToTopic.length-1]},t.exports=r},{"lru-cache":60,"number-allocator":81}],79:[function(e,t){'use strict';function r(e){const t=e.split("/");for(let r=0;r<t.length;r++)if("+"!==t[r]){if("#"===t[r])return r===t.length-1;if(-1!==t[r].indexOf("+")||-1!==t[r].indexOf("#"))return!1}return!0}t.exports={validateTopics:function(e){if(0===e.length)return"empty_topic_list";for(let t=0;t<e.length;t++)if(!r(e[t]))return e[t];return null}}},{}],80:[function(e,t){function r(e){if(e+="",!(100<e.length)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),o=(t[2]||"ms").toLowerCase();return"years"===o||"year"===o||"yrs"===o||"yr"===o||"y"===o?31557600000*r:"weeks"===o||"week"===o||"w"===o?604800000*r:"days"===o||"day"===o||"d"===o?86400000*r:"hours"===o||"hour"===o||"hrs"===o||"hr"===o||"h"===o?3600000*r:"minutes"===o||"minute"===o||"mins"===o||"min"===o||"m"===o?60000*r:"seconds"===o||"second"===o||"secs"===o||"sec"===o||"s"===o?1000*r:"milliseconds"===o||"millisecond"===o||"msecs"===o||"msec"===o||"ms"===o?r:void 0}}}function o(e){var t=Math.abs(e);return 86400000<=t?Math.round(e/86400000)+"d":3600000<=t?Math.round(e/3600000)+"h":60000<=t?Math.round(e/60000)+"m":1000<=t?Math.round(e/1000)+"s":e+"ms"}function n(e){var t=Math.abs(e);return 86400000<=t?i(e,t,86400000,"day"):3600000<=t?i(e,t,3600000,"hour"):60000<=t?i(e,t,60000,"minute"):1000<=t?i(e,t,1000,"second"):e+" ms"}function i(e,t,r,o){return Math.round(e/r)+" "+o+(t>=1.5*r?"s":"")}var a=24*(60*60000);t.exports=function(e,t){t=t||{};var i=typeof e;if("string"==i&&0<e.length)return r(e);if("number"===i&&isFinite(e))return t.long?n(e):o(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],81:[function(e,t){const r=e("./lib/number-allocator.js");t.exports.NumberAllocator=r},{"./lib/number-allocator.js":82}],82:[function(e,t){'use strict';function r(e,t){this.low=e,this.high=t}function o(e,t){return this instanceof o?void(this.min=e,this.max=t,this.ss=new n([],(e,t)=>e.compare(t)),i("Create"),this.clear()):new o(e,t)}const n=e("js-sdsl").Set,i=e("debug")("number-allocator:trace"),a=e("debug")("number-allocator:error");r.prototype.equals=function(e){return this.low===e.low&&this.high===e.high},r.prototype.compare=function(e){return this.low<e.low&&this.high<e.low?-1:e.low<this.low&&e.high<this.low?1:0},o.prototype.firstVacant=function(){return 0===this.ss.size()?null:this.ss.front().low},o.prototype.alloc=function(){if(0===this.ss.size())return i("alloc():empty"),null;const e=this.ss.front(),t=e.low;return t+1<=e.high?++e.low:this.ss.eraseElementByPos(0),i("alloc():"+t),t},o.prototype.use=function(e){const t=new r(e,e),o=this.ss.lowerBound(t);if(o){if(o.equals(t))return this.ss.eraseElementByValue(o),i("use():"+e),!0;if(o.low>e)return!1;if(o.low===e)return++o.low,i("use():"+e),!0;if(o.high===e)return--o.high,i("use():"+e),!0;const n=o.low;return o.low=e+1,this.ss.insert(new r(n,e-1)),i("use():"+e),!0}return i("use():failed"),!1},o.prototype.free=function(e){if(e<this.min||e>this.max)return void a("free():"+e+" is out of range");const t=new r(e,e),o=this.ss.lowerBound(t);if(o){if(o.low<=e&&e<=o.high)return void a("free():"+e+" has already been vacant");if(o===this.ss.front())e+1===o.low?--o.low:this.ss.insert(t);else{const r=this.ss.reverseLowerBound(t);r.high+1===e?e+1===o.low?(this.ss.eraseElementByValue(r),o.low=r.low):r.high=e:e+1===o.low?o.low=e:this.ss.insert(t)}}else{if(o===this.ss.front())return void this.ss.insert(t);const r=this.ss.reverseLowerBound(t);r.high+1===e?r.high=e:this.ss.insert(t)}i("free():"+e)},o.prototype.clear=function(){i("clear()"),this.ss.clear(),this.ss.insert(new r(this.min,this.max))},o.prototype.intervalCount=function(){return this.ss.size()},o.prototype.dump=function(){console.log("length:"+this.ss.size());for(const e of this.ss)console.log(e)},t.exports=o},{debug:41,"js-sdsl":59}],83:[function(e,t){function r(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}var n=e("wrappy");t.exports=n(r),t.exports.strict=n(o),r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})})},{wrappy:113}],84:[function(e,t){(function(e){(function(){'use strict';t.exports="undefined"!=typeof e&&e.version&&0!==e.version.indexOf("v0.")&&(0!==e.version.indexOf("v1.")||0===e.version.indexOf("v1.8."))?e:{nextTick:function(t,r,o,n){if("function"!=typeof t)throw new TypeError("\"callback\" argument must be a function");var a=arguments.length,s,l;switch(a){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,r)});case 3:return e.nextTick(function(){t.call(null,r,o)});case 4:return e.nextTick(function(){t.call(null,r,o,n)});default:for(s=Array(a-1),l=0;l<s.length;)s[l++]=arguments[l];return e.nextTick(function(){t.apply(null,s)});}}}}).call(this)}).call(this,e("_process"))},{_process:85}],85:[function(e,t){function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function n(t){if(c===setTimeout)return setTimeout(t,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(r){try{return c.call(null,t,0)}catch(r){return c.call(this,t,0)}}}function i(t){if(u===clearTimeout)return clearTimeout(t);if((u===o||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{return u(t)}catch(r){try{return u.call(null,t)}catch(r){return u.call(this,t)}}}function a(){h&&m&&(h=!1,m.length?f=m.concat(f):g=-1,f.length&&s())}function s(){if(!h){var e=n(a);h=!0;for(var t=f.length;t;){for(m=f,f=[];++g<t;)m&&m[g].run();g=-1,t=f.length}m=null,h=!1,i(e)}}function l(e,t){this.fun=e,this.array=t}function d(){}var p=t.exports={},c,u;(function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(t){c=r}try{u="function"==typeof clearTimeout?clearTimeout:o}catch(t){u=o}})();var f=[],h=!1,g=-1,m;p.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new l(e,t)),1!==f.length||h||n(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=d,p.addListener=d,p.once=d,p.off=d,p.removeListener=d,p.removeAllListeners=d,p.emit=d,p.prependListener=d,p.prependOnceListener=d,p.listeners=function(){return[]},p.binding=function(){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],86:[function(e,t){'use strict';function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,n,a){t=t||"&",n=n||"=";var s={};if("string"!=typeof e||0===e.length)return s;e=e.split(t);var l=1e3;a&&"number"==typeof a.maxKeys&&(l=a.maxKeys);var d=e.length;0<l&&d>l&&(d=l);for(var p=0;p<d;++p){var c=e[p].replace(/\+/g,"%20"),u=c.indexOf(n),f,h,g,m;0<=u?(f=c.substr(0,u),h=c.substr(u+1)):(f=c,h=""),g=decodeURIComponent(f),m=decodeURIComponent(h),r(s,g)?o(s[g])?s[g].push(m):s[g]=[s[g],m]:s[g]=m}return s};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],87:[function(e,t){'use strict';function r(e,t){if(e.map)return e.map(t);for(var r=[],o=0;o<e.length;o++)r.push(t(e[o],o));return r}var o=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return"";}};t.exports=function(e,t,a,s){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e?r(i(e),function(i){var s=encodeURIComponent(o(i))+a;return n(e[i])?r(e[i],function(e){return s+encodeURIComponent(o(e))}).join(t):s+encodeURIComponent(o(e[i]))}).join(t):s?encodeURIComponent(o(s))+a+encodeURIComponent(o(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},i=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],88:[function(e,t,r){'use strict';r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":86,"./encode":87}],89:[function(e,t){'use strict';function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function o(e,t,o){function n(e,r,o){return"string"==typeof t?t:t(e,r,o)}o||(o=Error);var i=function(e){function t(t,r,o){return e.call(this,n(t,r,o))||this}return r(t,e),t}(o);i.prototype.name=o.name,i.prototype.code=e,l[e]=i}function n(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map(function(e){return e+""}),2<r?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(e+"")}function i(e,t,r){return e.substr(!r||0>r?0:+r,t.length)===t}function a(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}function s(e,t,r){return"number"!=typeof r&&(r=0),!(r+t.length>e.length)&&-1!==e.indexOf(t,r)}var l={};o("ERR_INVALID_OPT_VALUE",function(e,t){return"The value \""+t+"\" is invalid for option \""+e+"\""},TypeError),o("ERR_INVALID_ARG_TYPE",function(e,t,r){var o;"string"==typeof t&&i(t,"not ")?(o="must not be",t=t.replace(/^not /,"")):o="must be";var l;if(a(e," argument"))l="The ".concat(e," ").concat(o," ").concat(n(t,"type"));else{var d=s(e,".")?"property":"argument";l="The \"".concat(e,"\" ").concat(d," ").concat(o," ").concat(n(t,"type"))}return l+=". Received type ".concat(typeof r),l},TypeError),o("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),o("ERR_METHOD_NOT_IMPLEMENTED",function(e){return"The "+e+" method is not implemented"}),o("ERR_STREAM_PREMATURE_CLOSE","Premature close"),o("ERR_STREAM_DESTROYED",function(e){return"Cannot call "+e+" after a stream was destroyed"}),o("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),o("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),o("ERR_STREAM_WRITE_AFTER_END","write after end"),o("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),o("ERR_UNKNOWN_ENCODING",function(e){return"Unknown encoding: "+e},TypeError),o("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.codes=l},{}],90:[function(e,t){(function(r){(function(){'use strict';function o(e){return this instanceof o?void(s.call(this,e),l.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",n)))):new o(e)}function n(){this._writableState.ended||r.nextTick(i,this)}function i(e){e.end()}var a=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};t.exports=o;var s=e("./_stream_readable"),l=e("./_stream_writable");e("inherits")(o,s);for(var d=a(l.prototype),p=0,c;p<d.length;p++)c=d[p],o.prototype[c]||(o.prototype[c]=l.prototype[c]);Object.defineProperty(o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(o.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0===this._readableState||void 0===this._writableState||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":92,"./_stream_writable":94,_process:85,inherits:47}],91:[function(e,t){'use strict';function r(e){return this instanceof r?void o.call(this,e):new r(e)}t.exports=r;var o=e("./_stream_transform");e("inherits")(r,o),r.prototype._transform=function(e,t,r){r(null,e)}},{"./_stream_transform":93,inherits:47}],92:[function(e,t){(function(r,o){(function(){'use strict';function n(e){return N.from(e)}function i(e){return N.isBuffer(e)||e instanceof B}function a(e,t,r){return"function"==typeof e.prependListener?e.prependListener(t,r):void(e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r))}function s(t,r,o){A=A||e("./_stream_duplex"),t=t||{},"boolean"!=typeof o&&(o=r instanceof A),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=j(this,t,"readableHighWaterMark",o),this.buffer=new U,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(!K&&(K=e("string_decoder/").StringDecoder),this.decoder=new K(t.encoding),this.encoding=t.encoding)}function l(t){if(A=A||e("./_stream_duplex"),!(this instanceof l))return new l(t);var r=this instanceof A;this._readableState=new s(t,this,r),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),P.call(this)}function d(e,t,r,o,i){M("readableAddChunk",t);var a=e._readableState;if(null===t)a.reading=!1,h(e,a);else{var s;if(i||(s=c(a,t)),s)X(e,s);else if(!(a.objectMode||t&&0<t.length))o||(a.reading=!1,b(e,a));else if("string"==typeof t||a.objectMode||Object.getPrototypeOf(t)===N.prototype||(t=n(t)),o)a.endEmitted?X(e,new W):p(e,a,t,!0);else if(a.ended)X(e,new H);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||0!==t.length?p(e,a,t,!1):b(e,a)):p(e,a,t,!1)}}return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function p(e,t,r,o){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,o?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&g(e)),b(e,t)}function c(e,t){var r;return i(t)||"string"==typeof t||void 0===t||e.objectMode||(r=new F("chunk",["string","Buffer","Uint8Array"],t)),r}function u(e){return 1073741824<=e?e=1073741824:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function f(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e===e?(e>t.highWaterMark&&(t.highWaterMark=u(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0)):t.flowing&&t.length?t.buffer.head.data.length:t.length}function h(e,t){if(M("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?g(e):(t.needReadable=!1,!t.emittedReadable&&(t.emittedReadable=!0,m(e)))}}function g(e){var t=e._readableState;M("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(M("emitReadable",t.flowing),t.emittedReadable=!0,r.nextTick(m,e))}function m(e){var t=e._readableState;M("emitReadable_",t.destroyed,t.length,t.ended),!t.destroyed&&(t.length||t.ended)&&(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,E(e)}function b(e,t){t.readingMore||(t.readingMore=!0,r.nextTick(y,e,t))}function y(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(M("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function _(e){return function(){var t=e._readableState;M("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&L(e,"data")&&(t.flowing=!0,E(e))}}function k(e){var t=e._readableState;t.readableListening=0<e.listenerCount("readable"),t.resumeScheduled&&!t.paused?t.flowing=!0:0<e.listenerCount("data")&&e.resume()}function C(e){M("readable nexttick read 0"),e.read(0)}function S(e,t){t.resumeScheduled||(t.resumeScheduled=!0,r.nextTick(v,e,t))}function v(e,t){M("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),E(e),t.flowing&&!t.reading&&e.read(0)}function E(e){var t=e._readableState;for(M("flow",t.flowing);t.flowing&&null!==e.read(););}function w(e,t){if(0===t.length)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r}function T(e){var t=e._readableState;M("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,r.nextTick(x,t,e))}function x(e,t){if(M("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function I(e,t){for(var r=0,o=e.length;r<o;r++)if(e[r]===t)return r;return-1}t.exports=l;var A;l.ReadableState=s;var R=e("events").EventEmitter,L=function(e,t){return e.listeners(t).length},P=e("./internal/streams/stream"),N=e("buffer").Buffer,B=o.Uint8Array||function(){},O=e("util"),M;M=O&&O.debuglog?O.debuglog("stream"):function(){};var U=e("./internal/streams/buffer_list"),q=e("./internal/streams/destroy"),D=e("./internal/streams/state"),j=D.getHighWaterMark,z=e("../errors").codes,F=z.ERR_INVALID_ARG_TYPE,H=z.ERR_STREAM_PUSH_AFTER_EOF,V=z.ERR_METHOD_NOT_IMPLEMENTED,W=z.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,K,G,Q;e("inherits")(l,P);var X=q.errorOrDestroy,Y=["error","close","destroy","pause","resume"];Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),l.prototype.destroy=q.destroy,l.prototype._undestroy=q.undestroy,l.prototype._destroy=function(e,t){t(e)},l.prototype.push=function(e,t){var r=this._readableState,o;return r.objectMode?o=!0:"string"==typeof e&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=N.from(e,t),t=""),o=!0),d(this,e,t,!1,o)},l.prototype.unshift=function(e){return d(this,e,null,!0,!1)},l.prototype.isPaused=function(){return!1===this._readableState.flowing},l.prototype.setEncoding=function(t){K||(K=e("string_decoder/").StringDecoder);var r=new K(t);this._readableState.decoder=r,this._readableState.encoding=this._readableState.decoder.encoding;for(var o=this._readableState.buffer.head,n="";null!==o;)n+=r.write(o.data),o=o.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};l.prototype.read=function(e){M("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0===t.highWaterMark?0<t.length:t.length>=t.highWaterMark)||t.ended))return M("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?T(this):g(this),null;if(e=f(e,t),0===e&&t.ended)return 0===t.length&&T(this),null;var o=t.needReadable;M("need readable",o),(0===t.length||t.length-e<t.highWaterMark)&&(o=!0,M("length less than watermark",o)),t.ended||t.reading?(o=!1,M("reading or ended",o)):o&&(M("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,!t.reading&&(e=f(r,t)));var i;return i=0<e?w(e,t):null,null===i?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(!t.ended&&(t.needReadable=!0),r!==e&&t.ended&&T(this)),null!==i&&this.emit("data",i),i},l.prototype._read=function(){X(this,new V("_read()"))},l.prototype.pipe=function(e,t){function o(e,t){M("onunpipe"),e===u&&t&&!1===t.hasUnpiped&&(t.hasUnpiped=!0,i())}function n(){M("onend"),e.end()}function i(){M("cleanup"),e.removeListener("close",d),e.removeListener("finish",p),e.removeListener("drain",m),e.removeListener("error",l),e.removeListener("unpipe",o),u.removeListener("end",n),u.removeListener("end",c),u.removeListener("data",s),b=!0,f.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&m()}function s(t){M("ondata");var r=e.write(t);M("dest.write",r),!1===r&&((1===f.pipesCount&&f.pipes===e||1<f.pipesCount&&-1!==I(f.pipes,e))&&!b&&(M("false write response, pause",f.awaitDrain),f.awaitDrain++),u.pause())}function l(t){M("onerror",t),c(),e.removeListener("error",l),0===L(e,"error")&&X(e,t)}function d(){e.removeListener("finish",p),c()}function p(){M("onfinish"),e.removeListener("close",d),c()}function c(){M("unpipe"),u.unpipe(e)}var u=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=e;break;case 1:f.pipes=[f.pipes,e];break;default:f.pipes.push(e);}f.pipesCount+=1,M("pipe count=%d opts=%j",f.pipesCount,t);var h=(!t||!1!==t.end)&&e!==r.stdout&&e!==r.stderr,g=h?n:c;f.endEmitted?r.nextTick(g):u.once("end",g),e.on("unpipe",o);var m=_(u);e.on("drain",m);var b=!1;return u.on("data",s),a(e,"error",l),e.once("close",d),e.once("finish",p),e.emit("pipe",u),f.flowing||(M("pipe resume"),u.resume()),e},l.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var o=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<n;a++)o[a].emit("unpipe",this,{hasUnpiped:!1});return this}var s=I(t.pipes,e);return-1===s?this:(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)},l.prototype.on=function(e,t){var o=P.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=0<this.listenerCount("readable"),!1!==n.flowing&&this.resume()):"readable"==e&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,M("on readable",n.length,n.reading),n.length?g(this):!n.reading&&r.nextTick(C,this)),o},l.prototype.addListener=l.prototype.on,l.prototype.removeListener=function(e,t){var o=P.prototype.removeListener.call(this,e,t);return"readable"===e&&r.nextTick(k,this),o},l.prototype.removeAllListeners=function(e){var t=P.prototype.removeAllListeners.apply(this,arguments);return("readable"===e||void 0===e)&&r.nextTick(k,this),t},l.prototype.resume=function(){var e=this._readableState;return e.flowing||(M("resume"),e.flowing=!e.readableListening,S(this,e)),e.paused=!1,this},l.prototype.pause=function(){return M("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(M("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},l.prototype.wrap=function(e){var t=this,r=this._readableState,o=!1;for(var a in e.on("end",function(){if(M("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(n){if((M("wrapped data"),r.decoder&&(n=r.decoder.write(n)),!(r.objectMode&&(null===n||void 0===n)))&&(r.objectMode||n&&n.length)){var i=t.push(n);i||(o=!0,e.pause())}}),e)void 0===this[a]&&"function"==typeof e[a]&&(this[a]=function(t){return function(){return e[t].apply(e,arguments)}}(a));for(var i=0;i<Y.length;i++)e.on(Y[i],this.emit.bind(this,Y[i]));return this._read=function(t){M("wrapped _read",t),o&&(o=!1,e.resume())},this},"function"==typeof Symbol&&(l.prototype[Symbol.asyncIterator]=function(){return void 0===G&&(G=e("./internal/streams/async_iterator")),G(this)}),Object.defineProperty(l.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(l.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(l.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),l._fromList=w,Object.defineProperty(l.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(l.from=function(t,r){return void 0===Q&&(Q=e("./internal/streams/from")),Q(l,t,r)})}).call(this)}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../errors":89,"./_stream_duplex":90,"./internal/streams/async_iterator":95,"./internal/streams/buffer_list":96,"./internal/streams/destroy":97,"./internal/streams/from":99,"./internal/streams/state":101,"./internal/streams/stream":102,_process:85,buffer:40,events:45,inherits:47,"string_decoder/":109,util:38}],93:[function(e,t){'use strict';function r(e,t){var r=this._transformState;r.transforming=!1;var o=r.writecb;if(null===o)return this.emit("error",new l);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),o(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function o(e){return this instanceof o?void(c.call(this,e),this._transformState={afterTransform:r.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",n)):new o(e)}function n(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?i(this,null,null):this._flush(function(t,r){i(e,t,r)})}function i(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new p;if(e._transformState.transforming)throw new d;return e.push(null)}t.exports=o;var a=e("../errors").codes,s=a.ERR_METHOD_NOT_IMPLEMENTED,l=a.ERR_MULTIPLE_CALLBACK,d=a.ERR_TRANSFORM_ALREADY_TRANSFORMING,p=a.ERR_TRANSFORM_WITH_LENGTH_0,c=e("./_stream_duplex");e("inherits")(o,c),o.prototype.push=function(e,t){return this._transformState.needTransform=!1,c.prototype.push.call(this,e,t)},o.prototype._transform=function(e,t,r){r(new s("_transform()"))},o.prototype._write=function(e,t,r){var o=this._transformState;if(o.writecb=r,o.writechunk=e,o.writeencoding=t,!o.transforming){var n=this._readableState;(o.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},o.prototype._read=function(){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},o.prototype._destroy=function(e,t){c.prototype._destroy.call(this,e,function(e){t(e)})}},{"../errors":89,"./_stream_duplex":90,inherits:47}],94:[function(e,t){(function(r,o){(function(){'use strict';function n(e){var t=this;this.next=null,this.entry=null,this.finish=function(){T(t,e)}}function i(e){return R.from(e)}function a(e){return R.isBuffer(e)||e instanceof L}function s(){}function l(t,r,o){x=x||e("./_stream_duplex"),t=t||{},"boolean"!=typeof o&&(o=r instanceof x),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=B(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=!1===t.decodeStrings;this.decodeStrings=!i,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){b(r,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new n(this)}function d(t){x=x||e("./_stream_duplex");var r=this instanceof x;return r||W.call(d,this)?void(this._writableState=new l(t,this,r),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),A.call(this)):new d(t)}function p(e,t){var o=new F;V(e,o),r.nextTick(t,o)}function c(e,t,o,n){var i;return null===o?i=new z:"string"!=typeof o&&!t.objectMode&&(i=new M("chunk",["string","Buffer"],o)),!i||(V(e,i),r.nextTick(n,i),!1)}function u(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=R.from(t,r)),t}function f(e,t,r,o,n,i){if(!r){var a=u(t,o,n);o!==a&&(r=!0,n="buffer",o=a)}var s=t.objectMode?1:o.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:o,encoding:n,isBuf:r,callback:i,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else h(e,t,!1,s,o,n,i);return l}function h(e,t,r,o,n,i,a){t.writelen=o,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new j("write")):r?e._writev(n,t.onwrite):e._write(n,i,t.onwrite),t.sync=!1}function g(e,t,o,n,i){--t.pendingcb,o?(r.nextTick(i,n),r.nextTick(E,e,t),e._writableState.errorEmitted=!0,V(e,n)):(i(n),e._writableState.errorEmitted=!0,V(e,n),E(e,t))}function m(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function b(e,t){var o=e._writableState,n=o.sync,i=o.writecb;if("function"!=typeof i)throw new q;if(m(o),t)g(e,o,n,t,i);else{var a=C(o)||e.destroyed;a||o.corked||o.bufferProcessing||!o.bufferedRequest||k(e,o),n?r.nextTick(y,e,o,a,i):y(e,o,a,i)}}function y(e,t,r,o){r||_(e,t),t.pendingcb--,o(),E(e,t)}function _(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function k(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var o=t.bufferedRequestCount,i=Array(o),a=t.corkedRequestsFree;a.entry=r;for(var s=0,l=!0;r;)i[s]=r,r.isBuf||(l=!1),r=r.next,s+=1;i.allBuffers=l,h(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new n(t),t.bufferedRequestCount=0}else{for(;r;){var d=r.chunk,p=r.encoding,c=r.callback,u=t.objectMode?1:d.length;if(h(e,t,!1,u,d,p,c),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function C(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function S(e,t){e._final(function(r){t.pendingcb--,r&&V(e,r),t.prefinished=!0,e.emit("prefinish"),E(e,t)})}function v(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,r.nextTick(S,e,t)))}function E(e,t){var r=C(t);if(r&&(v(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var o=e._readableState;(!o||o.autoDestroy&&o.endEmitted)&&e.destroy()}return r}function w(e,t,o){t.ending=!0,E(e,t),o&&(t.finished?r.nextTick(o):e.once("finish",o)),t.ended=!0,e.writable=!1}function T(e,t,r){var o=e.entry;for(e.entry=null;o;){var n=o.callback;t.pendingcb--,n(r),o=o.next}t.corkedRequestsFree.next=e}t.exports=d;var x;d.WritableState=l;var I={deprecate:e("util-deprecate")},A=e("./internal/streams/stream"),R=e("buffer").Buffer,L=o.Uint8Array||function(){},P=e("./internal/streams/destroy"),N=e("./internal/streams/state"),B=N.getHighWaterMark,O=e("../errors").codes,M=O.ERR_INVALID_ARG_TYPE,U=O.ERR_METHOD_NOT_IMPLEMENTED,q=O.ERR_MULTIPLE_CALLBACK,D=O.ERR_STREAM_CANNOT_PIPE,j=O.ERR_STREAM_DESTROYED,z=O.ERR_STREAM_NULL_VALUES,F=O.ERR_STREAM_WRITE_AFTER_END,H=O.ERR_UNKNOWN_ENCODING,V=P.errorOrDestroy;e("inherits")(d,A),l.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(l.prototype,"buffer",{get:I.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}();var W;"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(W=Function.prototype[Symbol.hasInstance],Object.defineProperty(d,Symbol.hasInstance,{value:function(e){return!!W.call(this,e)||!(this!==d)&&e&&e._writableState instanceof l}})):W=function(e){return e instanceof this},d.prototype.pipe=function(){V(this,new D)},d.prototype.write=function(e,t,r){var o=this._writableState,n=!1,l=!o.objectMode&&a(e);return l&&!R.isBuffer(e)&&(e=i(e)),"function"==typeof t&&(r=t,t=null),l?t="buffer":!t&&(t=o.defaultEncoding),"function"!=typeof r&&(r=s),o.ending?p(this,r):(l||c(this,o,e,r))&&(o.pendingcb++,n=f(this,o,l,e,t,r)),n},d.prototype.cork=function(){this._writableState.corked++},d.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&k(this,e))},d.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())))throw new H(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(d.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),d.prototype._write=function(e,t,r){r(new U("_write()"))},d.prototype._writev=null,d.prototype.end=function(e,t,r){var o=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),o.corked&&(o.corked=1,this.uncork()),o.ending||w(this,o,r),this},Object.defineProperty(d.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(d.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),d.prototype.destroy=P.destroy,d.prototype._undestroy=P.undestroy,d.prototype._destroy=function(e,t){t(e)}}).call(this)}).call(this,e("_process"),"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"../errors":89,"./_stream_duplex":90,"./internal/streams/destroy":97,"./internal/streams/state":101,"./internal/streams/stream":102,_process:85,buffer:40,inherits:47,"util-deprecate":112}],95:[function(e,t){(function(r){(function(){'use strict';function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){return{value:e,done:t}}function i(e){var t=e[d];if(null!==t){var r=e[g].read();null!==r&&(e[f]=null,e[d]=null,e[p]=null,t(n(r,!1)))}}function a(e){r.nextTick(i,e)}function s(e,t){return function(r,o){e.then(function(){return t[u]?void r(n(void 0,!0)):void t[h](r,o)},o)}}var l=e("./end-of-stream"),d=Symbol("lastResolve"),p=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),f=Symbol("lastPromise"),h=Symbol("handlePromise"),g=Symbol("stream"),m=Object.getPrototypeOf(function(){}),b=Object.setPrototypeOf((y={get stream(){return this[g]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(n(void 0,!0));if(this[g].destroyed)return new Promise(function(t,o){r.nextTick(function(){e[c]?o(e[c]):t(n(void 0,!0))})});var o=this[f],i;if(o)i=new Promise(s(o,this));else{var a=this[g].read();if(null!==a)return Promise.resolve(n(a,!1));i=new Promise(this[h])}return this[f]=i,i}},o(y,Symbol.asyncIterator,function(){return this}),o(y,"return",function(){var e=this;return new Promise(function(t,r){e[g].destroy(null,function(e){return e?void r(e):void t(n(void 0,!0))})})}),y),m),y;t.exports=function(e){var t=Object.create(b,(r={},o(r,g,{value:e,writable:!0}),o(r,d,{value:null,writable:!0}),o(r,p,{value:null,writable:!0}),o(r,c,{value:null,writable:!0}),o(r,u,{value:e._readableState.endEmitted,writable:!0}),o(r,h,{value:function(e,r){var o=t[g].read();o?(t[f]=null,t[d]=null,t[p]=null,e(n(o,!1))):(t[d]=e,t[p]=r)},writable:!0}),r)),r;return t[f]=null,l(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var r=t[p];return null!==r&&(t[f]=null,t[d]=null,t[p]=null,r(e)),void(t[c]=e)}var o=t[d];null!==o&&(t[f]=null,t[d]=null,t[p]=null,o(n(void 0,!0))),t[u]=!0}),e.on("readable",a.bind(null,t)),t}}).call(this)}).call(this,e("_process"))},{"./end-of-stream":98,_process:85}],96:[function(e,t){'use strict';function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function o(e){for(var t=1,o;t<arguments.length;t++)o=null==arguments[t]?{}:arguments[t],t%2?r(Object(o),!0).forEach(function(t){n(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))});return e}function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0,o;r<t.length;r++)o=t[r],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}function l(e,t,r){u.prototype.copy.call(e,t,r)}var d=e("buffer"),u=d.Buffer,f=e("util"),h=f.inspect,g=h&&h.custom||"inspect";t.exports=function(){function e(){i(this,e),this.head=null,this.tail=null,this.length=0}return s(e,[{key:"push",value:function(e){var t={data:e,next:null};0<this.length?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return u.alloc(0);for(var t=u.allocUnsafe(e>>>0),r=this.head,o=0;r;)l(r.data,t,o),o+=r.data.length,r=r.next;return t}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):e===this.head.data.length?r=this.shift():r=t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,o=t.data;for(e-=o.length;t=t.next;){var i=t.data,a=e>i.length?i.length:e;if(o+=a===i.length?i:i.slice(0,e),e-=a,0===e){a===i.length?(++r,this.head=t.next?t.next:this.tail=null):(this.head=t,t.data=i.slice(a));break}++r}return this.length-=r,o}},{key:"_getBuffer",value:function(e){var t=u.allocUnsafe(e),r=this.head,o=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,a=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,a),e-=a,0===e){a===i.length?(++o,this.head=r.next?r.next:this.tail=null):(this.head=r,r.data=i.slice(a));break}++o}return this.length-=o,t}},{key:g,value:function(e,t){return h(this,o({},t,{depth:0,customInspect:!1}))}}]),e}()},{buffer:40,util:38}],97:[function(e,t){(function(e){(function(){'use strict';function r(e,t){n(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function n(e,t){e.emit("error",t)}t.exports={destroy:function(t,i){var a=this,s=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return s||l?(i?i(t):t&&(this._writableState?!this._writableState.errorEmitted&&(this._writableState.errorEmitted=!0,e.nextTick(n,this,t)):e.nextTick(n,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!i&&t?a._writableState?a._writableState.errorEmitted?e.nextTick(o,a):(a._writableState.errorEmitted=!0,e.nextTick(r,a,t)):e.nextTick(r,a,t):i?(e.nextTick(o,a),i(t)):e.nextTick(o,a)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,o=e._writableState;r&&r.autoDestroy||o&&o.autoDestroy?e.destroy(t):e.emit("error",t)}}}).call(this)}).call(this,e("_process"))},{_process:85}],98:[function(e,t){'use strict';function r(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,o=Array(r),n=0;n<r;n++)o[n]=arguments[n];e.apply(this,o)}}}function o(){}function n(e){return e.setHeader&&"function"==typeof e.abort}function i(e,t,s){if("function"==typeof t)return i(e,null,t);t||(t={}),s=r(s||o);var l=t.readable||!1!==t.readable&&e.readable,d=t.writable||!1!==t.writable&&e.writable,p=function(){e.writable||u()},c=e._writableState&&e._writableState.finished,u=function(){d=!1,c=!0,l||s.call(e)},f=e._readableState&&e._readableState.endEmitted,h=function(){l=!1,f=!0,d||s.call(e)},g=function(t){s.call(e,t)},m=function(){var t;return l&&!f?(e._readableState&&e._readableState.ended||(t=new a),s.call(e,t)):d&&!c?(e._writableState&&e._writableState.ended||(t=new a),s.call(e,t)):void 0},b=function(){e.req.on("finish",u)};return n(e)?(e.on("complete",u),e.on("abort",m),e.req?b():e.on("request",b)):d&&!e._writableState&&(e.on("end",p),e.on("close",p)),e.on("end",h),e.on("finish",u),!1!==t.error&&e.on("error",g),e.on("close",m),function(){e.removeListener("complete",u),e.removeListener("abort",m),e.removeListener("request",b),e.req&&e.req.removeListener("finish",u),e.removeListener("end",p),e.removeListener("close",p),e.removeListener("finish",u),e.removeListener("end",h),e.removeListener("error",g),e.removeListener("close",m)}}var a=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;t.exports=i},{"../../../errors":89}],99:[function(e,t){t.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],100:[function(e,t){'use strict';function r(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}function o(e){if(e)throw e}function n(e){return e.setHeader&&"function"==typeof e.abort}function a(t,o,i,a){a=r(a);var s=!1;t.on("close",function(){s=!0}),f===void 0&&(f=e("./end-of-stream")),f(t,{readable:o,writable:i},function(e){return e?a(e):void(s=!0,a())});var l=!1;return function(e){if(!s)return l?void 0:(l=!0,n(t)?t.abort():"function"==typeof t.destroy?t.destroy():void a(e||new u("pipe")))}}function s(e){e()}function l(e,t){return e.pipe(t)}function d(e){return e.length?"function"==typeof e[e.length-1]?e.pop():o:o}var p=e("../../../errors").codes,c=p.ERR_MISSING_ARGS,u=p.ERR_STREAM_DESTROYED,f;t.exports=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=d(t);if(Array.isArray(t[0])&&(t=t[0]),2>t.length)throw new c("streams");var n=t.map(function(e,r){var l=r<t.length-1;return a(e,l,0<r,function(e){i||(i=e),e&&n.forEach(s),l||(n.forEach(s),o(i))})}),i;return t.reduce(l)}},{"../../../errors":89,"./end-of-stream":98}],101:[function(e,t){'use strict';function r(e,t,r){return null==e.highWaterMark?t?e[r]:null:e.highWaterMark}var o=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(e,t,n,i){var a=r(t,i,n);if(null!=a){if(!(isFinite(a)&&Math.floor(a)===a)||0>a){var s=i?n:"highWaterMark";throw new o(s,a)}return Math.floor(a)}return e.objectMode?16:16384}}},{"../../../errors":89}],102:[function(e,t){t.exports=e("events").EventEmitter},{events:45}],103:[function(e,t,r){r=t.exports=e("./lib/_stream_readable.js"),r.Stream=r,r.Readable=r,r.Writable=e("./lib/_stream_writable.js"),r.Duplex=e("./lib/_stream_duplex.js"),r.Transform=e("./lib/_stream_transform.js"),r.PassThrough=e("./lib/_stream_passthrough.js"),r.finished=e("./lib/internal/streams/end-of-stream.js"),r.pipeline=e("./lib/internal/streams/pipeline.js")},{"./lib/_stream_duplex.js":90,"./lib/_stream_passthrough.js":91,"./lib/_stream_readable.js":92,"./lib/_stream_transform.js":93,"./lib/_stream_writable.js":94,"./lib/internal/streams/end-of-stream.js":98,"./lib/internal/streams/pipeline.js":100}],104:[function(e,t){'use strict';function r(e,t,r){var o=this;this._callback=e,this._args=r,this._interval=setInterval(e,t,this._args),this.reschedule=function(e){e||(e=o._interval),o._interval&&clearInterval(o._interval),o._interval=setInterval(o._callback,e,o._args)},this.clear=function(){o._interval&&(clearInterval(o._interval),o._interval=void 0)},this.destroy=function(){o._interval&&clearInterval(o._interval),o._callback=void 0,o._interval=void 0,o._args=void 0}}t.exports=function(){if("function"!=typeof arguments[0])throw new Error("callback needed");if("number"!=typeof arguments[1])throw new Error("interval needed");var e;if(0<arguments.length){e=Array(arguments.length-2);for(var t=0;t<e.length;t++)e[t]=arguments[t+2]}return new r(arguments[0],arguments[1],e)}},{}],105:[function(e,t){'use strict';t.exports=e("./index.js")()},{"./index.js":106}],106:[function(e,t){(function(e){(function(){'use strict';function r(t){return t instanceof e?e.from(t):new t.constructor(t.buffer.slice(),t.byteOffset,t.length)}function o(e){function t(e,t){for(var o=Object.keys(e),n=Array(o.length),a=0;a<o.length;a++){var d=o[a],p=e[d];if("object"!=typeof p||null===p)n[d]=p;else if(p instanceof Date)n[d]=new Date(p);else if(ArrayBuffer.isView(p))n[d]=r(p);else{var c=s.indexOf(p);n[d]=-1===c?t(p):l[c]}}return n}function n(e){if("object"!=typeof e||null===e)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return t(e,n);if(e instanceof Map)return new Map(t(Array.from(e),n));if(e instanceof Set)return new Set(t(Array.from(e),n));var o={};for(var a in s.push(e),l.push(o),e)if(!1!==Object.hasOwnProperty.call(e,a)){var d=e[a];if("object"!=typeof d||null===d)o[a]=d;else if(d instanceof Date)o[a]=new Date(d);else if(d instanceof Map)o[a]=new Map(t(Array.from(d),n));else if(d instanceof Set)o[a]=new Set(t(Array.from(d),n));else if(ArrayBuffer.isView(d))o[a]=r(d);else{var p=s.indexOf(d);o[a]=-1===p?n(d):l[p]}}return s.pop(),l.pop(),o}function a(e){if("object"!=typeof e||null===e)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return t(e,a);if(e instanceof Map)return new Map(t(Array.from(e),a));if(e instanceof Set)return new Set(t(Array.from(e),a));var o={};for(var n in s.push(e),l.push(o),e){var d=e[n];if("object"!=typeof d||null===d)o[n]=d;else if(d instanceof Date)o[n]=new Date(d);else if(d instanceof Map)o[n]=new Map(t(Array.from(d),a));else if(d instanceof Set)o[n]=new Set(t(Array.from(d),a));else if(ArrayBuffer.isView(d))o[n]=r(d);else{var p=s.indexOf(d);o[n]=-1===p?a(d):l[p]}}return s.pop(),l.pop(),o}var s=[],l=[];return e.proto?a:n}t.exports=function(e){function t(e,t){for(var o=Object.keys(e),n=Array(o.length),a=0;a<o.length;a++){var s=o[a],l=e[s];n[s]="object"!=typeof l||null===l?l:l instanceof Date?new Date(l):ArrayBuffer.isView(l)?r(l):t(l)}return n}function n(e){if("object"!=typeof e||null===e)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return t(e,n);if(e instanceof Map)return new Map(t(Array.from(e),n));if(e instanceof Set)return new Set(t(Array.from(e),n));var o={};for(var i in e)if(!1!==Object.hasOwnProperty.call(e,i)){var a=e[i];o[i]="object"!=typeof a||null===a?a:a instanceof Date?new Date(a):a instanceof Map?new Map(t(Array.from(a),n)):a instanceof Set?new Set(t(Array.from(a),n)):ArrayBuffer.isView(a)?r(a):n(a)}return o}function i(e){if("object"!=typeof e||null===e)return e;if(e instanceof Date)return new Date(e);if(Array.isArray(e))return t(e,i);if(e instanceof Map)return new Map(t(Array.from(e),i));if(e instanceof Set)return new Set(t(Array.from(e),i));var o={};for(var n in e){var a=e[n];o[n]="object"!=typeof a||null===a?a:a instanceof Date?new Date(a):a instanceof Map?new Map(t(Array.from(a),i)):a instanceof Set?new Set(t(Array.from(a),i)):ArrayBuffer.isView(a)?r(a):i(a)}return o}return e=e||{},e.circles?o(e):e.proto?i:n}}).call(this)}).call(this,e("buffer").Buffer)},{buffer:40}],107:[function(e,t,r){function o(e,t){for(var r in e)t[r]=e[r]}function n(e,t,r){return a(e,t,r)}var i=e("buffer"),a=i.Buffer;a.from&&a.alloc&&a.allocUnsafe&&a.allocUnsafeSlow?t.exports=i:(o(i,r),r.Buffer=n),n.prototype=Object.create(a.prototype),o(a,n),n.from=function(e,t,r){if("number"==typeof e)throw new TypeError("Argument must not be a number");return a(e,t,r)},n.alloc=function(e,t,r){if("number"!=typeof e)throw new TypeError("Argument must be a number");var o=a(e);return void 0===t?o.fill(0):"string"==typeof r?o.fill(t,r):o.fill(t),o},n.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return a(e)},n.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},{buffer:40}],108:[function(e,t){function r(e){return e.buffer.length?e.buffer.head?e.buffer.head.data.length:e.buffer[0].length:e.length}t.exports=function(e){var t=e._readableState;return t?t.objectMode||"number"==typeof e._duplexState?e.read():e.read(r(t)):null}},{}],109:[function(e,t,r){'use strict';function o(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0;}}function n(e){var t=o(e);if("string"!=typeof t&&(m.isEncoding===b||!b(e)))throw new Error("Unknown encoding: "+e);return t||e}function i(e){this.encoding=n(e);var t;switch(this.encoding){case"utf16le":this.text=p,this.end=c,t=4;break;case"utf8":this.fillLast=d,t=4;break;case"base64":this.text=u,this.end=f,t=3;break;default:return this.write=h,void(this.end=g);}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(t)}function a(e){if(127>=e)return 0;return 6==e>>5?2:14==e>>4?3:30==e>>3?4:2==e>>6?-1:-2}function s(e,t,r){var o=t.length-1;if(o<r)return 0;var n=a(t[o]);return 0<=n?(0<n&&(e.lastNeed=n-1),n):--o<r||-2===n?0:(n=a(t[o]),0<=n)?(0<n&&(e.lastNeed=n-2),n):--o<r||-2===n?0:(n=a(t[o]),0<=n?(0<n&&(2===n?n=0:e.lastNeed=n-3),n):0)}function l(e,t){if(128!=(192&t[0]))return e.lastNeed=0,"\uFFFD";if(1<e.lastNeed&&1<t.length){if(128!=(192&t[1]))return e.lastNeed=1,"\uFFFD";if(2<e.lastNeed&&2<t.length&&128!=(192&t[2]))return e.lastNeed=2,"\uFFFD"}}function d(e){var t=this.lastTotal-this.lastNeed,o=l(this,e,t);return void 0===o?this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length):o}function p(e,t){if(0==(e.length-t)%2){var o=e.toString("utf16le",t);if(o){var r=o.charCodeAt(o.length-1);if(55296<=r&&56319>=r)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],o.slice(0,-1)}return o}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function c(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function u(e,t){var r=(e.length-t)%3;return 0==r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1==r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function f(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function h(e){return e.toString(this.encoding)}function g(e){return e&&e.length?this.write(e):""}var m=e("safe-buffer").Buffer,b=m.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1;}};r.StringDecoder=i,i.prototype.write=function(e){if(0===e.length)return"";var t,o;if(this.lastNeed){if(t=this.fillLast(e),void 0===t)return"";o=this.lastNeed,this.lastNeed=0}else o=0;return o<e.length?t?t+this.text(e,o):this.text(e,o):t||""},i.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t},i.prototype.text=function(e,t){var r=s(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var o=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,o),e.toString("utf8",t,o)},i.prototype.fillLast=function(e){return this.lastNeed<=e.length?(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length)}},{"safe-buffer":107}],110:[function(e,t,r){'use strict';function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(e,t,r){if(e&&d.isObject(e)&&e instanceof o)return e;var n=new o;return n.parse(e,t,r),n}var a=e("punycode"),d=e("./util");r.parse=n,r.resolve=function(e,t){return n(e,!1,!0).resolve(t)},r.resolveObject=function(e,t){return e?n(e,!1,!0).resolveObject(t):t},r.format=function(e){return d.isString(e)&&(e=n(e)),e instanceof o?e.format():o.prototype.format.call(e)},r.Url=o;var p=["{","}","|","\\","^","`"].concat(["<",">","\"","`"," ","\r","\n","\t"]),c=["'"].concat(p),u=["%","/","?",";","#"].concat(c),f=["/","?","#"],h=/^[+a-z0-9A-Z_-]{0,63}$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},b={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=e("querystring");o.prototype.parse=function(e,t,r){if(!d.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),n=-1!==o&&o<e.indexOf("#")?"?":"#",_=e.split(n);_[0]=_[0].replace(/\\/g,"/"),e=_.join(n);var C=e;if(C=C.trim(),!r&&1===e.split("#").length){var S=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/.exec(C);if(S)return this.path=C,this.href=C,this.pathname=S[1],S[2]?(this.search=S[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var v=/^([a-z0-9.+-]+:)/i.exec(C);if(v){v=v[0];var E=v.toLowerCase();this.protocol=E,C=C.substr(v.length)}if(r||v||C.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===C.substr(0,2);w&&!(v&&m[v])&&(C=C.substr(2),this.slashes=!0)}if(!m[v]&&(w||v&&!b[v])){for(var T=-1,x=0,I;x<f.length;x++)I=C.indexOf(f[x]),-1!==I&&(-1===T||I<T)&&(T=I);var A,R;R=-1===T?C.lastIndexOf("@"):C.lastIndexOf("@",T),-1!==R&&(A=C.slice(0,R),C=C.slice(R+1),this.auth=decodeURIComponent(A)),T=-1;for(var x=0,I;x<u.length;x++)I=C.indexOf(u[x]),-1!==I&&(-1===T||I<T)&&(T=I);-1===T&&(T=C.length),this.host=C.slice(0,T),C=C.slice(T),this.parseHost(),this.hostname=this.hostname||"";var L="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!L)for(var P=this.hostname.split(/\./),x=0,N=P.length,B;x<N;x++)if(B=P[x],B&&!B.match(h)){for(var O="",M=0,U=B.length;M<U;M++)O+=127<B.charCodeAt(M)?"x":B[M];if(!O.match(h)){var k=P.slice(0,x),q=P.slice(x+1),D=B.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);D&&(k.push(D[1]),q.unshift(D[2])),q.length&&(C="/"+q.join(".")+C),this.hostname=k.join(".");break}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase(),L||(this.hostname=a.toASCII(this.hostname));var z=this.port?":"+this.port:"",F=this.hostname||"";this.host=F+z,this.href+=this.host,L&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==C[0]&&(C="/"+C))}if(!g[E])for(var x=0,N=c.length,H;x<N;x++)if(H=c[x],-1!==C.indexOf(H)){var V=encodeURIComponent(H);V===H&&(V=escape(H)),C=C.split(H).join(V)}var W=C.indexOf("#");-1!==W&&(this.hash=C.substr(W),C=C.slice(0,W));var K=C.indexOf("?");if(-1===K?t&&(this.search="",this.query={}):(this.search=C.substr(K),this.query=C.substr(K+1),t&&(this.query=y.parse(this.query)),C=C.slice(0,K)),C&&(this.pathname=C),b[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var z=this.pathname||"",G=this.search||"";this.path=z+G}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",o=this.hash||"",n=!1,i="";this.host?n=e+this.host:this.hostname&&(n=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&d.isObject(this.query)&&Object.keys(this.query).length&&(i=y.stringify(this.query));var a=this.search||i&&"?"+i||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||b[t])&&!1!==n?(n="//"+(n||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):!n&&(n=""),o&&"#"!==o.charAt(0)&&(o="#"+o),a&&"?"!==a.charAt(0)&&(a="?"+a),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),a=a.replace("#","%23"),t+n+r+a+o},o.prototype.resolve=function(e){return this.resolveObject(n(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(d.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var r=new o,n=Object.keys(this),a=0,l;a<n.length;a++)l=n[a],r[l]=this[l];if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0,f;u<c.length;u++)f=c[u],"protocol"!==f&&(r[f]=e[f]);return b[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!b[e.protocol]){for(var h=Object.keys(e),g=0,y;g<h.length;g++)y=h[g],r[y]=e[y];return r.href=r.format(),r}if(r.protocol=e.protocol,!e.host&&!m[e.protocol]){for(var _=(e.pathname||"").split("/");_.length&&!(e.host=_.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==_[0]&&_.unshift(""),2>_.length&&_.unshift(""),r.pathname=_.join("/")}else r.pathname=e.pathname;if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var C=r.pathname||"",p=r.search||"";r.path=C+p}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var s=r.pathname&&"/"===r.pathname.charAt(0),S=e.host||e.pathname&&"/"===e.pathname.charAt(0),E=S||s||r.host&&e.pathname,w=E,T=r.pathname&&r.pathname.split("/")||[],_=e.pathname&&e.pathname.split("/")||[],x=r.protocol&&!b[r.protocol];if(x&&(r.hostname="",r.port=null,r.host&&(""===T[0]?T[0]=r.host:T.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===_[0]?_[0]=e.host:_.unshift(e.host)),e.host=null),E=E&&(""===_[0]||""===T[0])),S)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,T=_;else if(_.length)T||(T=[]),T.pop(),T=T.concat(_),r.search=e.search,r.query=e.query;else if(!d.isNullOrUndefined(e.search)){if(x){r.hostname=r.host=T.shift();var I=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@");I&&(r.auth=I.shift(),r.host=r.hostname=I.shift())}return r.search=e.search,r.query=e.query,d.isNull(r.pathname)&&d.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!T.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var A=T.slice(-1)[0],R=(r.host||e.host||1<T.length)&&("."===A||".."===A)||""===A,L=0,P=T.length;0<=P;P--)A=T[P],"."===A?T.splice(P,1):".."===A?(T.splice(P,1),L++):L&&(T.splice(P,1),L--);if(!E&&!w)for(;L--;L)T.unshift("..");E&&""!==T[0]&&(!T[0]||"/"!==T[0].charAt(0))&&T.unshift(""),R&&"/"!==T.join("/").substr(-1)&&T.push("");var N=""===T[0]||T[0]&&"/"===T[0].charAt(0);if(x){r.hostname=r.host=N?"":T.length?T.shift():"";var I=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@");I&&(r.auth=I.shift(),r.host=r.hostname=I.shift())}return E=E||r.host&&T.length,E&&!N&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),d.isNull(r.pathname)&&d.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var e=this.host,t=/:[0-9]*$/.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{"./util":111,punycode:39,querystring:88}],111:[function(e,t){'use strict';t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],112:[function(e,t){(function(e){(function(){function r(t){try{if(!e.localStorage)return!1}catch(e){return!1}var r=e.localStorage[t];return null!=r&&"true"===(r+"").toLowerCase()}t.exports=function(e,t){function o(){if(!n){if(r("throwDeprecation"))throw new Error(t);else r("traceDeprecation")?console.trace(t):console.warn(t);n=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var n=!1;return o}}).call(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],113:[function(e,t){function r(e,t){function o(){for(var t=Array(arguments.length),r=0;r<t.length;r++)t[r]=arguments[r];var o=e.apply(this,t),n=t[t.length-1];return"function"==typeof o&&o!==n&&Object.keys(n).forEach(function(e){o[e]=n[e]}),o}if(e&&t)return r(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(t){o[t]=e[t]}),o}t.exports=r},{}],114:[function(e,t){'use strict';t.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},{}],115:[function(e,t){t.exports=function(){for(var e={},t=0,o;t<arguments.length;t++)for(var n in o=arguments[t],o)r.call(o,n)&&(e[n]=o[n]);return e};var r=Object.prototype.hasOwnProperty},{}],116:[function(e,t){'use strict';t.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},{}],117:[function(e,t){'use strict';function r(e){var t=this;if(t instanceof r||(t=new r),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(0<arguments.length)for(var o=0,n=arguments.length;o<n;o++)t.push(arguments[o]);return t}function o(e,t,r){var o=t===e.head?new s(r,null,t,e):new s(r,t,t.next,e);return null===o.next&&(e.tail=o),null===o.prev&&(e.head=o),e.length++,o}function n(e,t){e.tail=new s(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function a(e,t){e.head=new s(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function s(e,t,r,o){return this instanceof s?void(this.list=o,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null):new s(e,t,r,o)}t.exports=r,r.Node=s,r.create=r,r.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},r.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},r.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},r.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)n(this,arguments[e]);return this.length},r.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)a(this,arguments[e]);return this.length},r.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},r.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},r.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,o=0;null!==r;o++)e.call(t,r.value,o,this),r=r.next},r.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,o=this.length-1;null!==r;o--)e.call(t,r.value,o,this),r=r.prev},r.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},r.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},r.prototype.map=function(e,t){t=t||this;for(var o=new r,n=this.head;null!==n;)o.push(e.call(t,n.value,this)),n=n.next;return o},r.prototype.mapReverse=function(e,t){t=t||this;for(var o=new r,n=this.tail;null!==n;)o.push(e.call(t,n.value,this)),n=n.prev;return o},r.prototype.reduce=function(e,t){var r=this.head,o;if(1<arguments.length)o=t;else if(this.head)r=this.head.next,o=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=0;null!==r;n++)o=e(o,r.value,n),r=r.next;return o},r.prototype.reduceReverse=function(e,t){var r=this.tail,o;if(1<arguments.length)o=t;else if(this.tail)r=this.tail.prev,o=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var n=this.length-1;null!==r;n--)o=e(o,r.value,n),r=r.prev;return o},r.prototype.toArray=function(){for(var e=Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},r.prototype.toArrayReverse=function(){for(var e=Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},r.prototype.slice=function(e,t){t=t||this.length,0>t&&(t+=this.length),e=e||0,0>e&&(e+=this.length);var o=new r;if(t<e||0>t)return o;0>e&&(e=0),t>this.length&&(t=this.length);for(var n=0,a=this.head;null!==a&&n<e;n++)a=a.next;for(;null!==a&&n<t;n++,a=a.next)o.push(a.value);return o},r.prototype.sliceReverse=function(e,t){t=t||this.length,0>t&&(t+=this.length),e=e||0,0>e&&(e+=this.length);var o=new r;if(t<e||0>t)return o;0>e&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,a=this.tail;null!==a&&n>t;n--)a=a.prev;for(;null!==a&&n>e;n--,a=a.prev)o.push(a.value);return o},r.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),0>e&&(e=this.length+e);for(var n=0,a=this.head;null!==a&&n<e;n++)a=a.next;for(var s=[],n=0;a&&n<t;n++)s.push(a.value),a=this.removeNode(a);null===a&&(a=this.tail),a!==this.head&&a!==this.tail&&(a=a.prev);for(var n=0;n<r.length;n++)a=o(this,a,r[n]);return s},r.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e,o;null!==r;r=r.prev)o=r.prev,r.prev=r.next,r.next=o;return this.head=t,this.tail=e,this};try{e("./iterator.js")(r)}catch(e){}},{"./iterator.js":116}]},{},[1])(1)});